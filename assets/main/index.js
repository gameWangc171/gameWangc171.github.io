window.__require=function t(e,n,o){function i(s,a){if(!n[s]){if(!e[s]){var c=s.split("/");if(c=c[c.length-1],!e[c]){var u="function"==typeof __require&&__require;if(!a&&u)return u(c,!0);if(r)return r(c,!0);throw new Error("Cannot find module '"+s+"'")}s=c}var l=n[s]={exports:{}};e[s][0].call(l.exports,function(t){return i(e[s][1][t]||t)},l,l.exports,t,e,n,o)}return n[s].exports}for(var r="function"==typeof __require&&__require,s=0;s<o.length;s++)i(o[s]);return i}({AdapterMgr:[function(t,e,n){"use strict";cc._RF.push(e,"c7c88EclmxBRbUUgNKeHBgH","AdapterMgr");var o=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0}),n.AdapterType=void 0;var i=0,r=1<<i++,s=1<<i++,a=1<<i++,c=1<<i++,u=1<<i++,l=s|a,h=c|u,p=1<<i++,d=1<<i++,f=1<<i++;(function(t){t[t.Top=c]="Top",t[t.Bottom=u]="Bottom",t[t.Left=s]="Left",t[t.Right=a]="Right",t[t.StretchWidth=l]="StretchWidth",t[t.StretchHeight=h]="StretchHeight",t[t.FullWidth=p]="FullWidth",t[t.FullHeight=d]="FullHeight"})(n.AdapterType||(n.AdapterType={}));var _=cc._decorator,y=_.ccclass,v=(_.property,function(){function t(){}var e;return e=t,Object.defineProperty(t,"inst",{get:function(){return null==this._instance&&(this._instance=new e,this._instance.visibleSize=cc.view.getVisibleSize(),console.log("visiable size: "+this._instance.visibleSize)),this._instance},enumerable:!1,configurable:!0}),t.prototype.adapteByType=function(t,e,n){void 0===n&&(n=0);for(var o=f;o>0;)o&t&&this._doAdapte(o,e,n),o>>=1;var i=e.getComponent(cc.Widget);i.target=cc.find("Canvas"),i.updateAlignment()},t.prototype._doAdapte=function(t,e,n){void 0===n&&(n=0);var o=e.getComponent(cc.Widget);switch(o||(o=e.addComponent(cc.Widget)),t){case r:break;case s:o.isAlignLeft=!0,o.isAbsoluteLeft=!0,o.left=n||0;break;case a:o.isAlignRight=!0,o.isAbsoluteRight=!0,o.right=n||0;break;case c:if(cc.sys.platform===cc.sys.WECHAT_GAME){var i=window.wx.getMenuButtonBoundingClientRect(),l=window.wx.getSystemInfoSync();n+=cc.find("Canvas").height*(i.top/l.screenHeight)}o.isAlignTop=!0,o.isAbsoluteTop=!0,o.top=n||0;break;case u:o.isAlignBottom=!0,o.isAbsoluteBottom=!0,o.bottom=n||0;break;case p:e.height/=e.width/this.visibleSize.width,e.width=this.visibleSize.width;break;case d:e.width/=e.height/this.visibleSize.height,e.height=this.visibleSize.height}},t.prototype.removeAdaptater=function(t){t.getComponent(cc.Widget)&&t.removeComponent(cc.Widget)},t._instance=null,e=o([y],t)}());n.default=v,cc._RF.pop()},{}],AutoFindPath:[function(t,e,n){"use strict";cc._RF.push(e,"8b2cbBZJ+VGGaj2+N51QmgM","AutoFindPath"),Object.defineProperty(n,"__esModule",{value:!0}),n.AutoFindPath=n.lands=n.models=void 0;var o,i,r=function(t,e){this.x=0,this.y=0,this.F=0,this.G=0,this.H=0,this.parent=null,this.K=i.normal,this.x=t,this.y=e};(function(t){t[t.normal=0]="normal",t[t.tilt=1]="tilt"})(o=n.models||(n.models={})),function(t){t[t.normal=1]="normal",t[t.hard=2]="hard"}(i=n.lands||(n.lands={}));var s=function(){function t(e,n){this.model=o.tilt,this.mapTable=new Map,this.openList=[],this.openListMap=new Map,this.fixClosedListMap=new Map,this.closedListMap=new Map,this.bronPoint=null,this.targetPoint=null,this.nowPoint=null,this.mapData=null,this.searchLimit=2e3,e.searchLimit>0&&(this.searchLimit=e.searchLimit),e.x=e.x-e.width*e.anchorX,e.y=e.y-e.height*e.anchorY,this.mapData=e;for(var i=0,s=Math.ceil(e.width/this.mapData.gridLength);i<s;++i)for(var a=0,c=Math.ceil(e.height/this.mapData.gridLength);a<c;++a)this.mapTable.set(i.toString()+t.sep+a.toString(),new r(i,a));n&&this.updateMap.apply(this,n),null===t._ins&&(t._ins=this)}return t.formatToMapData=function(t,e){return{anchorY:t.anchorY,anchorX:t.anchorX,height:t.height,width:t.width,x:t.x,y:t.y,gridLength:e,angle:-t.angle}},t.getKey=function(e){return e.x.toString()+t.sep+e.y.toString()},t.prototype.addToOpenList=function(e){var n=t.getKey(e);if(void 0===this.mapTable.get(n))throw new Error("this point not in map");if(this.openListMap.get(n)){var o=e.parent,i=e.F;return e.parent=this.nowPoint,this.F(e),e.F>i?(e.parent=o,void this.F(e)):void 0}e.parent=this.nowPoint,this.F(e),this.openList.push(e),this.openListMap.set(n,this.mapTable.get(n))},t.prototype.isInClosedList=function(e){var n=t.getKey(e);return!(!this.fixClosedListMap.get(n)&&!this.closedListMap.get(n))},t.prototype.removeMinFFromOpenList=function(){this.openList.sort(function(t,e){return t.F>e.F?-1:1});var t=this.openList.pop();return t&&this.removeFromOpenList(t),t},t.prototype.removeFromOpenList=function(e){var n=t.getKey(e);if(!this.openListMap.has(n))throw new Error("not in openList");this.openListMap.delete(n)},t.prototype.addToClosedList=function(e){var n=t.getKey(e);if(void 0===this.mapTable.get(n))throw new Error("this point not in map");if(this.closedListMap.get(n))throw new Error("is in closedList");this.closedListMap.set(n,this.mapTable.get(n))},Object.defineProperty(t,"ins",{get:function(){return t._ins},enumerable:!1,configurable:!0}),t.prototype.getGridPositions=function(e){var n=[],o=e.width,i=e.height;-90!==e.angle&&-270!==e.angle||(o+=i,o-=i=o-i);for(var r=e.x-o*e.anchorX,s=e.x+o*(1-e.anchorX),a=e.y-i*e.anchorY,c=e.y+i*(1-e.anchorY),u=this.getGridPositionRaw({x:r,y:a}),l=this.getGridPositionRaw({x:s,y:a}).x-u.x+1,h=this.getGridPositionRaw({x:r,y:c}).y-u.y+1,p=u.x,d=u.y,f=0,_=l;f<_;++f)for(var y=0,v=h;y<v;++y){var m=(f+p).toString()+t.sep+(d+y).toString();void 0!==this.mapTable.get(m)&&n.push(m)}return n},t.prototype.getGridPositionRaw=function(t){return{x:Math.floor((t.x-this.mapData.x)/this.mapData.gridLength),y:Math.floor((t.y-this.mapData.y)/this.mapData.gridLength)}},t.prototype.getGridPosition=function(e){return this.mapTable.get(t.getKey(this.getGridPositionRaw(e)))},t.prototype.updateMap=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0,o=t;n<o.length;n++){var i=o[n];if(!(i.width*i.height<2))for(var r=0,s=this.getGridPositions(i);r<s.length;r++){var a=s[r];this.fixClosedListMap.set(a,this.mapTable.get(a))}}},t.prototype.removeFixObstacle=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0,o=t;n<o.length;n++)for(var i=o[n],r=0,s=this.getGridPositions(i);r<s.length;r++){var a=s[r];this.fixClosedListMap.delete(a)}},t.prototype.removeAllObstacle=function(){this.fixClosedListMap.clear()},t.prototype.autoAddPathPoint=function(){var e={x:this.nowPoint.x,y:this.nowPoint.y+1},n={x:this.nowPoint.x+1,y:this.nowPoint.y},i={x:this.nowPoint.x,y:this.nowPoint.y-1},r={x:this.nowPoint.x-1,y:this.nowPoint.y},s=[e,n,i,r];this.model===o.tilt&&(this.isInClosedList(e)||this.isInClosedList(n)||s.push({x:this.nowPoint.x+1,y:this.nowPoint.y+1}),this.isInClosedList(i)||this.isInClosedList(n)||s.push({x:this.nowPoint.x+1,y:this.nowPoint.y-1}),this.isInClosedList(e)||this.isInClosedList(r)||s.push({x:this.nowPoint.x-1,y:this.nowPoint.y+1}),this.isInClosedList(i)||this.isInClosedList(r)||s.push({x:this.nowPoint.x-1,y:this.nowPoint.y-1}));for(var a=t.getKey(this.targetPoint),c=0,u=s;c<u.length;c++){var l=u[c],h=t.getKey(l),p=this.mapTable.get(h);void 0!==p&&(this.isInClosedList(p)&&h!==a||this.addToOpenList(p))}},t.prototype.findGridPath=function(e,n,o){this.clear(),this.model=o;var i=this.getGridPosition(e),r=this.getGridPosition(n);if(!i||this.fixClosedListMap.get(t.getKey(r)))return cc.error("\u8d77\u70b9\u6709\u8bef"),[];if(!r||this.fixClosedListMap.get(t.getKey(r)))return cc.error("\u7ec8\u70b9\u6709\u8bef"),[];this.nowPoint=this.bronPoint=this.mapTable.get(t.getKey(i)),this.targetPoint=this.mapTable.get(t.getKey(r));var s=[];if(t.getKey(i)===t.getKey(r))return s;for(var a=0;!this.closedListMap.get(t.getKey(this.targetPoint));){if(this.addToClosedList(this.nowPoint),this.autoAddPathPoint(),this.nowPoint=this.removeMinFFromOpenList(),void 0===this.nowPoint)return s;if(t.getKey(this.nowPoint)===t.getKey(this.targetPoint))break;if(++a>this.searchLimit)return cc.error("\u8def\u5f84\u641c\u5bfb\u8d85\u9650"),s}var c=t.getKey(this.targetPoint),u=t.getKey(this.bronPoint);do{var l=this.mapTable.get(c);s.push(l),c=t.getKey(l.parent)}while(c!==u);return s.reverse()},t.prototype.gridPositionConvertGameObjectPosition=function(t,e,n){for(var o=[],i=0,r=t;i<r.length;i++){var s=r[i],a=s.x*this.mapData.gridLength+this.mapData.x+this.mapData.gridLength*e.x,c=s.y*this.mapData.gridLength+this.mapData.y+this.mapData.gridLength*e.y;o.push(new n(a,c))}return o},t.prototype.hasObstacle=function(e){var n=!0;try{n=!!this.fixClosedListMap.get(t.getKey(this.getGridPosition(e)))}catch(o){}return n},t.prototype.clear=function(){this.openList.length=0,this.openListMap.clear(),this.closedListMap.clear(),this.bronPoint=null,this.targetPoint=null,this.nowPoint=null},t.prototype.F=function(e){t.G(e),this.H(e),e.F=e.G+e.H+e.K},t.G=function(t){t.parent.x===t.x||t.parent.y===t.y?t.G=t.parent.G+10:t.G=t.parent.G+14},t.prototype.H=function(t){t.H=10*Math.abs(this.targetPoint.x-t.x)+10*Math.abs(this.targetPoint.y-t.y)},t.getNextPosition=function(t,e,n,o){for(var i=n*o;;){var r=e[0],s=cc.v2(r.x,r.y),a=s.sub(t),c=a.mag();if(i<c)return t.add(a.mul(i/c));if(i-=c,e.shift(),0==e.length)return s}},t.prototype.setNodeZindex=function(e){e.zIndex=-t.ins.mapData.y-e.y},t.sep="_",t._ins=null,t}();n.AutoFindPath=s,cc._RF.pop()},{}],BaseAssembler:[function(t,e,n){"use strict";cc._RF.push(e,"e3feaq91SVBdIfW2t1TEvv2","BaseAssembler");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=cc.gfx,s=new r.VertexFormat([{name:r.ATTR_POSITION,type:r.ATTR_TYPE_FLOAT32,num:2},{name:r.ATTR_UV0,type:r.ATTR_TYPE_FLOAT32,num:2},{name:r.ATTR_COLOR,type:r.ATTR_TYPE_UINT8,num:4,normalize:!0}]),a=function(t){function e(){var e=t.call(this)||this;return e.verticesCount=4,e.indicesCount=6,e.floatsPerVert=5,e.uvOffset=2,e.colorOffset=4,e._renderData=null,e._local=null,e._renderData=new cc.RenderData,e._renderData.init(e),e.initData(),e.initLocal(),e}return i(e,t),Object.defineProperty(e.prototype,"verticesFloats",{get:function(){return this.verticesCount*this.floatsPerVert},enumerable:!1,configurable:!0}),e.prototype.getVfmt=function(){return s},e.prototype.getBuffer=function(){return cc.renderer._handle.getBuffer("mesh",this.getVfmt())},e.prototype.initData=function(){this._renderData.createQuadData(0,this.verticesFloats,this.indicesCount)},e.prototype.initLocal=function(){this._local=[],this._local.length=4},e.prototype.updateColor=function(t,e){var n=this._renderData.uintVDatas[0];if(n){e=null!=e?e:t.node.color._val;for(var o=this.floatsPerVert,i=this.colorOffset,r=0;r<this.verticesCount;r++)n[i+r*o]=e}},e.prototype.updateUVs=function(){for(var t=[0,1,1,1,0,0,1,0],e=this.uvOffset,n=this.floatsPerVert,o=this._renderData.vDatas[0],i=0;i<this.verticesCount;i++){var r=2*i,s=n*i+e;o[s]=t[r],o[s+1]=t[r+1]}},e.prototype.updateWorldVertsWebGL=function(t){var e=this._local,n=this._renderData.vDatas[0],o=t.node._worldMatrix.m,i=o[0],r=o[1],s=o[4],a=o[5],c=o[12],u=o[13],l=e[0],h=e[2],p=e[1],d=e[3],f=1===i&&0===r&&0===s&&1===a,_=0,y=this.floatsPerVert;if(f)n[_]=l+c,n[_+1]=p+u,n[_+=y]=h+c,n[_+1]=p+u,n[_+=y]=h+c,n[_+1]=d+u,n[_+=y]=l+c,n[_+1]=d+u,_+=y;else{var v=i*l,m=i*h,g=r*l,b=r*h,w=s*p,T=s*d,S=a*p,O=a*d;n[_]=v+w+c,n[_+1]=g+S+u,n[_+=y]=m+w+c,n[_+1]=b+S+u,n[_+=y]=v+T+c,n[_+1]=g+O+u,n[_+=y]=m+T+c,n[_+1]=b+O+u}},e.prototype.updateWorldVertsNative=function(){var t=this._local,e=this._renderData.vDatas[0],n=this.floatsPerVert,o=t[0],i=t[2],r=t[1],s=t[3],a=0;e[a]=o,e[a+1]=r,e[a+=n]=i,e[a+1]=r,e[a+=n]=o,e[a+1]=s,e[a+=n]=i,e[a+1]=s},e.prototype.updateWorldVerts=function(t){this.updateWorldVertsWebGL(t)},e.prototype.updateVerts=function(t){var e,n,o,i,r=t.node,s=r.width,a=r.height,c=r.anchorX*s,u=r.anchorY*a;e=-c,n=-u,o=s-c,i=a-u;var l=this._local;l[0]=e,l[1]=n,l[2]=o,l[3]=i,this.updateWorldVerts(t)},e.prototype.updateRenderData=function(t){t._vertsDirty&&(this.updateUVs(t),this.updateVerts(t),t._vertsDirty=!1)},e.prototype.fillBuffers=function(t,e){e.worldMatDirty&&this.updateWorldVerts(t);var n=this._renderData,o=n.vDatas[0],i=n.iDatas[0],r=this.getBuffer(),s=r.request(this.verticesCount,this.indicesCount),a=s.byteOffset>>2,c=r._vData;o.length+a>c.length?c.set(o.subarray(0,c.length-a),a):c.set(o,a);for(var u=r._iData,l=s.indiceOffset,h=s.vertexOffset,p=[0,1,2,0,2,3,4,5,6,4,6,7],d=0,f=i.length;d<f;d++)u[l++]=h+p[d]},e.prototype.packToDynamicAtlas=function(t,e){if(!e._original&&cc.dynamicAtlasManager&&e._texture.packable){var n=cc.dynamicAtlasManager.insertSpriteFrame(e);n&&e._setDynamicAtlasFrame(n)}var o=t._materials[0];o&&o.getProperty("texture")!==e._texture&&(t._vertsDirty=!0,t._updateMaterial())},e}(cc.Assembler);n.default=a,cc._RF.pop()},{}],BaseMgr:[function(t,e,n){"use strict";cc._RF.push(e,"5e629wf1WBDNaVfkPO8PSYi","BaseMgr"),Object.defineProperty(n,"__esModule",{value:!0}),n.BaseMgr=void 0;n.BaseMgr=function(t){this.game=null,this.game=t},cc._RF.pop()},{}],BatchAssembler:[function(t,e,n){"use strict";cc._RF.push(e,"3989dU4L8BIBJM9muUNLD0B","BatchAssembler");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=t("./BaseAssembler"),s=cc.RenderFlow.FLAG_RENDER|cc.RenderFlow.FLAG_POST_RENDER,a=cc.RenderFlow.FLAG_OPACITY|cc.RenderFlow.FLAG_WORLD_TRANSFORM,c=!0,u=function(t){function e(){var e=t.call(this)||this;return e._groups=[],e}return i(e,t),e.prototype.fillBuffers=function(t,e){if(c){var n=(e.worldMatDirty?cc.RenderFlow.FLAG_WORLD_TRANSFORM:0)|(e.parentOpacityDirty?cc.RenderFlow.FLAG_OPACITY_COLOR:0);t.node.__DirtyFlag__=n,this._groups=[],this._walkByName(t.node.children)}},e.prototype.postFillBuffers=function(t,e){var n=e.worldMatDirty;if(c&&this._groups&&!(this._groups.length<=0)){c=!1;for(var o=0,i=this._groups;o<i.length;o++){var r=i[o];if(!(r.length<=0))for(var s=0,a=r;s<a.length;s++){var u=a[s],l=u.__RenderFlag__,h=u.__DirtyFlag__;e.worldMatDirty=h>0?1:0,u._renderFlag|=l,l&&cc.RenderFlow.flows[l]._func(u)}}this._groups=null,c=!0,e.worldMatDirty=n}},e.prototype._walkDefault=function(t){if(t&&!(t.length<=0)){for(var e=t[0].childrenCount,n=[],o=0;o<e;o++)n[o]=[];for(var i=[],r=0,c=t;r<c.length;r++){var u=c[r];if(u._activeInHierarchy&&0!=u.opacity){var l=u._renderFlag&s;for(l>0&&(u.__RenderFlag__=l,u._renderFlag&=~l,i.push(u)),u.__DirtyFlag__=u.parent.__DirtyFlag__|u._renderFlag&a,o=0;o<e;o++)n[o].push(u.children[o])}}i.length>0&&this._groups.push(i);for(var h=0,p=n;h<p.length;h++){var d=p[h];this._walkDefault(d)}}},e.prototype._walkByName=function(t){if(t&&!(t.length<=0)){for(var e={},n=[],o=[],i=0,r=t;i<r.length;i++){var c=r[i];if(c._activeInHierarchy&&0!=c.opacity){var u=c._renderFlag&s;u>0&&(c.__RenderFlag__=u,c._renderFlag&=~u,n.push(c)),c.__DirtyFlag__=c.parent.__DirtyFlag__|c._renderFlag&a;for(var l="",h=0,p=c.children;h<p.length;h++){var d=p[h];if(e[v=d.name]||(e[v]=[]),e[v].push(d),-1==o.indexOf(v))if(0==l.length)o.unshift(v);else{var f=o.indexOf(l);o.splice(f+1,0,v)}l=v}}}n.length>0&&this._groups.push(n);for(var _=0,y=o;_<y.length;_++){var v=y[_];this._walkByName(e[v])}}},e}(r.default);n.default=u,cc._RF.pop()},{"./BaseAssembler":"BaseAssembler"}],BatchComponent:[function(t,e,n){"use strict";cc._RF.push(e,"d393a5ZdPJN0q6Ay73BaSB9","BatchComponent");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var s,a=t("../Assemblers/BatchAssembler");(function(t){t[t.Default=0]="Default",t[t.SameName=1]="SameName"})(s||(s={}));var c=cc._decorator,u=c.ccclass,l=c.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mode=0,e}return i(e,t),e.prototype.onEnable=function(){t.prototype.onEnable.call(this),this.node._renderFlag|=cc.RenderFlow.FLAG_POST_RENDER},e.prototype._resetAssembler=function(){this.setVertsDirty(),(this._assembler=new a.default).init(this)},r([l({type:cc.Enum(s),tooltip:"\u904d\u5386\u6a21\u5f0f: Default \u9ed8\u8ba4\u7684\u5e7f\u5ea6\u904d\u5386, SameName \u540c\u540d\u7ed3\u70b9\u540c\u6279\u6b21"})],e.prototype,"mode",void 0),r([u],e)}(cc.RenderComponent);n.default=h,cc._RF.pop()},{"../Assemblers/BatchAssembler":"BatchAssembler"}],BigNumUtils:[function(t,e,n){"use strict";var o;cc._RF.push(e,"c4b72NccXhGKofOUM3hVrvP","BigNumUtils"),Object.defineProperty(n,"__esModule",{value:!0}),n.RountType=void 0,function(t){t[t.Round=0]="Round",t[t.Floor=1]="Floor",t[t.Ceil=2]="Ceil"}(o=n.RountType||(n.RountType={}));var i=function(){function t(){}return t.BNPlus=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=[0,0],o=0;o<t.length;o++){var i,r,s=t[o],a=+s;0===a||a&&a!==1/0?(r=s<10?0:Math.floor(Math.log10(+s)+1e-6),i=s<10?s:s/Math.pow(10,r)):s?(i=+(s=s.split("e"))[0]||0,r=+s[1]||0):(i=0,r=0),r>n[1]?(n[0]/=Math.pow(10,r-n[1]),n[0]+=i,n[1]=r):n[0]+=i/Math.pow(10,n[1]-r)}for(var c=n[0]>=0?1:-1,u=Math.abs(n[0]);u<1&&n[1]>0;)u*=10,n[1]-=1;for(;u>10;)u/=10,n[1]+=1;return(u*=c)+"e"+n[1]},t.BNMinus=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=[0,0],o=0;o<t.length;o++){var i,r,s=t[o],a=o,c=+s;0===c||c&&c!==1/0?(r=s<10?0:Math.floor(Math.log10(+s)+1e-6),i=s<10?s:s/Math.pow(10,r)):(i=+(s=s.split("e"))[0],r=+s[1]),a?n[1]<r?(n[0]=n[0]/Math.pow(10,r-n[1])-i,n[1]=r):n[0]-=i/Math.pow(10,n[1]-r):(n[0]=i,n[1]=r)}for(var u=n[0]>=0?1:-1,l=Math.abs(n[0]);l<1&&n[1]>0;)l*=10,n[1]-=1;for(;l>10;)l/=10,n[1]+=1;return(l*=u)+"e"+n[1]},t.BNTimes=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=[0,0];t.forEach(function(t,e){var o,i,r=+t;0===r||r&&r!==1/0?(i=t<10?0:Math.floor(Math.log10(+t)+1e-6),o=t<10?t:t/Math.pow(10,i)):t?(o=+(t=t.split("e"))[0]||0,i=+t[1]||0):(o=1,i=0),e?(n[0]*=o,n[1]+=i,n[0]>1e300&&(n[0]/=1e300,n[1]+=300)):(n[0]=o,n[1]=i)});for(var o=n[0]>=0?1:-1,i=Math.abs(n[0]);i<1&&n[1]>0;)i*=10,n[1]-=1;for(;i>10;)i/=10,n[1]+=1;return i*o+"e"+n[1]},t.BNDevide=function(t,e){if(0==+e)return 0;var n=[0,0],o=1;[t,e].forEach(function(t,e){var i,r,s=+t,a=Math.abs(s);0===a||a&&a!==1/0?(r=a<10?0:Math.floor(Math.log10(a)+1e-6),i=a<10?a:a/Math.pow(10,r)):(s=+(t=t.split("e"))[0],i=Math.abs(s),r=+t[1]),o*=s>=0?1:-1,0===e?(n[0]=i,n[1]=r):(n[0]/=i,n[1]-=r)});for(var i=Math.abs(n[0]);i<1&&n[1]>0;)i*=10,n[1]-=1;for(;i>10;)i/=10,n[1]+=1;return i*=o,n[1]<100?i*Math.pow(10,n[1]):this.BNTimes(i,this.BNPow(10,n[1]))},t.BNCompare=function(t,e){var n=[0,0],o=[0,0];return[t,e].forEach(function(t,e){var i=+t;0===i||i&&i!==1/0?(o[e]=t<10?0:Math.floor(Math.log10(+t)+1e-6),n[e]=t<10?t:t/Math.pow(10,o[e])):(t=t.split("e"),n[e]=+t[0],o[e]=+t[1])}),n[0]*n[1]<0?n[0]>0?1:-1:o[1]>o[0]?-1:o[1]<o[0]?1:n[1]>n[0]?-1:n[1]<n[0]?1:0},t.BNPow=function(t,e){if(!t)return"0";if(!e)return"1";var n=Math.floor(Math.log(1e300)/Math.log(t)),o=1;if((n=Math.max(n,1))>=e)o=Math.pow(t,e);else{for(var i=Math.floor(e/n),r=[],s=Math.pow(t,n),a=0;a<i;a++)r.push(s);r.push(Math.pow(t,e-n*i)),o=this.BNTimes.apply(this,r)}return o},t.BNMax=function(t,e){return this.BNCompare(t,e)>0?t:e},t.BNMin=function(t,e){return this.BNCompare(t,e)>0?e:t},t.BNLog=function(t){var e=+t;if(0===e||e&&e!==1/0){var n=e>=0?1:-1;return e=Math.abs(e),n*Math.log10(e)}return+t.split("e")[1]},t.BNSqrt=function(t){var e=+t;if(0===e||e&&e!==1/0)return Math.sqrt(e);var n=t.split("e"),o=+n[0],i=+n[1];return Math.sqrt(o)+"e"+i/2},t.BNSqrtEx=function(t,e){var n=+t;if(0===n||n&&n!==1/0)return Math.pow(n,1/e);var o=t.split("e"),i=+o[0],r=+o[1];return Math.pow(i,1/e)+"e"+r/e},t.BNFloor=function(t){var e=+t;return 0===e||e&&e!==1/0?Math.floor(e):t},t.BNCeil=function(t){var e=+t;return 0===e||e&&e!==1/0?Math.ceil(e):t},t.BNRound=function(t){var e=+t;return 0===e||e&&e!==1/0?Math.round(e):t},t.BN2Number=function(t){var e=+t;if(0===e||e&&e!==1/0)return e;var n=t.split("e");return+n[0]*Math.pow(10,n[1])},t.getOwnString=function(t){return this.getNumberString(t,void 0,void 0,o.Floor)},t.getCostString=function(t){return this.getNumberString(t,void 0,void 0,o.Ceil)},t.getNumberString=function(t,e,n,i){var r,s;void 0===e&&(e=0),void 0===i&&(i=o.Round);var a,c=+t;if(0===c||c&&c!==1/0){if(t<1e3)return this.roundNum(t,i,e);var u=""+Math.round(t),l=0;if(~u.indexOf("e")){var h=+u.split("e")[0],p=+u.split("e")[1];l=p+=Math.floor(Math.log10(h))}else l=Math.floor(Math.log10(t));r=~u.indexOf("e")?+u.split("e")[0]*Math.pow(10,l%3):+u.slice(0,l%3+4)/1e3,s=l/3>>0}else{if(+(t=t.split("e"))[1]<3){var d=t[0]*Math.pow(10,t[1]);return this.roundNum(d,i,e)}for(r=t[0]*Math.pow(10,t[1]%3);r>1e3;)r/=1e3,t[1]=+t[1]+3;s=t[1]/3>>0}if(s<4)a=["","K","M","B"][s];else{var f=(s-4)/26>>0,_=f/26>>0,y=(s-4)%26,v="abcdefghijklmnopqrstuvwxyz",m=v.toUpperCase();a=(_<2?v:m)[f%26]+(_%2?m:v)[y]}return void 0===n&&(n=r<10?2:r<100?1:0),this.roundNum(r,i,n)+a},t.roundNum=function(t,e,n){var i,r;if(i=e===o.Round?Math.round:e===o.Ceil?Math.ceil:Math.floor,0===n)r=i(t);else{var s=Math.pow(10,n);r=i(s*t)/s}return r.toFixed(n)},t.getFixNumber=function(t,e){void 0===e&&(e=1);var n=Math.pow(10,e);return Math.floor(t*n)/n},t.getPercentString=function(t,e){return void 0===e&&(e=1),"string"==typeof t?this.getNumberString(this.BNTimes(t,100),e)+"%":this.getNumberString(100*t,e)+"%"},t}();n.default=i,cc._RF.pop()},{}],BroadCast:[function(t,e,n){"use strict";cc._RF.push(e,"082ecq87BtC3qGrtG+cRJqY","BroadCast"),Object.defineProperty(n,"__esModule",{value:!0}),n.ListenerBinding=n.Broadcast=void 0;var o=function(){function t(){this.bindings=[]}return t.prototype.on=function(t,e){var n=new i(t,e,!1,this);return this.bindings.push(n),n},t.prototype.once=function(t,e){var n=new i(t,e,!0,this);return this.bindings.push(n),n},t.prototype.dispatch=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=!1,o=0,i=this.bindings;o<i.length;o++){var r=i[o];r.hasDestroyed?n=!0:r.execute.apply(r,t)}if(n)for(var s=0;s<this.bindings.length;s++)this.bindings[s].hasDestroyed&&(this.bindings.splice(s,1),s--)},t.prototype.get=function(t,e){for(var n=0,o=this.bindings;n<o.length;n++){var i=o[n];if(i.listener==t&&i.target==e&&!i.hasDestroyed)return i}return null},t.prototype.has=function(t,e){for(var n=0,o=this.bindings;n<o.length;n++){var i=o[n];if(i.listener==t&&i.target==e&&!i.hasDestroyed)return!0}return!1},t.prototype.remove=function(t,e){for(var n=0,o=this.bindings;n<o.length;n++){var i=o[n];if(i.listener==t&&i.target==e&&!i.hasDestroyed)return i.destroy()}},t.prototype.removeAll=function(){for(;this.bindings.length;)this.bindings.pop().destroy()},t}();n.Broadcast=o;var i=function(){function t(t,e,n,o){var i=this;this.destroySelf=function(){i.destroy()},this.listener=t,this.target=e,this.once=n,this.broadcast=o,this.hasDestroyed=!1}return t.prototype.execute=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!this.hasDestroyed){var n=this.listener.apply(this.target,t);return this.once&&this.destroy(),n}return null},t.prototype.destroy=function(){this.listener=null,this.target=null,this.once=null,this.broadcast=null,this.hasDestroyed=!0},t}();n.ListenerBinding=i,cc._RF.pop()},{}],BroadcastCenter:[function(t,e,n){"use strict";cc._RF.push(e,"c1631mjt99N+bqKIUwCcgeG","BroadcastCenter"),Object.defineProperty(n,"__esModule",{value:!0}),n.BroadcastCenter=n.BuildingData=void 0;var o=t("../Utils/BroadCast");n.BuildingData=function(){};var i=function(){function t(){}return t.buildingState=new o.Broadcast,t}();n.BroadcastCenter=i,i.buildingState.on(function(t){console.log(t.id,t.state)},this),i.buildingState.dispatch({id:1,state:"success"}),cc._RF.pop()},{"../Utils/BroadCast":"BroadCast"}],ButtonPlus:[function(t,e,n){"use strict";cc._RF.push(e,"3eaf8iLxgtDEKVcEmFvrbqy","ButtonPlus");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var s=t("../../UIFrame/SoundMgr"),a=cc._decorator,c=a.ccclass,u=a.property,l=a.executeInEditMode,h=a.menu,p=a.help,d=a.inspector,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.audioUrl="",e.openContinuous=!0,e.continuousTime=1,e.continuous=!1,e._continuousTimer=null,e.openLongPress=!1,e.longPressTime=1,e.longPressFlag=!1,e.longPressTimer=null,e}return i(e,t),e.prototype.onEnable=function(){this.continuous=!1,t.prototype.onEnable.call(this)},e.prototype.onDisable=function(){this._continuousTimer&&(clearTimeout(this._continuousTimer),this._continuousTimer=null),this.longPressTimer&&(clearTimeout(this.longPressTimer),this.longPressTimer=null),t.prototype.onDisable.call(this)},e.prototype._onTouchBegan=function(t){this.interactable&&this.enabledInHierarchy&&(this.openLongPress&&!this.longPressFlag&&(this.longPressTimer&&clearTimeout(this.longPressTimer),this.longPressTimer=setTimeout(function(){this._pressed&&(this.node.emit("longclickStart",this),this.longPressFlag=!0)}.bind(this),1e3*this.longPressTime)),this._pressed=!0,this._updateState(),t.stopPropagation())},e.prototype._onTouchEnded=function(t){this.interactable&&this.enabledInHierarchy&&(this._pressed&&this.longPressFlag?(this.node.emit("longclickEnd",this),this.longPressFlag=!1):this._pressed&&!this.continuous&&(this.continuous=!!this.openContinuous,cc.Component.EventHandler.emitEvents(this.clickEvents,t),this.node.emit("click",t),s.default.inst.playEffect(this.audioUrl),this.openContinuous&&(this._continuousTimer=setTimeout(function(){this.continuous=!1}.bind(this),1e3*this.continuousTime))),this._pressed=!1,this._updateState(),t.stopPropagation())},e.prototype._onTouchCancel=function(){this.interactable&&this.enabledInHierarchy&&(this._pressed&&this.longPressFlag&&(this.node.emit("longclickEnd",this),this.longPressFlag=!1),this._pressed=!1,this._updateState())},e.prototype.addClick=function(t,e){this.node.off("click"),this.node.on("click",t,e)},e.prototype.addLongClick=function(t,e,n){this.node.off("longclickStart"),this.node.off("longclickEnd"),this.node.on("longclickStart",t,n),this.node.on("longclickEnd",e,n)},r([u({tooltip:"\u97f3\u6548\u8def\u5f84",type:"",multiline:!0,formerlySerializedAs:"_N$string"})],e.prototype,"audioUrl",void 0),r([u({tooltip:"\u5c4f\u853d\u8fde\u7eed\u70b9\u51fb"})],e.prototype,"openContinuous",void 0),r([u({tooltip:"\u5c4f\u853d\u65f6\u95f4, \u5355\u4f4d:\u79d2"})],e.prototype,"continuousTime",void 0),r([u({tooltip:"\u662f\u5426\u5f00\u542f\u957f\u6309\u4e8b\u4ef6"})],e.prototype,"openLongPress",void 0),r([u({tooltip:"\u957f\u6309\u65f6\u95f4"})],e.prototype,"longPressTime",void 0),r([c,h("i18n:MAIN_MENU.component.ui/ButtonPlus"),l,p("i18n:COMPONENT.help_url.button"),d("packages://buttonplus/inspector.js")],e)}(cc.Button);n.default=f,cc._RF.pop()},{"../../UIFrame/SoundMgr":"SoundMgr"}],CacheUtils:[function(t,e,n){"use strict";cc._RF.push(e,"f7caav8yMdOrZNrAy/SIOIW","CacheUtils");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var s=t("../../UIFrame/ResMgr"),a=cc._decorator,c=a.ccclass,u=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.com=null,e.passTime=0,e}return i(e,t),e.prototype.onLoad=function(){this.com=this.getComponent(cc.Label)},e.prototype.start=function(){var t=this;this.node.on(cc.Node.EventType.TOUCH_MOVE,function(e){t.node.x+=e.getDeltaX(),t.node.y+=e.getDeltaY()},this)},e.prototype.update=function(t){this.passTime+=t,this.passTime>1&&(this.passTime=0,this.com.string=s.default.inst.computeTextureCache())},r([c],e)}(cc.Component));n.default=u,cc._RF.pop()},{"../../UIFrame/ResMgr":"ResMgr"}],CameraCapture:[function(t,e,n){"use strict";cc._RF.push(e,"29803DQKJdC2KvHyjig9y8N","CameraCapture");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var s=t("../../UIFrame/CocosHelper"),a=cc._decorator,c=a.ccclass,u=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.captureNode=null,e.camera=null,e}var n;return i(e,t),n=e,e.prototype.onLoad=function(){n.inst=this,this.camera=this.getComponent(cc.Camera),this.camera||(this.camera=this.addComponent(cc.Camera)),this.node.active=!1},e.prototype.start=function(){},e.prototype.captureTexture=function(){this.node.active=!0,this.captureNode.active=!1;var t=s.default.captureScreen(this.camera,this.captureNode);return this.captureNode.active=!0,this.node.active=!1,t},e.inst=null,r([u(cc.Node)],e.prototype,"captureNode",void 0),n=r([c],e)}(cc.Component);n.default=l,cc._RF.pop()},{"../../UIFrame/CocosHelper":"CocosHelper"}],ClassHelper:[function(t,e,n){"use strict";cc._RF.push(e,"8a6f5OHp8dBpb72DtfAMWuK","ClassHelper"),Object.defineProperty(n,"__esModule",{value:!0}),n.GetClassByName=n.RigisterClass=void 0;var o=cc.js.createMap();n.RigisterClass=function(t){return function(e){o[t]=e}},n.GetClassByName=function(t){return o[t]},cc._RF.pop()},{}],CocosHelper:[function(t,e,n){"use strict";cc._RF.push(e,"d6791Dm+YVK/qXMfQo5ktVd","CocosHelper");var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function s(t){try{c(o.next(t))}catch(e){r(e)}}function a(t){try{c(o.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}c((o=o.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,o,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(t){return function(e){return c([t,e])}}function c(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,o=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(a){r=[6,a],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.LoadProgress=void 0;var r=function(){};n.LoadProgress=r;var s=function(){function t(){}return t.callInNextTick=function(){return o(this,void 0,void 0,function(){return i(this,function(){return[2,new Promise(function(t){setTimeout(function(){t(!0)},0)})]})})},t.runRepeatTweenSync=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return o(this,void 0,void 0,function(){return i(this,function(){return[2,new Promise(function(o){for(var i=cc.tween(t),r=0,s=n;r<s.length;r++){var a=s[r];i=i.then(a)}e<0?cc.tween(t).repeatForever(i).start():cc.tween(t).repeat(e,i).call(function(){o(!0)}).start()})]})})},t.runTweenSync=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return o(this,void 0,Promise,function(){return i(this,function(){return[2,new Promise(function(n){for(var o=cc.tween(t),i=0,r=e;i<r.length;i++){var s=r[i];o=o.then(s)}o.call(function(){n()}).start()})]})})},t.prototype.stopTween=function(t){cc.Tween.stopAllByTarget(t)},t.prototype.stopTweenByTag=function(t){cc.Tween.stopAllByTag(t)},t.runActionSync=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return o(this,void 0,void 0,function(){return i(this,function(){return!e||e.length<=0?[2]:[2,new Promise(function(n){e.push(cc.callFunc(function(){n(!0)})),t.runAction(cc.sequence(e))})]})})},t.runAnimSync=function(e,n){return o(this,void 0,void 0,function(){var o,r,s,a;return i(this,function(i){switch(i.label){case 0:if(!(o=e.getComponent(cc.Animation)))return[2];if(r=null,n){if(s=o.getClips(),"number"==typeof n)r=s[n];else if("string"==typeof n)for(a=0;a<s.length;a++)if(s[a].name===n){r=s[a];break}}else r=o.defaultClip;return r?[4,t.sleepSync(r.duration)]:[2];case 1:return i.sent(),[2]}})})},t.loadResThrowErrorSync=function(){return null},t.loadRes=function(t,e,n){var o=this;this._loadingMap[t]?this._loadingMap[t].push(n):(this._loadingMap[t]=[n],this.loadResSync(t,e).then(function(e){for(var n=0,i=o._loadingMap[t];n<i.length;n++)(0,i[n])(e);o._loadingMap[t]=null,delete o._loadingMap[t]}))},t.loadResSync=function(t,e,n){var o=this;return new Promise(function(i){n||(n=o._onProgress),cc.resources.load(t,e,n,function(e,n){e?(cc.error(t+" [\u8d44\u6e90\u52a0\u8f7d] \u9519\u8bef "+e),i(null)):i(n)})})},t._onProgress=function(e,n,o){t.loadProgress.completedCount=e,t.loadProgress.totalCount=n,t.loadProgress.item=o,t.loadProgress.cb&&t.loadProgress.cb(e,n,o)},t.findChildInNode=function(t,e){if(e.name==t)return e;for(var n=0;n<e.childrenCount;n++){var o=this.findChildInNode(t,e.children[n]);if(o)return o}return null},t.getComponentName=function(t){var e=t.name.match(/<.*>$/);return e&&e.length>0?e[0].slice(1,-1):t.name},t.loadBundleSync=function(t,e){return new Promise(function(n){cc.assetManager.loadBundle(t,e,function(e,o){e?(cc.error("\u52a0\u8f7dbundle\u5931\u8d25, url: "+t+", err:"+e),n(null)):n(o)})})},t.loadAssetFromBundleSync=function(t,e){var n=cc.assetManager.getBundle(t);return n?new Promise(function(t){n.load(e,function(n,o){n?(cc.error("\u52a0\u8f7dbundle\u4e2d\u7684\u8d44\u6e90\u5931\u8d25, \u672a\u627e\u5230asset, url:"+e+", err:"+n),t(null)):t(o)})}):(cc.error("\u52a0\u8f7dbundle\u4e2d\u7684\u8d44\u6e90\u5931\u8d25, \u672a\u627e\u5230bundle, bundleUrl:"+t),null)},t.loadAssetSync=function(t){var e=this;return new Promise(function(n){cc.resources.load(t,function(o,i){o?(e.addRef(i),n(i)):(cc.error("\u52a0\u8f7dasset\u5931\u8d25, url:"+t+", err: "+o),n(null))})})},t.releaseAsset=function(t){this.decRes(t)},t.addRef=function(t){if(t instanceof Array)for(var e=0,n=t;e<n.length;e++)n[e].addRef();else t.addRef()},t.decRes=function(t){if(t instanceof Array)for(var e=0,n=t;e<n.length;e++)n[e].decRef();else t.decRef()},t.captureScreen=function(t,e){var n=new cc.RenderTexture,o=t.targetTexture,i=cc.rect(0,0,cc.visibleRect.width,cc.visibleRect.height);e&&(i=e instanceof cc.Node?e.getBoundingBoxToWorld():e),n.initWithSize(cc.visibleRect.width,cc.visibleRect.height,cc.game._renderContext.STENCIL_INDEX8),t.targetTexture=n,t.render(),t.targetTexture=o;var r=new ArrayBuffer(i.width*i.height*4),s=new Uint8Array(r);return n.readPixels(s,i.x,i.y,i.width,i.height),s},t.loadProgress=new r,t.sleepSync=function(t){return new Promise(function(e){cc.Canvas.instance.scheduleOnce(function(){e(!0)},t)})},t._loadingMap={},t}();n.default=s,cc._RF.pop()},{}],Coffee:[function(t,e,n){"use strict";cc._RF.push(e,"071a9kn30BEsouzuJRkjaZl","Coffee");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var s=cc._decorator,a=s.ccclass,c=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tumbler=null,e.coffee=null,e.coffeeMaterial=null,e.topAnimaStep=.1,e.topAnimaSpeed=.1,e.initWaveHeight=.1,e.tempWaveHeight=.9,e}return i(e,t),e.prototype.start=function(){this.init()},e.prototype.init=function(){this.coffee.setMaterial(0,this.coffeeMaterial),this.coffeeMaterial=this.coffee.getMaterial(0),this.coffeeMaterial.setProperty("isWave",.3),this.coffeeMaterial.setProperty("waveHeight",this.tempWaveHeight)},e.prototype.runTopUp=function(){this.coffeeMaterial.setProperty("isWave",.3),this.coffeeMaterial.setProperty("waveHeight",this.tempWaveHeight),this.schedule(this.topUpAnima,this.topAnimaSpeed)},e.prototype.topUpAnima=function(){this.tempWaveHeight-=.01,this.tempWaveHeight>.3?this.coffeeMaterial.setProperty("waveHeight",this.tempWaveHeight):(this.coffeeMaterial.setProperty("isWave",.2),this.tempWaveHeight=this.initWaveHeight,this.unschedule(this.topUpAnima))},r([c(cc.Sprite)],e.prototype,"tumbler",void 0),r([c(cc.Sprite)],e.prototype,"coffee",void 0),r([c(cc.Material)],e.prototype,"coffeeMaterial",void 0),r([a],e)}(cc.Component);n.default=u,cc._RF.pop()},{}],CommonUtils:[function(t,e,n){"use strict";cc._RF.push(e,"9814d/85SFDfo1f4MmYfH4s","CommonUtils"),Object.defineProperty(n,"__esModule",{value:!0}),n.CommonUtils=void 0;var o=t("../../UIFrame/CocosHelper"),i=t("./MatchUtils"),r={nextInt:function(t,e){return Math.floor(Math.random()*(e-t))+t},next01:function(){return Math.random()}},s=function(){function t(){}return t.isArray=function(t){return"function"==typeof Array.isArray?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t)},t.foramtDate=function(t,e){var n={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),"S+":t.getMilliseconds()};for(var o in/(y+)/i.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+o+")").test(e)&&(e=e.replace(RegExp.$1,("00"+n[o]).substr((""+n[o]).length)));return e},t.getElemClamped=function(t,e){return t[Math.max(0,Math.min(t.length-1,e))]},t.randomIntClosedRange=function(t,e){return Math.floor(Math.random()*(e-t+.9999)+t)},t.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(e[n]==t)return n;return-1},t.indexOfArr=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var o=e.length,i=!1,r=0;r<=t.length-o;r+=o){i=!0;for(var s=0;s<o;s++)if(t[r+s]!==e[s]){i=!1;break}if(i)return r}return-1},t.floatEqual=function(t,e,n){return void 0===n&&(n=1e-6),Math.abs(t-e)<n},t.formatTimeInterval=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=!1),e=n||e;var o="",i=Math.floor(t/3600);t%=3600;var r=Math.floor(t/60);return(n||i>0)&&(i<10&&(o+="0"),o+=i+":"),(e||r>0||i>0)&&(r<10&&(o+="0"),o+=r+":"),(t=Math.floor(t%60))<10&&(o+="0"),o+t},t.alignNumber=function(t,e){return t-Math.floor(t/e)*e},t.formatNumber=function(t){var e=""+Math.floor(t),n="",o=0;if(-1==e.indexOf(".")){for(var i=e.length-1;i>=0;i--)n=o%3==0&&0!=o?e.charAt(i)+","+n:e.charAt(i)+n,o++;return n}for(i=e.indexOf(".")-1;i>=0;i--)n=o%3==0&&0!=o?e.charAt(i)+","+n:e.charAt(i)+n,o++;return n+(e+"00").substr((e+"00").indexOf("."),3)},t.updateLabelSize=function(t){t._updateRenderData(!0)},t.lerp=function(t,e,n){return t+(e-t)*n},t.shuffle=function(t,e,n,o){void 0===e&&(e=r),void 0===n&&(n=0),void 0===o&&(o=-1),e=e||r,o<0&&(o=t.length-n);for(var i=0;i<o;i++){var s=e.nextInt(n,n+o-i),a=t[s];t[s]=t[o-i-1+n],t[o-i-1+n]=a}},t.setItemSpriteFrame=function(t,e,n){void 0===n&&(n=null),t.spriteFrameName=e,o.default.loadResSync(e,cc.SpriteFrame).then(function(o){t.isValid&&t.spriteFrameName==e&&(t.spriteFrame=o,n&&n(t))})},t.addSimpleClick=function(t,e){var n=t,o=null;n.on(cc.Node.EventType.TOUCH_START,function(t){o=t.getLocation()},this),n.on(cc.Node.EventType.TOUCH_END,function(t){o&&o.subSelf(t.getLocation()).mag()<3&&e()},this)},t.isGoodNumber=function(t){return"number"==typeof t&&!Number.isNaN(t)},t.getVisibleRect=function(){var t=cc.view.getViewportRect();return cc.rect(t.origin.x/-cc.view.getScaleX(),t.origin.y/-cc.view.getScaleY(),(t.size.width+2*t.origin.x)/cc.view.getScaleX(),(t.size.height+2*t.origin.y)/cc.view.getScaleY())},t.httpGet=function(t,e){var n=cc.loader.getXMLHttpRequest();n.onreadystatechange=function(){if(4===n.readyState&&200==n.status){var t=n.responseText,o=JSON.parse(t);e(o)}else 4===n.readyState&&401==n.status&&e({ret:1})},n.withCredentials=!0,n.open("GET",t,!0),n.withCredentials=!1,n.setRequestHeader("Access-Control-Allow-Origin","*"),n.setRequestHeader("Access-Control-Allow-Methods","GET, POST"),n.setRequestHeader("Access-Control-Allow-Headers","x-requested-with,content-type,authorization"),n.setRequestHeader("Content-Type","application/json"),n.timeout=8e3,n.send()},t.randomGaussian=function(t,e,n){void 0===n&&(n=r);var o=(n=n||r).next01(),i=n.next01();return Math.sqrt(-2*Math.log(o))*Math.cos(2*Math.PI*i)*e+t},t.deepCopy=function(t,e){for(var n in e)this._deepCopyFields(t,e,n)},t.constructObjectMap=function(t){var e=new Map;for(var n in t){var o=t[n];"object"==typeof o?e.set(n,this.constructObjectMap(o)):e.set(n,o)}return e},t._deepCopyFields=function(t,e,n){var o=e[n];if("number"==typeof o||"string"==typeof o)t[n]=o;else if(this.isArray[o])for(var i=t[n]=[],r=0;r<o.length;r++)this._deepCopyFields(i,o,r);else if(null==o)t[n]=null;else if("object"==typeof o){var s=new o.constructor;for(var a in e)this._deepCopyFields(s,o,a)}},t.formatNumberToEng=function(e){if(e<1&&e>0)return"1";e=Math.floor(e);var n=Math.floor(t.getExponent(e));if(n<13){if(n<4)return e+"";var o=Math.floor(n/t.constNum),i=n%t.constNum;return String(e/Math.pow(10,o*t.constNum)).substr(0,t.constNum+i)+t.getUnit(n)}return(e/Math.pow(10,n)).toFixed(3)+"e"+n},t.getExponent=function(t){for(var e=0;t>=10;)e++,t/=10;return e},t.getUnit=function(e){var n=Math.floor(e/t.constNum);return e<13?t.unitArr[n]:"e"+(n=Math.floor(e/t.constNum))*t.constNum},t.formatEngNumber=function(t,e){var n,o;return void 0===e&&(e=2),(t=t)>=1e6?(o=t/1e6,n=(.001*Math.floor(o/.001)).toFixed(e),this.formatEndingZero(n)+"M"):t>=1e3?(o=t/1e3,n=(.001*Math.floor(o/.001)).toFixed(e),this.formatEndingZero(n)+"K"):t+""},t.formatEndingZero=function(t){if(-1!=t.indexOf(".")){if(this.endWith(t,"00"))return t.substring(0,t.length-3);if(this.endWith(t,"0"))return t.substring(0,t.length-1)}return t},t.endWith=function(t,e){return e==t.substring(t.length-e.length)},t.makeMaxWidthLabel=function(t,e){var n={};return n.__proto__=t,Object.defineProperty(n,"string",{configurable:!0,enumerable:!0,get:function(){return t.string},set:function(n){t.overflow=cc.Label.Overflow.NONE,t.string=n,t._updateRenderData(!0),t.node.width>e&&(t.overflow=cc.Label.Overflow.RESIZE_HEIGHT,t.node.setContentSize(e,1),t.string=n)}}),n},t.climeUserName=function(t,e){void 0===e&&(e=14);for(var n=t.length;this.strlen(t)>e;)t=t.substring(0,t.length-1);return t.length!=n&&(t+="..."),t},t.strlen=function(t){for(var e=0,n=0;n<t.length;n++){var o=t.charCodeAt(n);o>=1&&o<=126||65376<=o&&o<=65439?e++:e+=2}return e},t.shuffleArr=function(t){for(var e,n,o,i=t.length,r=0;r<i;r++){n=i-r-1,void 0,o=t[e=Math.floor(Math.random()*(i-r))],t[e]=t[n],t[n]=o}return t},t.binarySearch=function(t,e,n){void 0===n&&(n=!1);for(var o=0,i=t.length-1;i-o>1;){var r=Math.floor((o+i)/2);if(e<t[r])i=r;else{if(!(e>t[r]))return r;o=r}}return n?o==t.length-1?t.length:i:0==i?-1:o},t.isInTriangle=function(t,e,n,o){var i=n.sub(e),r=o.sub(e),s=o.sub(n),a=t.sub(e),c=t.sub(n);return i.cross(r)>=0^i.cross(a)<0&&i.cross(r)>=0^r.cross(a)>=0&&s.cross(i)>0^s.cross(c)>=0},t.isInPolygon=function(t,e){var n,o,i,r,s=0,a=e.length;for(i=e[0],n=1;n<=a;n++)r=e[n%a],t.x>Math.min(i.x,r.x)&&t.x<=Math.max(i.x,r.x)&&t.y<=Math.max(i.y,r.y)&&i.x!=r.x&&(o=(t.x-i.x)*(r.y-i.y)/(r.x-i.x)+i.y,(i.y==r.y||t.y<=o)&&s++),i=r;return 0!=(1&s)},t.splitePolygon=function(t){if(t.length<=3)return[0,1,2];for(var e={},n=0;n<t.length;n++){var o=t[n];e[o.x+"-"+o.y]=n}var i=function(t){return e[t.x+"-"+t.y]};t=t.concat([]);for(var r=[],s=0;t.length>3;){var a=t[s%t.length],c=t[(s+1)%t.length],u=t[(s+2)%t.length],l=(s+1)%t.length,h=c.sub(a),p=u.sub(c);if(h.cross(p)<0)s=(s+1)%t.length;else{for(var d=!1,f=0,_=t;f<_.length;f++)if((o=_[f])!=a&&o!=c&&o!=u&&this.isInTriangle(o,a,c,u)){d=!0;break}d?s=(s+1)%t.length:(r.push(i(a),i(c),i(u)),t.splice(l,1))}}for(var y=0,v=t;y<v.length;y++)o=v[y],r.push(i(o));return r},t.computeUv=function(t,e,n){for(var o=[],r=0,s=t;r<s.length;r++){var a=s[r],c=i.MathUtils.clamp(0,1,(a.x+e/2)/e),u=i.MathUtils.clamp(0,1,1-(a.y+n/2)/n);o.push(cc.v2(c,u))}return o},t.tweenFloat=function(t,e,n,o,i,r){void 0===r&&(r=!0);var s={_value:t};Object.defineProperty(s,"value",{get:function(){return s._value},set:function(t){s._value=t,o&&o(s._value)}});var a=cc.tween(s).to(n,{value:e}).call(i);return r&&a.start(),a},t.tweenVec2=function(t,e,n,o,i,r){void 0===r&&(r=!0);var s={_value:t};Object.defineProperty(s,"value",{get:function(){return s._value},set:function(t){s._value=t,o&&o(s._value)}});var a=cc.tween(s).to(n,{value:e}).call(i);return r&&a.start(),a},t.unitArr=["","K","M","B"],t.constNum=3,t}();n.CommonUtils=s,cc._RF.pop()},{"../../UIFrame/CocosHelper":"CocosHelper","./MatchUtils":"MatchUtils"}],ConfigMgr:[function(t,e,n){"use strict";cc._RF.push(e,"99faeZt2e5AobpvQuyUBgaI","ConfigMgr");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function s(t){try{c(o.next(t))}catch(e){r(e)}}function a(t){try{c(o.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}c((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(t){return function(e){return c([t,e])}}function c(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,o=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(a){r=[6,a],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.loadConfigs=function(){return r(this,void 0,void 0,function(){return s(this,function(){return[2]})})},e.prototype.onConfigChange=function(){this.game.playerMgr.onConfigChange()},e}(t("./BaseMgr").BaseMgr);n.default=a,cc._RF.pop()},{"./BaseMgr":"BaseMgr"}],DebugWindowUtils:[function(t,e,n){"use strict";cc._RF.push(e,"84e75b8tBhNjY7KyBAgOsH/","DebugWindowUtils"),this&&this.__spreadArrays,Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){}return t.getModuleName=function(t){return"string"!=typeof t?t:t.split("/").pop().split(".")[0]},t.init=function(){var t="undefined"!=typeof __modular?__modular:{};if(t&&t.modules){var e=t.modules,n={};for(var o in e){var i=e[o],r=i.file,s=i.module?i.module.exports:{},a=this.getModuleName(r);for(var c in s)"__esModule"!==c&&("default"===c?(s[c]=u(a,s[c],a),s[a]||(s[a]=s[c])):s[c]=u(c,s[c],a));window[a+"_mod"]=s}for(var o in n)window[o]||(window[o]=n[o])}function u(t,e,o){var i=t;if(e&&e.name&&(i=e.name),n[t])return u(t+o,e,o);var r=e;return n[i]=r,r}},t}();n.default=o,cc._RF.pop()},{}],DrawBorad:[function(t,e,n){"use strict";cc._RF.push(e,"5d19bkVv4BM774fPMww+bzv","DrawBorad");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var s=t("../Utils/DrawingBoard"),a=cc._decorator,c=a.ccclass,u=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ndBroad=null,e._drawingBroad=null,e._texture=new cc.Texture2D,e._sprite=null,e.broadYMax=-1,e.broadXMin=-1,e._touching=!1,e}return i(e,t),e.prototype.onLoad=function(){this.ndBroad||(this.ndBroad=this.node),this._sprite=this.ndBroad.getComponent(cc.Sprite),this._sprite||this.ndBroad.addComponent(cc.Sprite),this._drawingBroad=new s.default(this.ndBroad.width,this.ndBroad.height),this._drawingBroad.setColor(0,0,0,255),this._drawingBroad.setLineWidth(5),this._touching=!1;var t=this.ndBroad.convertToWorldSpaceAR(cc.v2(0,0));this.broadYMax=t.y+this.ndBroad.height/2,this.broadXMin=t.x-this.ndBroad.width/2,this.ndBroad.on(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.ndBroad.on(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this),this.ndBroad.on(cc.Node.EventType.TOUCH_CANCEL,this.touchCancel,this),this.ndBroad.on(cc.Node.EventType.TOUCH_END,this.touchEnd,this)},e.prototype.start=function(){},e.prototype.setData=function(t){this._drawingBroad.setData(t),this.updateTexture(this._drawingBroad.getData(),this.ndBroad.width,this.ndBroad.height)},e.prototype.touchStart=function(t){if(!this._touching){this._touching=!0;var e=t.getLocation();this._drawingBroad.moveTo(e.x-this.broadXMin,this.getRealY(e.y))}},e.prototype.touchMove=function(t){if(this._touching){var e=t.getLocation();this._drawingBroad.lineTo(e.x-this.broadXMin,this.getRealY(e.y)),this.updateTexture(this._drawingBroad.getData(),this.ndBroad.width,this.ndBroad.height)}},e.prototype.touchCancel=function(){this._touching=!1},e.prototype.touchEnd=function(){this._touching=!1},e.prototype.onDestroy=function(){this.ndBroad.off(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.ndBroad.off(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this),this.ndBroad.off(cc.Node.EventType.TOUCH_CANCEL,this.touchCancel,this),this.ndBroad.off(cc.Node.EventType.TOUCH_END,this.touchEnd,this)},e.prototype.setColor=function(t,e,n,o){this._drawingBroad.setColor(t,e,n,o)},e.prototype.setLineWidth=function(t){this._drawingBroad.setLineWidth(t)},e.prototype.setPen=function(){this.setColor(0,0,0,255),this.setLineWidth(5)},e.prototype.setReaser=function(){this.setColor(0,0,0,0),this.setLineWidth(20)},e.prototype.getTexture=function(){return this._texture},e.prototype.updateTexture=function(t,e,n){this._texture.initWithData(t,cc.Texture2D.PixelFormat.RGBA8888,e,n),this._sprite.spriteFrame.setTexture(this._texture),this._sprite.markForRender(!0)},e.prototype.getRealY=function(t){return this._sprite.spriteFrame._flipY?this.broadYMax-(cc.visibleRect.height-t):this.broadYMax-t},r([u(cc.Node)],e.prototype,"ndBroad",void 0),r([c],e)}(cc.Component);n.default=l,cc._RF.pop()},{"../Utils/DrawingBoard":"DrawingBoard"}],DrawingBoard:[function(t,e,n){"use strict";cc._RF.push(e,"54b2dNYr/FCsJ51TWLTWJoT","DrawingBoard"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(t,e,n){this.init(t,e,n)}return Object.defineProperty(t.prototype,"width",{get:function(){return this._witdh},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),t.prototype.init=function(t,e,n){this.tempColor=this.tempR=this.tempG=this.tempB=this.tempA=0,this.curColor=0,this._witdh=Math.round(t),this._height=Math.round(e),this.initPointColor(),this.initPixelColor(),this.initLineData(),n&&this.setData(n)},t.prototype.initPointColor=function(){this.pointColor||(this.pointColor=[]);for(var t=0;t<this.width;++t){this.pointColor[t]||(this.pointColor[t]=[]);for(var e=0;e<this.height;++e)this.pointColor[t][e]=0}this.colorCount={},this.colorCount[0]=this.width*this.height},t.prototype.initPixelColor=function(){this.buffer=new ArrayBuffer(this.width*this.height*4),this.pixelColor=new Uint8Array(this.buffer),this.pixelColor.fill(0)},t.prototype.reset=function(){this.resetPointColor(),this.resetPixelColor()},t.prototype.resetPointColor=function(){for(var t=this.width-1;t>=0;--t)for(var e=this.height-1;e>=0;--e)this.pointColor[t][e]=0;for(var n in this.colorCount)this.colorCount[n]=0},t.prototype.resetPixelColor=function(){this.pixelColor.fill(0)},t.prototype.setData=function(t){var e=new Uint8Array(t);e.length!=this.width*this.height*4&&(console.warn("\u753b\u677f\u8bbe\u7f6e\u6570\u636e\u5931\u8d25\uff0c\u6570\u636e\u957f\u5ea6\u4e0e\u753b\u677f\u5927\u5c0f\u4e0d\u4e00\u81f4\u3002"),e=e.subarray(0,this.width*this.height*4)),this.setPixelColorByRGBA(e),this.setPointColorByRGBA(e)},t.prototype.setPixelColorByRGBA=function(t){this.pixelColor.set(t)},t.prototype.setPointColorByRGBA=function(t){this.colorCount={};for(var e=0;e<this.height;++e)for(var n=e*this.width*4,o=0;o<this.width;++o){var i=this.convertToNumber(t[n++],t[n++],t[n++],t[n++]);this.pointColor[o][e]=i,this.colorCount[i]?this.colorCount[i]+=1:this.colorCount[i]=1}},t.prototype.copyData=function(t){void 0===t&&(t=[]);for(var e=0,n=this.pixelColor.length;e<n;++e)t[e]=this.pixelColor[e];return t},t.prototype.getData=function(){return this.pixelColor},t.prototype.getBuffer=function(){return this.buffer},t.prototype.getColorCount=function(t,e,n,o){void 0===o&&(o=255);var i=this.convertToNumber(t,e,n,o);return this.colorCount[i]},t.prototype.setColor=function(t,e,n,o){void 0===o&&(o=255),this.curColor=this.convertToNumber(t,e,n,o),this.colorCount[this.curColor]||(this.colorCount[this.curColor]=0),this.tempColor=this.curColor,this.tempR=t,this.tempG=e,this.tempB=n,this.tempA=o},t.prototype.clear=function(){this.reset()},t.prototype.initLineData=function(){this.previousLineEndPos=new i,this.previousLineEndPosT=new i,this.previousLineEndPosB=new i,this.previousLineCircleEnd=!0,this.previousLineWidth=1},t.prototype.moveTo=function(t,e){t=Math.round(t),e=Math.round(e),this.previousLineEndPos.set(t,e),this.previousLineEndPosT.set(t,e),this.previousLineEndPosB.set(t,e)},t.prototype.setLineWidth=function(t){this.previousLineWidth=t},t.prototype.setLineCircleEnd=function(t){this.previousLineCircleEnd=t},t.prototype.line=function(t,e,n,o){if(t=Math.round(t),n=Math.round(n),e=Math.round(e),o=Math.round(o),t!=n||e!=o){var r=this.previousLineWidth,s=this.previousLineCircleEnd;this.previousLineEndPos.set(n,o);var a=0,c=0,u=1;if(t==n)a=Math.round(.5*r);else if(e==o)c=Math.round(.5*r);else{var l=(o-e)/(n-t);c=.5*r/(u=Math.sqrt(l*l+1)),a=Math.round(c*l),c=Math.round(c)}this.previousLineEndPosT.set(n-a,o+c),this.previousLineEndPosB.set(n+a,o-c);var h=new i(t,e),p=new i(n,o);t>n&&(h.x=n,h.y=o,p.x=t,p.y=e),this._drawLine(h,p,r,a,c,u),s&&(this._drawCircle(t,e,.5*r),this._drawCircle(n,o,.5*r))}},t.prototype.lineTo=function(t,e){if(t=Math.round(t),e=Math.round(e),this.previousLineEndPos.x!=t||this.previousLineEndPos.y!=e){var n=this.previousLineWidth,o=this.previousLineCircleEnd,r=this.previousLineEndPos.x,s=this.previousLineEndPos.y,a=t,c=e;r>a&&(r=a,s=c,a=this.previousLineEndPos.x,c=this.previousLineEndPos.y);var u=0,l=0,h=1;if(r==a)u=Math.round(.5*n);else if(s==c)l=Math.round(.5*n);else{var p=(c-s)/(a-r);l=.5*n/(h=Math.sqrt(p*p+1)),u=Math.round(l*p),l=Math.round(l)}if(o)this._drawCircle(r,s,.5*n),this._drawCircle(a,c,.5*n);else if(this.previousLineEndPos.x!=this.previousLineEndPosT.x||this.previousLineEndPos.y!=this.previousLineEndPosT.y){var d=new i(this.previousLineEndPos.x-u,this.previousLineEndPos.y+l),f=new i(this.previousLineEndPos.x+u,this.previousLineEndPos.y-l);this._drawTriangle([d,f,this.previousLineEndPosT]),this._drawTriangle([d,f,this.previousLineEndPosB])}this._drawLine(new i(r,s),new i(a,c),n,u,l,h),this.previousLineEndPos.set(t,e),this.previousLineEndPosT.set(t-u,e+l),this.previousLineEndPosB.set(t+u,e-l)}},t.prototype._drawLine=function(t,e,n,o,r,s){if(t.y==e.y){var a=t.x<e.x?t.x:e.x;this._drawRect(new i(a,Math.round(t.y-.5*n)),Math.abs(t.x-e.x),n)}else if(t.x==e.x){var c=t.y<e.y?t.y:e.y;this._drawRect(new i(Math.round(t.x-.5*n),c),n,Math.abs(t.y-e.y))}else{var u=(t.x-e.x)/(t.y-e.y),l=new i(t.x-o,t.y+r),h=new i(t.x+o,t.y-r),p=new i(e.x-o,e.y+r),d=new i(e.x+o,e.y-r),f=new i,_=new i,y=Math.round(n*s);e.y>t.y?h.x<p.x?(f.x=h.x,f.y=h.y+y,_.x=p.x,_.y=p.y-y,this._drawVerticalTriangle(f,h,l),this._drawParallelogram(h,_,y),this._drawVerticalTriangle(p,_,d)):(f.x=h.x,f.y=Math.round(p.y-(f.x-p.x)*u),_.x=p.x,_.y=Math.round(h.y+(h.x-_.x)*u),this._drawVerticalTriangle(p,_,l),this._drawParallelogram(_,h,p.y-_.y),this._drawVerticalTriangle(f,h,d)):l.x<d.x?(f.x=l.x,f.y=l.y-y,_.x=d.x,_.y=d.y+y,this._drawVerticalTriangle(l,f,h),this._drawParallelogram(f,d,y),this._drawVerticalTriangle(_,d,p)):(f.x=l.x,f.y=Math.round(d.y-(f.x-d.x)*u),_.x=d.x,_.y=Math.round(l.y+(l.x-_.x)*u),this._drawVerticalTriangle(_,d,h),this._drawParallelogram(d,f,l.y-f.y),this._drawVerticalTriangle(l,f,p))}},t.prototype.rect=function(t,e,n,o){this._drawRect(new i(t,e),n,o)},t.prototype._drawRect=function(t,e,n){for(var o=this.clampX(t.x),i=this.clampX(t.x+e),r=this.clampY(t.y),s=this.clampY(t.y+n),a=r;a<=s;++a)this._drawRowPixel(o,i,a)},t.prototype._drawParallelogram=function(t,e,n){if(t.x!=e.x)for(var o=(e.y-t.y)/(e.x-t.x),i=this._minX(t.x),r=this._maxX(e.x),s=i;s<=r;++s){var a=t.y+Math.round((s-t.x)*o),c=a+n;a=this._minY(a),c=this._maxY(c),this._drawColPixel(a,c,s)}},t.prototype.triangle=function(t,e,n,o,r,s){var a=[];a.push(new i(t,e)),a.push(new i(n,o)),a.push(new i(r,s)),this._drawTriangle(a)},t.prototype._drawTriangle=function(t){t.sort(function(t,e){return t.x-e.x});var e=t[0],n=t[1],o=t[2];if(e.x==n.x){if(e.x==o.x)return;return e.y<n.y&&(e=t[1],n=t[0]),void this._drawVerticalTriangle(e,n,o)}var r=(o.y-e.y)/(o.x-e.x),s=new i(n.x,Math.round(e.y+(n.x-e.x)*r));s.y!=n.y&&(s.y<n.y?(this._drawVerticalTriangle(n,s,e),this._drawVerticalTriangle(n,s,o)):(this._drawVerticalTriangle(s,n,e),this._drawVerticalTriangle(s,n,o)))},t.prototype._drawVerticalTriangle=function(t,e,n){if(n.x!=t.x){var o=(n.y-t.y)/(n.x-t.x),i=(n.y-e.y)/(n.x-e.x),r=n.x,s=t.x;r<s&&(r=t.x,s=n.x),s=this._minX(s),r=this._maxX(r);for(var a=s;a<=r;++a){var c=this.clampY(Math.round(t.y+(a-t.x)*o)),u=this.clampY(Math.round(e.y+(a-e.x)*i));this._drawColPixel(u,c,a)}}},t.prototype.circle=function(t,e,n){t=Math.round(t),e=Math.round(e),this._drawCircle(t,e,n)},t.prototype._drawCircle=function(t,e,n){if(0!=(n=Math.round(n)))for(var o=n*n,i=this.clampY(e-n),r=this.clampY(e+n),s=i;s<=r;++s){var a=s-e;a=Math.round(Math.sqrt(o-a*a));var c=this.clampX(t-a),u=this.clampX(t+a);this._drawRowPixel(c,u,s)}},t.prototype._minX=function(t){return t>=0?t:0},t.prototype._maxX=function(t){return t<this.width?t:this.width-1},t.prototype._minY=function(t){return t>=0?t:0},t.prototype._maxY=function(t){return t<this.height?t:this.height-1},t.prototype.clampX=function(t){return t<0?0:t>=this.width?this.width-1:t},t.prototype.clampY=function(t){return t<0?0:t>=this.height?this.height-1:t},t.prototype._drawPixel=function(t,e){if(this.pointColor[t][e]!=this.tempColor){var n=4*(e*this.width+t);this.pixelColor[n]=this.tempR,this.pixelColor[n+1]=this.tempG,this.pixelColor[n+2]=this.tempB,this.pixelColor[n+3]=this.tempA;var o=this.pointColor[t][e];this.colorCount[o]--,this.colorCount[this.tempColor]++,this.pointColor[t][e]=this.tempColor}},t.prototype._drawRowPixel=function(t,e,n){for(var o=4*(n*this.width+t),i=t;i<=e;++i){if(this.pointColor[i][n]!=this.tempColor){this.pixelColor[o]=this.tempR,this.pixelColor[o+1]=this.tempG,this.pixelColor[o+2]=this.tempB,this.pixelColor[o+3]=this.tempA;var r=this.pointColor[i][n];this.colorCount[r]--,this.colorCount[this.tempColor]++,this.pointColor[i][n]=this.tempColor}o+=4}},t.prototype._drawColPixel=function(t,e,n){for(var o=4*(t*this.width+n),i=t;i<=e;++i){if(this.pointColor[n][i]!=this.tempColor){this.pixelColor[o]=this.tempR,this.pixelColor[o+1]=this.tempG,this.pixelColor[o+2]=this.tempB,this.pixelColor[o+3]=this.tempA;var r=this.pointColor[n][i];this.colorCount[r]--,this.colorCount[this.tempColor]++,this.pointColor[n][i]=this.tempColor}o+=4*this.width}},t.prototype.convertToNumber=function(t,e,n,o){return void 0===o&&(o=255),(254&t)<<23|e<<16|n<<8|o},t.prototype.convertToRGBA=function(t){return{r:(4009754624&t)>>23,g:(16711680&t)>>16,b:(65280&t)>>8,a:255&t}},t}();n.default=o;var i=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return t.prototype.set=function(t,e){"number"==typeof t?(this.x=t,this.y=e):(this.x=t.x,this.y=t.y)},t}();cc._RF.pop()},{}],Dungeon:[function(t,e,n){"use strict";cc._RF.push(e,"363928pIAdEs76ndgV1E6km","Dungeon"),Object.defineProperty(n,"__esModule",{value:!0}),n.Dungeon=n.GridType=void 0;var o,i,r=t("./MatchUtils");(function(t){t[t.None=0]="None",t[t.Floor=1]="Floor",t[t.Wall=2]="Wall",t[t.OpenDoor=3]="OpenDoor",t[t.CloseDoor=4]="CloseDoor"})(o=n.GridType||(n.GridType={})),function(t){t[t.None=0]="None",t[t.Left=1]="Left",t[t.Right=2]="Right",t[t.Up=3]="Up",t[t.Down=4]="Down",t[t.All=5]="All"}(i||(i={}));var s=[i.Left,i.Right,i.Up,i.Down],a=function(){function t(t,e){this.numRoomTries=50,this.extraConnectorChance=20,this.roomExtraSize=0,this.windingPercent=50,this.width=51,this.height=51,this.rooms=[],this.map=[],this.regions=[],this.currentRegion=0,this.width=t,this.height=e;for(var n=0;n<t*e;n++)this.map[n]=o.None,this.regions[n]=0}return t.prototype.generate=function(){return this.initMap(),this.addRooms(),this.fillMaze(),this.connectRegions(),this.removeDeadEnds(),this.map},t.prototype.initMap=function(){for(var t=0;t<this.width*this.height;t++)this.map[t]=o.Wall,this.regions[t]=0},t.prototype.addRooms=function(){for(var t=0;t<this.numRoomTries;t++){var e=2*r.MathUtils.limitInteger(1,3+this.roomExtraSize)+1,n=2*r.MathUtils.limitInteger(0,1+Math.floor(e/2)),o=e,i=e;0===r.MathUtils.limitInteger(0,1)?o+=n:i+=n;for(var s=2*r.MathUtils.limitInteger(0,Math.floor((this.width-o)/2))+1,a=2*r.MathUtils.limitInteger(0,Math.floor((this.height-i)/2))+1,c=new cc.Rect(s,a,o,i),u=!1,l=0,h=this.rooms;l<h.length;l++){var p=h[l];if(c.intersects(p)){u=!0;break}}u||(this.currentRegion++,this._initRoomGrid(c),this.rooms.push(c))}},t.prototype._initRoomGrid=function(t){for(var e=cc.v2(0,0),n=t.x;n<t.width+t.x;n++)for(var i=t.y;i<t.height+t.y;i++)e.x=n,e.y=i,this.carveGrid(e,o.Floor)},t.prototype.fillMaze=function(){for(var t=1;t<this.height;t+=2)for(var e=1;e<this.width;e+=2){var n=cc.v2(e,t);this.getGridType(n)===o.Wall&&this._growMaze(n)}},t.prototype._growMaze=function(t){var e=[],n=i.None;for(this.currentRegion++,this.carveGrid(t,o.Floor),e.push(t);null!==e&&0!==e.length;){for(var a=e[e.length-1],c=[],u=0,l=s;u<l.length;u++){var h=l[u];this.canCarve(a,h)&&c.push(h)}if(c.length<=0)e.pop(),n=i.None;else{var p=i.None;p=-1!==c.indexOf(n)&&r.MathUtils.limitInteger(0,100)>this.windingPercent?n:r.MathUtils.randomArray(c),this.carveGrid(a.add(this.getDirGridOffset(p)),o.Floor),this.carveGrid(a.add(this.getDirGridOffset(p).mul(2)),o.Floor),e.push(a.add(this.getDirGridOffset(p).mul(2))),n=p}}},t.prototype.connectRegions=function(){for(var t=this,e={},n=cc.v2(0,0),i=1;i<this.width-1;i++)for(var a=1;a<this.height-1;a++)if(n.x=i,n.y=a,this.getGridType(n)===o.Wall){for(var c=[],u=0,l=s;u<l.length;u++){var h=l[u],p=n.add(this.getDirGridOffset(h)),d=this.regions[p.y*this.width+p.x];0!==d&&-1==c.indexOf(d)&&c.push(d)}c.length<2||(e[a*this.width+i]=c)}for(var f=[],_=0,y=Object.keys(e);_<y.length;_++){var v=y[_];f.push(this.getGridByIdx(parseInt(v)))}var m={},g=new Set;for(i=0;i<=this.currentRegion;i++)m[i]=i,g.add(i);for(var b=0,w=function(){b++;var n=r.MathUtils.randomArray(f);T.addJunction(n);var o=e[n.y*T.width+n.x].map(function(t){return m[t]}),i=o[0];o.shift();for(var s=o,a=0;a<=T.currentRegion;a++)-1!==s.indexOf(m[a])&&(m[a]=i);for(var c=0,u=s;c<u.length;c++){var l=u[c];g.has(l)&&g.delete(l)}f.filter(function(o){return!t.isRemove(m,e,n,o)})},T=this;g.size>1&&b<50;)w()},t.prototype.addJunction=function(t){r.MathUtils.limitInteger(0,4)?this.setGridType(t,r.MathUtils.limitInteger(0,3)?o.OpenDoor:o.Floor):this.setGridType(t,o.CloseDoor)},t.prototype.isRemove=function(t,e,n,o){if(n.sub(o).len()<2)return!0;var i=e[o.y*this.width+o.x].map(function(e){return t[e]});return!(new Set(i).size>1)},t.prototype.removeDeadEnds=function(){for(var t=!1,e=cc.v2(0,0),n=0;!t&&n<500;){n++,t=!0;for(var i=1;i<this.width-1;i++)for(var r=1;r<this.height-1;r++)if(e.x=i,e.y=r,this.getGridType(e)!==o.Wall){for(var a=0,c=0,u=s;c<u.length;c++){var l=u[c],h=e.add(this.getDirGridOffset(l));this.map[h.y*this.width+h.x]!==o.Wall&&a++}1===a&&(t=!1,this.regions[r*this.height+i]=0,this.map[r*this.height+i]=o.Wall)}}},t.prototype.instanceMap=function(){},t.prototype.getGridByIdx=function(t){var e=Math.floor(t/this.width),n=t-e*this.width;return cc.v2(n,e)},t.prototype.carveGrid=function(t,e){this.checkGrid(t)&&(this.setGridType(t,e),this.regions[t.y*this.width+t.x]=this.currentRegion)},t.prototype.setGridType=function(t,e){this.map[t.y*this.width+t.x]=e},t.prototype.checkGrid=function(t){return!(t.x<=0||t.x>=this.width-1||t.y<=0||t.y>=this.height-1)||(console.log(" set grid type error: ",t),!1)},t.prototype.getGridType=function(t){return this.map[t.y*this.width+t.x]},t.prototype.canCarve=function(t,e){var n=this.getDirGridOffset(e),i=t.add(n.mul(3));return!(i.x<0||i.x>=this.width||i.y<0||i.y>=this.height)&&(i=t.add(n.mul(2)),this.getGridType(i)===o.Wall)},t.prototype.getDirGridOffset=function(t){var e=cc.v2(0,0);switch(t){case i.Left:e.x=-1;break;case i.Right:e.x=1;break;case i.Up:e.y=1;break;case i.Down:e.y=-1}return e},t}();n.Dungeon=a,cc._RF.pop()},{"./MatchUtils":"MatchUtils"}],EnumUtils:[function(t,e,n){"use strict";cc._RF.push(e,"c0967gbR3dMcbkSIeGpt59T","EnumUtils"),Object.defineProperty(n,"__esModule",{value:!0}),n.EnumUtils=void 0;var o=function(){function t(){}return t.getNamesAndValues=function(t){return this.getNames(t).map(function(e){return{name:e,value:t[e]}})},t.getNames=function(t){return this.getObjectValues(t).filter(function(t){return"string"==typeof t})},t.getValues=function(t){return this.getObjectValues(t).filter(function(t){return"number"==typeof t})},t.getObjectValues=function(t){return Object.keys(t).map(function(e){return t[e]})},t}();n.EnumUtils=o,cc._RF.pop()},{}],EventCenter:[function(t,e,n){"use strict";cc._RF.push(e,"5457exhkz1HWKJ6Z7OS0E1z","EventCenter");var o=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),i=0;for(e=0;e<n;e++)for(var r=arguments[e],s=0,a=r.length;s<a;s++,i++)o[i]=r[s];return o};Object.defineProperty(n,"__esModule",{value:!0}),n.EventCenter=n.EventInfo=void 0;var i=t("../Common/Utils/Pool"),r=function(){function t(){}return t.prototype.free=function(){this.callback=null,this.target=null,this.once=!1},t.prototype.init=function(t,e,n){this.callback=t,this.target=e,this.once=n},t}();n.EventInfo=r;var s=function(t,e,n){this.eventName=t,this.callback=e,this.targetId=n},a=1,c=function(){function t(){}return t.on=function(t,e,n,o){void 0===n&&(n=void 0),void 0===o&&(o=!1);var i=(n=n||this).uuid||n.id;void 0===i&&(n.uuid=i=""+a++),this.onById(t,i,n,e,o)},t.once=function(t,e,n){void 0===n&&(n=void 0),this.on(t,e,n,!0)},t.onById=function(t,e,n,o,i){var r=this._listeners[t];r||(r=this._listeners[t]={});var s=r[e];s||(s=r[e]=[]);var a=this._eventPool.alloc();a.init(o,n,i),s.push(a)},t.off=function(t,e,n){void 0===n&&(n=void 0);var o=(n=n||this).uuid||n.id;if(!o)return!1;this.offById(t,e,o)},t.targetOff=function(t){var e=(t=t||this).uuid||t.id;if(e)for(var n in this._listeners){var o=this._listeners[n];void 0!==o[e]&&delete o[e]}},t.offById=function(t,e,n){if(this._dispatching>0){var o=new s(t,e,n);this._removeCommands.push(o)}else this.doOff(t,e,n)},t.doOff=function(t,e,n){var o=this._listeners[t];if(o){var i=o[n];if(i){for(var r=i.length-1;r>=0;r--)i[r].callback===e&&i.splice(r,1);0===i.length&&(o[n]=null,delete o[n])}}},t.doRemoveCommands=function(){if(0===this._dispatching){for(var t=0,e=this._removeCommands;t<e.length;t++){var n=e[t];this.doOff(n.eventName,n.callback,n.targetId)}this._removeCommands.length=0}},t.emit=function(t){for(var e,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var r=this._listeners[t];if(!r)return!1;for(var a in this._dispatching++,r)for(var c=0,u=r[a];c<u.length;c++){var l=u[c];if((e=l.callback).call.apply(e,o([l.target],n)),l.once){var h=new s(t,l.callback,a);this._removeCommands.push(h)}}this._dispatching--,this.doRemoveCommands()},t._listeners=cc.js.createMap(),t._dispatching=0,t._removeCommands=[],t._eventPool=new i.Pool(function(){return new r},10),t}();n.EventCenter=c,cc._RF.pop()},{"../Common/Utils/Pool":"Pool"}],EventType:[function(t,e,n){"use strict";cc._RF.push(e,"3a2ce/BnWtAGous8Nu/ZYEZ","EventType"),Object.defineProperty(n,"__esModule",{value:!0}),n.EventType=void 0,function(t){t.GameShow="GameShow",t.GameHide="GameHide",t.WindowClosed="WindowClosed",t.FormClosed="FormClosed"}(n.EventType||(n.EventType={})),cc._RF.pop()},{}],FixedMgr:[function(t,e,n){"use strict";cc._RF.push(e,"727dau44q5IioBgMTJwEQJ0","FixedMgr");var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function s(t){try{c(o.next(t))}catch(e){r(e)}}function a(t){try{c(o.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}c((o=o.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,o,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(t){return function(e){return c([t,e])}}function c(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,o=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(a){r=[6,a],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./config/SysDefine"),s=t("./Struct"),a=t("./UIManager"),c=function(){function t(){}return t.prototype.open=function(t,e,n){return o(this,void 0,void 0,function(){return i(this,function(o){switch(o.label){case 0:return t=s.GetForm(t,r.FormType.Fixed),[4,a.default.getInstance().openForm(t,e,n)];case 1:return[2,o.sent()]}})})},t.prototype.close=function(t,e,n){return o(this,void 0,void 0,function(){return i(this,function(o){switch(o.label){case 0:return t=s.GetForm(t,r.FormType.Fixed),[4,a.default.getInstance().closeForm(t,e,n)];case 1:return[2,o.sent()]}})})},t}();n.default=new c,cc._RF.pop()},{"./Struct":"Struct","./UIManager":"UIManager","./config/SysDefine":"SysDefine"}],FormMgr:[function(t,e,n){"use strict";cc._RF.push(e,"9a773PrZ4hPdb2eNyT8WZyH","FormMgr");var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function s(t){try{c(o.next(t))}catch(e){r(e)}}function a(t){try{c(o.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}c((o=o.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,o,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(t){return function(e){return c([t,e])}}function c(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,o=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(a){r=[6,a],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./config/SysDefine"),s=t("./FixedMgr"),a=t("./SceneMgr"),c=t("./TipsMgr"),u=t("./ToastMgr"),l=t("./UIManager"),h=t("./WindowMgr"),p=function(){function t(){}return t.prototype.open=function(t,e,n){return o(this,void 0,void 0,function(){return i(this,function(o){switch(o.label){case 0:switch(t.type){case r.FormType.Screen:return[3,1];case r.FormType.Window:return[3,3];case r.FormType.Fixed:return[3,5];case r.FormType.Tips:return[3,7];case r.FormType.Toast:return[3,9]}return[3,11];case 1:return[4,a.default.open(t,e,n)];case 2:return[2,o.sent()];case 3:return[4,h.default.open(t,e,n)];case 4:return[2,o.sent()];case 5:return[4,s.default.open(t,e,n)];case 6:return[2,o.sent()];case 7:return[4,c.default.open(t,e,n)];case 8:return[2,o.sent()];case 9:return[4,u.default.open(t,e,n)];case 10:return[2,o.sent()];case 11:return cc.error("\u672a\u77e5\u7c7b\u578b\u7684\u7a97\u4f53: "+t.type),[2,null]}})})},t.prototype.close=function(t,e,n){return o(this,void 0,void 0,function(){return i(this,function(o){switch(o.label){case 0:switch(t.type){case r.FormType.Screen:return[3,1];case r.FormType.Window:return[3,3];case r.FormType.Fixed:return[3,5];case r.FormType.Tips:return[3,7];case r.FormType.Toast:return[3,9]}return[3,10];case 1:return[4,a.default.close(t,e,n)];case 2:return[2,o.sent()];case 3:return[4,h.default.close(t,e,n)];case 4:return[2,o.sent()];case 5:return[4,s.default.close(t,e,n)];case 6:return[2,o.sent()];case 7:return[4,c.default.close(t,e,n)];case 8:return[2,o.sent()];case 9:return cc.warn("UIToast \u76ee\u524d\u4e0d\u80fd\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\u5173\u95ed, \u8bf7\u4f7f\u7528 ToastMgr.close()"),[3,11];case 10:return cc.error("\u672a\u77e5\u7c7b\u578b\u7684\u7a97\u4f53: "+t.type),[2,!1];case 11:return[2]}})})},t.prototype.backScene=function(t,e){return o(this,void 0,void 0,function(){return i(this,function(){return[2,a.default.back(t,e)]})})},t.prototype.closeAllWindows=function(){return o(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,h.default.closeAll()];case 1:return t.sent(),[2]}})})},t.prototype.load=function(t){return o(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return[4,l.default.getInstance().loadUIForm(t.prefabUrl)];case 1:return e.sent(),[2]}})})},t}();n.default=new p,cc._RF.pop()},{"./FixedMgr":"FixedMgr","./SceneMgr":"SceneMgr","./TipsMgr":"TipsMgr","./ToastMgr":"ToastMgr","./UIManager":"UIManager","./WindowMgr":"WindowMgr","./config/SysDefine":"SysDefine"}],GPDrag:[function(t,e,n){"use strict";cc._RF.push(e,"5181dEjiW1Hyq4VdL35aHS4","GPDrag");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0}),n.GPDrag=n.EasingString=n.DragBackHomeType=n.FloatType=void 0;var s,a,c,u=t("./Components/GPWorkFlow"),l=cc._decorator,h=l.ccclass,p=l.property;(function(t){t[t.None=0]="None",t[t.MoveToTop=1]="MoveToTop",t[t.MoveToTopLayer=2]="MoveToTopLayer"})(s=n.FloatType||(n.FloatType={})),function(t){t[t.SetPosition=0]="SetPosition",t[t.Tween=1]="Tween"}(a=n.DragBackHomeType||(n.DragBackHomeType={})),function(t){t[t.linear=0]="linear",t[t.smooth=1]="smooth",t[t.fade=2]="fade",t[t.constant=3]="constant",t[t.quadIn=4]="quadIn",t[t.quadOut=5]="quadOut",t[t.quadInOut=6]="quadInOut",t[t.quadOutIn=7]="quadOutIn",t[t.cubicIn=8]="cubicIn",t[t.cubicOut=9]="cubicOut",t[t.cubicInOut=10]="cubicInOut",t[t.cubicOutIn=11]="cubicOutIn",t[t.quartIn=12]="quartIn",t[t.quartOut=13]="quartOut",t[t.quartInOut=14]="quartInOut",t[t.quartOutIn=15]="quartOutIn",t[t.quintIn=16]="quintIn",t[t.quintOut=17]="quintOut",t[t.quintInOut=18]="quintInOut",t[t.quintOutIn=19]="quintOutIn",t[t.sineIn=20]="sineIn",t[t.sineOut=21]="sineOut",t[t.sineInOut=22]="sineInOut",t[t.sineOutIn=23]="sineOutIn",t[t.expoIn=24]="expoIn",t[t.expoOut=25]="expoOut",t[t.expoInOut=26]="expoInOut",t[t.expoOutIn=27]="expoOutIn",t[t.circIn=28]="circIn",t[t.circOut=29]="circOut",t[t.circInOut=30]="circInOut",t[t.circOutIn=31]="circOutIn",t[t.elasticIn=32]="elasticIn",t[t.elasticOut=33]="elasticOut",t[t.elasticInOut=34]="elasticInOut",t[t.elasticOutIn=35]="elasticOutIn",t[t.backIn=36]="backIn",t[t.backOut=37]="backOut",t[t.backInOut=38]="backInOut",t[t.backOutIn=39]="backOutIn",t[t.bounceIn=40]="bounceIn",t[t.bounceOut=41]="bounceOut",t[t.bounceInOut=42]="bounceInOut",t[t.bounceOutIn=43]="bounceOutIn"}(c=n.EasingString||(n.EasingString={}));var d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.touchOffsetSensitive=!0,e.backHomeWhenFailed=!0,e.backHomeType=a.SetPosition,e.backTweenTime=1,e.backTweenEasing=c.linear,e.floatType=s.None,e.backToOriZ=!0,e.dragStartPos=new cc.Vec2(0,0),e.dragOffset=new cc.Vec2(0,0),e.succeedCheck=null,e.succeedCallback=null,e.backHomeWorkFlow=new u.GPWorkFlow,e}return i(e,t),e.prototype.start=function(){var t=this;this.node.on(cc.Node.EventType.TOUCH_START,this.OnDragStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.OnDragMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.OnDragEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.OnDragEnd,this);var e=new u.GPWorkFlowNode;this.backHomeWorkFlow.headNode=e;var n=this;e.OnStart=function(e){var o=new cc.Vec3(n.dragStartPos.x,n.dragStartPos.y,0);switch(t.backHomeType){case a.SetPosition:n.node.setPosition(o),e.done();break;case a.Tween:n.backTween&&n.backTween.stop();var i=c[n.backTweenEasing];n.backTween=cc.tween(n.node).to(n.backTweenTime,{position:o},{easing:i}).call(function(){e.done()}).start()}};var o=new u.GPWorkFlowNode;e.nextNode=o,o.OnStart=function(t){n.OnArrivedHome(),t.done()}},e.prototype.OnDragStart=function(t){console.log("drag start"),this.dragStartPos.set(cc.v2(this.node.position.x,this.node.position.y));var e=t.getLocation();switch(cc.Vec2.subtract(this.dragOffset,this.dragStartPos,e),this.floatType){case s.MoveToTop:this.zOrder=this.node.getSiblingIndex(),this.node.setSiblingIndex(1/0);break;case s.MoveToTopLayer:this.zOrder=this.node.getSiblingIndex(),this.srcParent=this.node.parent,this.node.parent=this.topLayerNode}},e.prototype.OnDragMove=function(t){var e=t.getLocation();this.touchOffsetSensitive?this.node.setPosition(new cc.Vec3(e.x+this.dragOffset.x,e.y+this.dragOffset.y,0)):this.node.setPosition(new cc.Vec3(e.x,0,e.y))},e.prototype.OnDragEnd=function(t){this.succeedCheck&&this.succeedCheck(t)?this.succeedCallback&&this.succeedCallback(t):this.backHomeWhenFailed&&this.backHomeWorkFlow.start()},e.prototype.OnArrivedHome=function(){if(this.backToOriZ)switch(this.floatType){case s.MoveToTop:this.node.setSiblingIndex(this.zOrder);break;case s.MoveToTopLayer:this.node.parent=this.srcParent,this.node.setSiblingIndex(this.zOrder)}},e.prototype.onDestroy=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.OnDragStart,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.OnDragMove,this),this.node.off(cc.Node.EventType.TOUCH_END,this.OnDragEnd,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.OnDragEnd,this)},e.prototype.update=function(t){this.backHomeWorkFlow.update(t)},r([p({tooltip:"\u89e6\u78b0\u70b9\u504f\u79fb\u91cf\u654f\u611f"})],e.prototype,"touchOffsetSensitive",void 0),r([p({tooltip:"\u5931\u8d25\u65f6\u56de\u5230\u8d77\u59cb\u4f4d\u7f6e"})],e.prototype,"backHomeWhenFailed",void 0),r([p({type:cc.Enum(a),tooltip:"\u56de\u5bb6\u7684\u65b9\u5f0f",visible:function(){return this.backHomeWhenFailed}})],e.prototype,"backHomeType",void 0),r([p({type:cc.Float,visible:function(){return this.backHomeWhenFailed&&this.backHomeType==a.Tween}})],e.prototype,"backTweenTime",void 0),r([p({type:cc.Enum(c),tooltip:"\u7f13\u52a8\u7c7b\u578b",visible:function(){return this.backHomeWhenFailed&&this.backHomeType==a.Tween}})],e.prototype,"backTweenEasing",void 0),r([p({type:cc.Enum(s),tooltip:"\u4e0a\u6d6e\u7c7b\u578b"})],e.prototype,"floatType",void 0),r([p({type:cc.Node,visible:function(){return this.floatType==s.MoveToTopLayer}})],e.prototype,"topLayerNode",void 0),r([p({tooltip:"\u677e\u5f00\u540e\u8fd4\u56de\u539f\u6765\u7684\u5c42\u7ea7",visible:function(){return this.floatType!=s.None}})],e.prototype,"backToOriZ",void 0),r([h("GPDrag")],e)}(cc.Component);n.GPDrag=d,cc._RF.pop()},{"./Components/GPWorkFlow":"GPWorkFlow"}],GPWorkFlow:[function(t,e,n){"use strict";cc._RF.push(e,"00ae3DUSlREBqJ4jLF4bVlj","GPWorkFlow"),Object.defineProperty(n,"__esModule",{value:!0}),n.GPWorkFlow=n.GPWorkFlowNode=void 0;var o=cc._decorator,i=(o.ccclass,o.property,function(){function t(){this.nextNodes=new Array,this._nextIdx=-1}return Object.defineProperty(t.prototype,"nextNode",{get:function(){return this.nextNodes.length>0?this.nextNodes[0]:null},set:function(t){0==this.nextNodes.length?this.nextNodes.push(t):this.nextNodes[0]=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextIdx",{get:function(){return this._nextIdx},enumerable:!1,configurable:!0}),t.prototype.done=function(t){void 0===t&&(t=0),this._nextIdx=t,this.OnEnd&&this.OnEnd(this)},t.prototype.isDone=function(){return this._nextIdx>=0},t.prototype.refresh=function(){this._nextIdx=-1;for(var t=0;t<this.nextNodes.length;t++)this.nextNodes[t].refresh()},t.prototype.start=function(){this.OnStart&&this.OnStart(this)},t.prototype.update=function(t){this.OnUpdate&&this.OnUpdate(this,t)},t.prototype.hasNext=function(){return this.nextNodes.length>0},t}());n.GPWorkFlowNode=i;var r=function(){function t(){}return t.prototype.start=function(){this.headNode&&this.headNode.refresh(),this.curNode=this.headNode,this.curNode.start()},t.prototype.update=function(t){null!=this.curNode&&(this.curNode.update(t),this.curNode.isDone()&&(this.curNode.hasNext()?(this.curNode=this.curNode.nextNodes[this.curNode.nextIdx],this.curNode.start()):this.curNode=null))},t.prototype.insertHeadNode=function(t){var e=this.headNode;this.headNode=t,t.nextNode=e},t}();n.GPWorkFlow=r,cc._RF.pop()},{}],GameConfig:[function(t,e,n){"use strict";cc._RF.push(e,"f46b13WB51JHaffBN5ie56i","GameConfig"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){}return Object.defineProperty(t,"debugUserId",{get:function(){return this._debugUserId},enumerable:!1,configurable:!0}),t.gameId="",t.version="0.0.1",t._debugUserId="",t}();n.default=o,cc._RF.pop()},{}],Game:[function(t,e,n){"use strict";cc._RF.push(e,"30ba5eNytVM3pckqs/AGbqm","Game");var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function s(t){try{c(o.next(t))}catch(e){r(e)}}function a(t){try{c(o.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}c((o=o.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,o,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(t){return function(e){return c([t,e])}}function c(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,o=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(a){r=[6,a],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.Game=void 0;var r=t("./Manager/ConfigMgr"),s=t("./Manager/PlayerMgr"),a=function(){function t(){this.inited=!1,this.configMgr=null,this.playerMgr=null}return t.prototype.init=function(){return o(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return this.configMgr=new r.default(this),this.playerMgr=new s.default(this),[4,this.configMgr.loadConfigs()];case 1:return t.sent(),this.inited=!0,[2]}})})},t.prototype.onGameShow=function(){},t.prototype.onGameHide=function(){},t.prototype.update=function(){this.inited},t}();n.Game=a;var c=new a;n.default=c,cc._RF.pop()},{"./Manager/ConfigMgr":"ConfigMgr","./Manager/PlayerMgr":"PlayerMgr"}],GlobalData:[function(t,e,n){"use strict";cc._RF.push(e,"ffa9djWp4hFqooiKPOq5qJN","GlobalData"),Object.defineProperty(n,"__esModule",{value:!0}),n.GlobalData=void 0;var o=function(){function t(){}return t.rawPath="img/raw/",t}();n.GlobalData=o,cc._RF.pop()},{}],GlobalHelper:[function(t,e,n){"use strict";cc._RF.push(e,"97861Bw45RARLIDvaYH8CIV","GlobalHelper"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){}return t.Register=function(e,n){t[e]=n},t.Get=function(e){return t._globalMap.hasOwnProperty(e)?t._globalMap[e]:void 0},t._globalMap={},t}();n.default=o,window.GlobalHelper=o,cc._RF.pop()},{}],GridScrollList:[function(t,e,n){"use strict";cc._RF.push(e,"1cacdUiKzNJIJRK/5ihZG1M","GridScrollList");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0}),n.GridScrollList=void 0;var s,a=t("../../Common/Components/ScrollViewHelper"),c=cc._decorator,u=c.ccclass,l=c.property;(function(t){t[t.LeftToRight=0]="LeftToRight",t[t.TopToBottom=1]="TopToBottom"})(s||(s={}));var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.allProxy=[],e.scrollHelper=null,e.rowDirection=s.LeftToRight,e.colSpace=10,e.rowSpace=10,e.colCount=3,e.margin=10,e}return i(e,t),e.prototype.doLayout=function(){this._layoutItems()},e.prototype._layoutItems=function(){this.scrollHelper.clearData();var t=this.allProxy,e=t.length?t[0].region.size:cc.size(0,0),n=this.colSpace,o=this.rowSpace,i=this.colCount,r=this.scrollHelper.scrollView.node.getContentSize();if(this.rowDirection==s.TopToBottom){var a=r.width;r.width=r.height,r.height=a,a=e.width,e.width=e.height,e.height=a}var c=this.margin,u=(r.width-(i*e.width+(i-1)*n))/2,l=u,h=-c+o+e.height,p=-o-e.height,d=n+e.width;this.rowDirection==s.TopToBottom&&(p=o+e.height,d=-n-e.width,h=c-p);for(var f=0;f<t.length;f++){l+=d,f%i==0&&(h+=p,l=u);var _=t[f];this.rowDirection==s.LeftToRight?_.region.origin=cc.v2(l,h-e.height):_.region.origin=cc.v2(h,l-e.height),this.scrollHelper.addData(_)}this.rowDirection==s.LeftToRight?this.scrollHelper.scrollView.content.setContentSize(r.width,-h+e.height+c):this.scrollHelper.scrollView.content.setContentSize(h+e.height+c,r.width)},r([l(a.ScrollViewHelper)],e.prototype,"scrollHelper",void 0),r([l({type:cc.Enum(s)})],e.prototype,"rowDirection",void 0),r([l()],e.prototype,"colSpace",void 0),r([l()],e.prototype,"rowSpace",void 0),r([l()],e.prototype,"colCount",void 0),r([l()],e.prototype,"margin",void 0),r([u],e)}(cc.Component);n.GridScrollList=h,cc._RF.pop()},{"../../Common/Components/ScrollViewHelper":"ScrollViewHelper"}],Joystick:[function(t,e,n){"use strict";cc._RF.push(e,"f4f39PJ1X1HeJ5ebUDPNPNG","Joystick");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0}),n.JoystickType=n.SpeedType=n.DirectionType=n.instance=void 0;var s,a,c,u=cc._decorator,l=u.ccclass,h=u.property;n.instance=new cc.EventTarget,function(t){t[t.FOUR=0]="FOUR",t[t.EIGHT=1]="EIGHT",t[t.ALL=2]="ALL"}(s=n.DirectionType||(n.DirectionType={})),function(t){t[t.STOP=0]="STOP",t[t.NORMAL=1]="NORMAL",t[t.FAST=2]="FAST"}(a=n.SpeedType||(n.SpeedType={})),function(t){t[t.FIXED=0]="FIXED",t[t.FOLLOW=1]="FOLLOW"}(c=n.JoystickType||(n.JoystickType={}));var p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dot=null,e.ring=null,e.joystickType=c.FIXED,e.directionType=s.ALL,e._stickPos=null,e._touchLocation=null,e._radius=0,e}return i(e,t),e.prototype.onLoad=function(){this._radius=this.ring.width/2,this._initTouchEvent(),this.joystickType===c.FOLLOW&&(this.node.opacity=0)},e.prototype.onEnable=function(){n.instance.on("set_joystick_type",this._onSetJoystickType,this)},e.prototype.onDisable=function(){n.instance.off("set_joystick_type",this._onSetJoystickType,this)},e.prototype._onSetJoystickType=function(t){this.joystickType=t,this.node.opacity=t===c.FIXED?255:0},e.prototype._initTouchEvent=function(){this.node.on(cc.Node.EventType.TOUCH_START,this._touchStartEvent,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this._touchMoveEvent,this),this.node.on(cc.Node.EventType.TOUCH_END,this._touchEndEvent,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this._touchEndEvent,this)},e.prototype._touchStartEvent=function(t){n.instance.emit(cc.Node.EventType.TOUCH_START,t);var e=this.node.convertToNodeSpaceAR(t.getLocation());if(this.joystickType===c.FIXED){this._stickPos=this.ring.getPosition();var o=e.sub(this.ring.getPosition()).mag();this._radius>o&&this.dot.setPosition(e)}else this.joystickType===c.FOLLOW&&(this._stickPos=e,this.node.opacity=255,this._touchLocation=t.getLocation(),this.ring.setPosition(e),this.dot.setPosition(e))},e.prototype._touchMoveEvent=function(t){if(this.joystickType===c.FOLLOW&&this._touchLocation===t.getLocation())return!1;var e,o=this.ring.convertToNodeSpaceAR(t.getLocation()),i=o.mag(),r=this._stickPos.x+o.x,s=this._stickPos.y+o.y,u=cc.v2(r,s).sub(this.ring.getPosition()).normalize();if(this._radius>i)this.dot.setPosition(cc.v2(r,s)),e=a.NORMAL;else{var l=this._stickPos.x+u.x*this._radius,h=this._stickPos.y+u.y*this._radius;this.dot.setPosition(cc.v2(l,h)),e=a.FAST}n.instance.emit(cc.Node.EventType.TOUCH_MOVE,t,{speedType:e,moveDistance:u})},e.prototype._touchEndEvent=function(t){this.dot.setPosition(this.ring.getPosition()),this.joystickType===c.FOLLOW&&(this.node.opacity=0),n.instance.emit(cc.Node.EventType.TOUCH_END,t,{speedType:a.STOP})},r([h({type:cc.Node,displayName:"Dot",tooltip:"\u6447\u6746\u64cd\u7eb5\u70b9"})],e.prototype,"dot",void 0),r([h({type:cc.Node,displayName:"Ring",tooltip:"\u6447\u6746\u80cc\u666f\u8282\u70b9"})],e.prototype,"ring",void 0),r([h({type:cc.Enum(c),displayName:"Touch Type",tooltip:"\u89e6\u6478\u7c7b\u578b"})],e.prototype,"joystickType",void 0),r([h({type:cc.Enum(s),displayName:"Direction Type",tooltip:"\u65b9\u5411\u7c7b\u578b"})],e.prototype,"directionType",void 0),r([h({type:cc.Node,tooltip:"\u6447\u6746\u6240\u5728\u4f4d\u7f6e"})],e.prototype,"_stickPos",void 0),r([h({type:cc.Node,tooltip:"\u89e6\u6478\u4f4d\u7f6e"})],e.prototype,"_touchLocation",void 0),r([h({tooltip:"\u534a\u5f84"})],e.prototype,"_radius",void 0),r([l],e)}(cc.Component);n.default=p,cc._RF.pop()},{}],LRUCache:[function(t,e,n){"use strict";cc._RF.push(e,"2516dDnewNJ2I/vyZM6Z9rJ","LRUCache"),Object.defineProperty(n,"__esModule",{value:!0}),n.LRUCache=void 0;var o=t("./Pool"),i=function(){function t(t,e){this.value=t,this.next=e}return t.prototype.use=function(t,e){this.value=t,this.next=e},t.prototype.free=function(){this.value="",this.next=null},t}(),r=function(){function t(t){this.nodePool=new o.Pool(function(){return new i("",null)},3),this.maxSize=t,this.head=new i("head",null),this.size=0}return t.prototype.remove=function(t){var e=this.has(t);e&&this.removeNode(e)},t.prototype.put=function(t){if(this.size<=0)return this.last=this.nodePool.alloc(t,null),this.last.prev=this.head,this.head.next=this.last,void(this.size=1);var e=this.has(t);if(!e)return e=this.nodePool.alloc(t,null),void this.addHead(e);e!=this.head.next&&(this.removeNode(e),this.addHead(e))},t.prototype.needDelete=function(){return this.size>this.maxSize},t.prototype.deleteLastNode=function(){var t=this.last.value;return this.removeNode(this.last),t},t.prototype.removeNode=function(t){t.prev.next=t.next,t.next?t.next.prev=t.prev:this.last=t.prev,t.prev=null,t.next=null,this.nodePool.free(t),this.size--},t.prototype.addHead=function(t){t.next=this.head.next,t.next&&(t.next.prev=t),this.head.next=t,t.prev=this.head,this.size++},t.prototype.has=function(t){for(var e=this.head.next,n=0;e;){if(e.value==t)return e;if(e=e.next,++n>this.maxSize)break}return null},t.prototype.toString=function(){return this.head.next,""},t}();n.LRUCache=r,cc._RF.pop()},{"./Pool":"Pool"}],LightStruct:[function(t,e,n){"use strict";cc._RF.push(e,"c719fETXCJI04htRCnD+NLA","LightStruct"),Object.defineProperty(n,"__esModule",{value:!0}),n.Intersection=void 0;n.Intersection=function(t,e,n,o){this.x=t,this.y=e,this.len=n,this.angle=o},cc._RF.pop()},{}],LightUtils:[function(t,e,n){"use strict";cc._RF.push(e,"cd1b9xWLxVAN7fJCCK/oCfF","LightUtils"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){}return t.getIntersections=function(t,e){for(var n=t,o=[],i=0,r=this.getRayEnds(e);i<r.length;i++)for(var s=r[i],a=this.getNormal(s.sub(n)),c=-1;c<=1;c++){var u=s.add(a.mul(.001*c)),l=this.getIntersection(e,n,u);l&&(l.angle=Math.atan2(u.y-n.y,u.x-n.x),o.push(l))}return o.sort(function(t,e){return t.angle-e.angle})},t.getNormal=function(t){var e=t.normalize(),n=e.x;return e.x=e.y,e.y=-n,e},t.getRayEnds=function(t){for(var e=[],n=0;n<t.length;n++)for(var o=t[n],i=0;i<o.length;i++)e.push(o[i]);return e},t.getIntersection=function(t,e,n){for(var o=null,i=0;i<t.length;i++)for(var r=t[i],s=0;s<r.length;s++){var a=this._doGetIntersection(e,n,r[s],s===r.length-1?r[0]:r[s+1]);a&&(!o||a.len<o.len)&&(o=a)}return o},t.getIntersectionByAngle=function(t,e,n,o){var i=t+e;t*=.017453,i*=.017453;var r=cc.v2(Math.cos(t),Math.sin(t)).add(n),s=cc.v2(Math.cos(i),Math.sin(i)).add(n),a=this.getIntersection(o,n,r);a.angle=t;var c=this.getIntersection(o,n,s);c.angle=i;var u=this.getIntersections(n,o),l=this.binarySearchIntersects(u,t,!0),h=this.binarySearchIntersects(u,i,!1);return(u=u.slice(l,h+1)).unshift({x:n.x,y:n.y,len:0},a),u.push(c),u},t.binarySearchIntersects=function(t,e,n){void 0===n&&(n=!1);for(var o=0,i=t.length-1;i-o>1;){var r=Math.floor((o+i)/2);if(e<t[r].angle)i=r;else{if(!(e>t[r].angle))return r;o=r}}return n?i:o},t._doGetIntersection=function(t,e,n,o){var i=t.x,r=t.y,s=e.x-t.x,a=e.y-t.y,c=n.x,u=n.y,l=o.x-n.x,h=o.y-n.y,p=s*s+a*a,d=l*l+h*h;if(s/p==l/d&&a/p==h/d)return null;var f=(s*(u-r)+a*(i-c))/(l*a-h*s),_=(c+l*f-i)/s;return _<0?null:f<0||f>1?null:{x:i+s*_,y:r+a*_,len:_}},t}();n.default=o,cc._RF.pop()},{}],Light:[function(t,e,n){"use strict";cc._RF.push(e,"68edfvWcX9CWav9zMp303o6","Light");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0}),n.LightType=void 0;var s,a=t("../Components/QuadTree"),c=cc._decorator,u=c.ccclass,l=c.property;(function(t){t[t.Round=0]="Round",t[t.Sector=1]="Sector"})(s=n.LightType||(n.LightType={}));var h=new a.Bound(0,0,0,0),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.graphics=null,e.lightType=0,e.canvasSize=null,e.visiableSize=null,e.radius=200,e.fade=1,e._material=null,e}return i(e,t),e.prototype.onLoad=function(){this._material=this.graphics.getMaterial(0),this.canvasSize=cc.view.getCanvasSize(),this.visiableSize=cc.view.getCanvasSize(),this.node.setContentSize(this.canvasSize),this._material.setProperty("screen",cc.v2(this.canvasSize.width,this.canvasSize.height));var t=this.radius/this.canvasSize.width;this._material.setProperty("maxRadius",t)},e.prototype.start=function(){this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this)},e.prototype.onDestroy=function(){this.node.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this)},e.prototype.onTouchMove=function(t){this.node.x+=t.getDeltaX(),this.node.y+=t.getDeltaY()},e.prototype.getBound=function(){var t=this.node.getPosition();return h.x=t.x-this.radius/2,h.y=t.y-this.radius/2,h.width=h.height=this.radius,h},e.prototype.draw=function(t){var e=this.node.getPosition();this._doDraw(this.graphics,e,t),this._material.setProperty("lightPos",cc.v2(e.x/this.visiableSize.width,e.y/this.visiableSize.height))},e.prototype._doDraw=function(t,e,n){t.clear(),t.moveTo(n[0].x,n[0].y);for(var o=1;o<n.length;o++){var i=n[o];t.lineTo(i.x,i.y)}t.moveTo(n[0].x,n[0].y),t.fill()},r([l(cc.Graphics)],e.prototype,"graphics",void 0),r([l({type:cc.Enum(s)})],e.prototype,"lightType",void 0),r([u],e)}(cc.Component);n.default=p,cc._RF.pop()},{"../Components/QuadTree":"QuadTree"}],ListItem:[function(t,e,n){"use strict";cc._RF.push(e,"a7fffNLv8pJKpv/2o70E/WX","ListItem");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var s,a=cc._decorator,c=a.ccclass,u=a.property,l=a.disallowMultiple,h=a.menu,p=a.executionOrder;(function(t){t[t.NONE=0]="NONE",t[t.TOGGLE=1]="TOGGLE",t[t.SWITCH=2]="SWITCH"})(s||(s={}));var d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=null,e.title=null,e.selectedMode=s.NONE,e.selectedFlag=null,e.selectedSpriteFrame=null,e._unselectedSpriteFrame=null,e.adaptiveSize=!1,e._selected=!1,e._eventReg=!1,e}return i(e,t),Object.defineProperty(e.prototype,"selected",{get:function(){return this._selected},set:function(t){if(this._selected=t,this.selectedFlag)switch(this.selectedMode){case s.TOGGLE:this.selectedFlag.active=t;break;case s.SWITCH:var e=this.selectedFlag.getComponent(cc.Sprite);e&&(e.spriteFrame=t?this.selectedSpriteFrame:this._unselectedSpriteFrame)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"btnCom",{get:function(){return this._btnCom||(this._btnCom=this.node.getComponent(cc.Button)),this._btnCom},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){if(this.selectedMode==s.SWITCH){var t=this.selectedFlag.getComponent(cc.Sprite);this._unselectedSpriteFrame=t.spriteFrame}this.btnCom&&this._registerEvent()},e.prototype.onDestroy=function(){this.node.off(cc.Node.EventType.SIZE_CHANGED,this._onSizeChange,this)},e.prototype._registerEvent=function(){this._eventReg||(this.btnCom&&this.btnCom.clickEvents.unshift(this.createEvt(this,"onClickThis")),this.adaptiveSize&&this.node.on(cc.Node.EventType.SIZE_CHANGED,this._onSizeChange,this),this._eventReg=!0)},e.prototype._onSizeChange=function(){this.list._onItemAdaptive(this.node)},e.prototype.createEvt=function(t,e,n){if(void 0===n&&(n=null),t.isValid){t.comName=t.comName||t.name.match(/\<(.*?)\>/g).pop().replace(/\<|>/g,"");var o=new cc.Component.EventHandler;return o.target=n||t.node,o.component=t.comName,o.handler=e,o}},e.prototype.showAni=function(t,e,n){var o,i=this;switch(t){case 0:o=cc.tween(i.node).to(.2,{scale:.7}).by(.3,{y:2*i.node.height});break;case 1:o=cc.tween(i.node).to(.2,{scale:.7}).by(.3,{x:2*i.node.width});break;case 2:o=cc.tween(i.node).to(.2,{scale:.7}).by(.3,{y:-2*i.node.height});break;case 3:o=cc.tween(i.node).to(.2,{scale:.7}).by(.3,{x:-2*i.node.width});break;default:o=cc.tween(i.node).to(.3,{scale:.1})}(e||n)&&o.call(function(){if(n){i.list._delSingleItem(i.node);for(var t=i.list.displayData.length-1;t>=0;t--)if(i.list.displayData[t].id==i.listId){i.list.displayData.splice(t,1);break}}e()}),o.start()},e.prototype.onClickThis=function(){this.list.selectedId=this.listId},r([u({type:cc.Sprite,tooltip:!1})],e.prototype,"icon",void 0),r([u({type:cc.Node,tooltip:!1})],e.prototype,"title",void 0),r([u({type:cc.Enum(s),tooltip:!1})],e.prototype,"selectedMode",void 0),r([u({type:cc.Node,tooltip:!1,visible:function(){return this.selectedMode>s.NONE}})],e.prototype,"selectedFlag",void 0),r([u({type:cc.SpriteFrame,tooltip:!1,visible:function(){return this.selectedMode==s.SWITCH}})],e.prototype,"selectedSpriteFrame",void 0),r([u({tooltip:!1})],e.prototype,"adaptiveSize",void 0),r([c,l(),h("\u81ea\u5b9a\u4e49\u7ec4\u4ef6/List Item"),p(-5001)],e)}(cc.Component);n.default=d,cc._RF.pop()},{}],List:[function(t,e,n){"use strict";cc._RF.push(e,"c90caYxyjpBsprfoYNnL4hm","List");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var s,a,c,u=cc._decorator,l=u.ccclass,h=u.property,p=u.disallowMultiple,d=u.menu,f=u.executionOrder,_=u.requireComponent,y=t("./ListItem");(function(t){t[t.NODE=1]="NODE",t[t.PREFAB=2]="PREFAB"})(s||(s={})),function(t){t[t.NORMAL=1]="NORMAL",t[t.ADHERING=2]="ADHERING",t[t.PAGE=3]="PAGE"}(a||(a={})),function(t){t[t.NONE=0]="NONE",t[t.SINGLE=1]="SINGLE",t[t.MULT=2]="MULT"}(c||(c={}));var v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.templateType=s.NODE,e.tmpNode=null,e.tmpPrefab=null,e._slideMode=a.NORMAL,e.pageDistance=.3,e.pageChangeEvent=new cc.Component.EventHandler,e._virtual=!0,e.cyclic=!1,e.lackCenter=!1,e.lackSlide=!1,e._updateRate=0,e.frameByFrameRenderNum=0,e.renderEvent=new cc.Component.EventHandler,e.selectedMode=c.NONE,e.repeatEventSingle=!1,e.selectedEvent=new cc.Component.EventHandler,e._selectedId=-1,e._forceUpdate=!1,e._updateDone=!0,e._numItems=0,e._inited=!1,e._needUpdateWidget=!1,e._aniDelRuning=!1,e._doneAfterUpdate=!1,e.adhering=!1,e._adheringBarrier=!1,e.curPageNum=0,e}return i(e,t),Object.defineProperty(e.prototype,"slideMode",{get:function(){return this._slideMode},set:function(t){this._slideMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"virtual",{get:function(){return this._virtual},set:function(t){null!=t&&(this._virtual=t),0!=this._numItems&&this._onScrolling()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"updateRate",{get:function(){return this._updateRate},set:function(t){t>=0&&t<=6&&(this._updateRate=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"selectedId",{get:function(){return this._selectedId},set:function(t){var e,n=this;switch(n.selectedMode){case c.SINGLE:if(!n.repeatEventSingle&&t==n._selectedId)return;e=n.getItemByListId(t);var o=void 0;if(n._selectedId>=0?n._lastSelectedId=n._selectedId:n._lastSelectedId=null,n._selectedId=t,e&&((o=e.getComponent(y.default)).selected=!0),n._lastSelectedId>=0&&n._lastSelectedId!=n._selectedId){var i=n.getItemByListId(n._lastSelectedId);i&&(i.getComponent(y.default).selected=!1)}n.selectedEvent&&cc.Component.EventHandler.emitEvents([n.selectedEvent],e,t%this._actualNumItems,null==n._lastSelectedId?null:n._lastSelectedId%this._actualNumItems);break;case c.MULT:if(!(e=n.getItemByListId(t)))return;o=e.getComponent(y.default),n._selectedId>=0&&(n._lastSelectedId=n._selectedId),n._selectedId=t;var r=!o.selected;o.selected=r;var s=n.multSelected.indexOf(t);r&&s<0?n.multSelected.push(t):!r&&s>=0&&n.multSelected.splice(s,1),n.selectedEvent&&cc.Component.EventHandler.emitEvents([n.selectedEvent],e,t%this._actualNumItems,null==n._lastSelectedId?null:n._lastSelectedId%this._actualNumItems,r)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numItems",{get:function(){return this._actualNumItems},set:function(t){var e=this;if(e.checkInited(!1))if(null==t||t<0)cc.error("numItems set the wrong::",t);else if(e._actualNumItems=e._numItems=t,e._forceUpdate=!0,e._virtual)e._resizeContent(),e.cyclic&&(e._numItems=e._cyclicNum*e._numItems),e._onScrolling(),e.frameByFrameRenderNum||e.slideMode!=a.PAGE||(e.curPageNum=e.nearestListId);else{e.cyclic&&(e._resizeContent(),e._numItems=e._cyclicNum*e._numItems);var n=e.content.getComponent(cc.Layout);if(n&&(n.enabled=!0),e._delRedundantItem(),e.firstListId=0,e.frameByFrameRenderNum>0){for(var o=e.frameByFrameRenderNum>e._numItems?e._numItems:e.frameByFrameRenderNum,i=0;i<o;i++)e._createOrUpdateItem2(i);e.frameByFrameRenderNum<e._numItems&&(e._updateCounter=e.frameByFrameRenderNum,e._updateDone=!1)}else{for(i=0;i<e._numItems;i++)e._createOrUpdateItem2(i);e.displayItemNum=e._numItems}}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scrollView",{get:function(){return this._scrollView},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this._init()},e.prototype.onDestroy=function(){var t=this;cc.isValid(t._itemTmp)&&t._itemTmp.destroy(),cc.isValid(t.tmpNode)&&t.tmpNode.destroy(),t._pool&&t._pool.clear()},e.prototype.onEnable=function(){this._registerEvent(),this._init(),this._aniDelRuning&&(this._aniDelRuning=!1,this._aniDelItem&&(this._aniDelBeforePos&&(this._aniDelItem.position=this._aniDelBeforePos,delete this._aniDelBeforePos),this._aniDelBeforeScale&&(this._aniDelItem.scale=this._aniDelBeforeScale,delete this._aniDelBeforeScale),delete this._aniDelItem),this._aniDelCB&&(this._aniDelCB(),delete this._aniDelCB))},e.prototype.onDisable=function(){this._unregisterEvent()},e.prototype._registerEvent=function(){var t=this;t.node.on(cc.Node.EventType.TOUCH_START,t._onTouchStart,t,!0),t.node.on("touch-up",t._onTouchUp,t),t.node.on(cc.Node.EventType.TOUCH_CANCEL,t._onTouchCancelled,t,!0),t.node.on("scroll-began",t._onScrollBegan,t,!0),t.node.on("scroll-ended",t._onScrollEnded,t,!0),t.node.on("scrolling",t._onScrolling,t,!0),t.node.on(cc.Node.EventType.SIZE_CHANGED,t._onSizeChanged,t)},e.prototype._unregisterEvent=function(){var t=this;t.node.off(cc.Node.EventType.TOUCH_START,t._onTouchStart,t,!0),t.node.off("touch-up",t._onTouchUp,t),t.node.off(cc.Node.EventType.TOUCH_CANCEL,t._onTouchCancelled,t,!0),t.node.off("scroll-began",t._onScrollBegan,t,!0),t.node.off("scroll-ended",t._onScrollEnded,t,!0),t.node.off("scrolling",t._onScrolling,t,!0),t.node.off(cc.Node.EventType.SIZE_CHANGED,t._onSizeChanged,t)},e.prototype._init=function(){var t=this;if(!t._inited)if(t._scrollView=t.node.getComponent(cc.ScrollView),t.content=t._scrollView.content,t.content){switch(t._layout=t.content.getComponent(cc.Layout),t._align=t._layout.type,t._resizeMode=t._layout.resizeMode,t._startAxis=t._layout.startAxis,t._topGap=t._layout.paddingTop,t._rightGap=t._layout.paddingRight,t._bottomGap=t._layout.paddingBottom,t._leftGap=t._layout.paddingLeft,t._columnGap=t._layout.spacingX,t._lineGap=t._layout.spacingY,t._colLineNum,t._verticalDir=t._layout.verticalDirection,t._horizontalDir=t._layout.horizontalDirection,t.setTemplateItem(cc.instantiate(t.templateType==s.PREFAB?t.tmpPrefab:t.tmpNode)),t._slideMode!=a.ADHERING&&t._slideMode!=a.PAGE||(t._scrollView.inertia=!1,t._scrollView._onMouseWheel=function(){}),t.virtual||(t.lackCenter=!1),t._lastDisplayData=[],t.displayData=[],t._pool=new cc.NodePool,t._forceUpdate=!1,t._updateCounter=0,t._updateDone=!0,t.curPageNum=0,t.cyclic&&(t._scrollView._processAutoScrolling=this._processAutoScrolling.bind(t),t._scrollView._startBounceBackIfNeeded=function(){return!1}),t._align){case cc.Layout.Type.HORIZONTAL:switch(t._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:t._alignCalcType=1;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:t._alignCalcType=2}break;case cc.Layout.Type.VERTICAL:switch(t._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:t._alignCalcType=3;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:t._alignCalcType=4}break;case cc.Layout.Type.GRID:switch(t._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:switch(t._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:t._alignCalcType=3;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:t._alignCalcType=4}break;case cc.Layout.AxisDirection.VERTICAL:switch(t._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:t._alignCalcType=1;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:t._alignCalcType=2}}}t.content.removeAllChildren(),t._inited=!0}else cc.error(t.node.name+"'s cc.ScrollView unset content!")},e.prototype._processAutoScrolling=function(t){this._scrollView._autoScrollAccumulatedTime+=1*t;var e=Math.min(1,this._scrollView._autoScrollAccumulatedTime/this._scrollView._autoScrollTotalTime);if(this._scrollView._autoScrollAttenuate){var n=e-1;e=n*n*n*n*n+1}var o=this._scrollView._autoScrollStartPosition.add(this._scrollView._autoScrollTargetDelta.mul(e)),i=this._scrollView.getScrollEndedEventTiming(),r=Math.abs(e-1)<=i;Math.abs(e-1)<=this._scrollView.getScrollEndedEventTiming()&&!this._scrollView._isScrollEndedWithThresholdEventFired&&(this._scrollView._dispatchEvent("scroll-ended-with-threshold"),this._scrollView._isScrollEndedWithThresholdEventFired=!0),r&&(this._scrollView._autoScrolling=!1);var s=o.sub(this._scrollView.getContentPosition());this._scrollView._moveContent(this._scrollView._clampDelta(s),r),this._scrollView._dispatchEvent("scrolling"),this._scrollView._autoScrolling||(this._scrollView._isBouncing=!1,this._scrollView._scrolling=!1,this._scrollView._dispatchEvent("scroll-ended"))},e.prototype.setTemplateItem=function(t){if(t){var e=this;e._itemTmp=t,e._resizeMode==cc.Layout.ResizeMode.CHILDREN?e._itemSize=e._layout.cellSize:e._itemSize=cc.size(t.width,t.height);var n=t.getComponent(y.default),o=!1;switch(n||(o=!0),o&&(e.selectedMode=c.NONE),(n=t.getComponent(cc.Widget))&&n.enabled&&(e._needUpdateWidget=!0),e.selectedMode==c.MULT&&(e.multSelected=[]),e._align){case cc.Layout.Type.HORIZONTAL:e._colLineNum=1,e._sizeType=!1;break;case cc.Layout.Type.VERTICAL:e._colLineNum=1,e._sizeType=!0;break;case cc.Layout.Type.GRID:switch(e._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:var i=e.content.width-e._leftGap-e._rightGap;e._colLineNum=Math.floor((i+e._columnGap)/(e._itemSize.width+e._columnGap)),e._sizeType=!0;break;case cc.Layout.AxisDirection.VERTICAL:var r=e.content.height-e._topGap-e._bottomGap;e._colLineNum=Math.floor((r+e._lineGap)/(e._itemSize.height+e._lineGap)),e._sizeType=!1}}}},e.prototype.checkInited=function(t){return void 0===t&&(t=!0),!!this._inited||(t&&cc.error("List initialization not completed!"),!1)},e.prototype._resizeContent=function(){var t,e=this;switch(e._align){case cc.Layout.Type.HORIZONTAL:if(e._customSize){var n=e._getFixedSize(null);t=e._leftGap+n.val+e._itemSize.width*(e._numItems-n.count)+e._columnGap*(e._numItems-1)+e._rightGap}else t=e._leftGap+e._itemSize.width*e._numItems+e._columnGap*(e._numItems-1)+e._rightGap;break;case cc.Layout.Type.VERTICAL:e._customSize?(n=e._getFixedSize(null),t=e._topGap+n.val+e._itemSize.height*(e._numItems-n.count)+e._lineGap*(e._numItems-1)+e._bottomGap):t=e._topGap+e._itemSize.height*e._numItems+e._lineGap*(e._numItems-1)+e._bottomGap;break;case cc.Layout.Type.GRID:switch(e.lackCenter&&(e.lackCenter=!1),e._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:var o=Math.ceil(e._numItems/e._colLineNum);t=e._topGap+e._itemSize.height*o+e._lineGap*(o-1)+e._bottomGap;break;case cc.Layout.AxisDirection.VERTICAL:var i=Math.ceil(e._numItems/e._colLineNum);t=e._leftGap+e._itemSize.width*i+e._columnGap*(i-1)+e._rightGap}}var r=e.content.getComponent(cc.Layout);if(r&&(r.enabled=!1),e._allItemSize=t,e._allItemSizeNoEdge=e._allItemSize-(e._sizeType?e._topGap+e._bottomGap:e._leftGap+e._rightGap),e.cyclic){var s=e._sizeType?e.node.height:e.node.width;e._cyclicPos1=0,s-=e._cyclicPos1,e._cyclicNum=Math.ceil(s/e._allItemSizeNoEdge)+1;var a=e._sizeType?e._lineGap:e._columnGap;e._cyclicPos2=e._cyclicPos1+e._allItemSizeNoEdge+a,e._cyclicAllItemSize=e._allItemSize+e._allItemSizeNoEdge*(e._cyclicNum-1)+a*(e._cyclicNum-1),e._cycilcAllItemSizeNoEdge=e._allItemSizeNoEdge*e._cyclicNum,e._cycilcAllItemSizeNoEdge+=a*(e._cyclicNum-1)}e._lack=!e.cyclic&&e._allItemSize<(e._sizeType?e.node.height:e.node.width);var c=e._lack&&e.lackCenter||!e.lackSlide?.1:0,u=e._lack?(e._sizeType?e.node.height:e.node.width)-c:e.cyclic?e._cyclicAllItemSize:e._allItemSize;u<0&&(u=0),e._sizeType?e.content.height=u:e.content.width=u},e.prototype._onScrolling=function(t){if(void 0===t&&(t=null),null==this.frameCount&&(this.frameCount=this._updateRate),!this._forceUpdate&&t&&"scroll-ended"!=t.type&&this.frameCount>0)this.frameCount--;else if(this.frameCount=this._updateRate,!this._aniDelRuning){if(this.cyclic){var e=this.content.getPosition();e=this._sizeType?e.y:e.x;var n=this._allItemSizeNoEdge+(this._sizeType?this._lineGap:this._columnGap),o=this._sizeType?cc.v2(0,n):cc.v2(n,0);switch(this._alignCalcType){case 1:e>-this._cyclicPos1?(this.content.x=-this._cyclicPos2,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.sub(o))):e<-this._cyclicPos2&&(this.content.x=-this._cyclicPos1,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(o)));break;case 2:e<this._cyclicPos1?(this.content.x=this._cyclicPos2,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(o))):e>this._cyclicPos2&&(this.content.x=this._cyclicPos1,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.sub(o)));break;case 3:e<this._cyclicPos1?(this.content.y=this._cyclicPos2,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(o))):e>this._cyclicPos2&&(this.content.y=this._cyclicPos1,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.sub(o)));break;case 4:e>-this._cyclicPos1?(this.content.y=-this._cyclicPos2,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.sub(o))):e<-this._cyclicPos2&&(this.content.y=-this._cyclicPos1,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(o)))}}var i,r,s,a;if(this._calcViewPos(),this._sizeType?(i=this.viewTop,s=this.viewBottom):(r=this.viewRight,a=this.viewLeft),this._virtual){this.displayData=[];var c=void 0,u=0,l=this._numItems-1;if(this._customSize)for(var h=!1;u<=l&&!h;u++)switch(c=this._calcItemPos(u),this._align){case cc.Layout.Type.HORIZONTAL:c.right>=a&&c.left<=r?this.displayData.push(c):0!=u&&this.displayData.length>0&&(h=!0);break;case cc.Layout.Type.VERTICAL:c.bottom<=i&&c.top>=s?this.displayData.push(c):0!=u&&this.displayData.length>0&&(h=!0);break;case cc.Layout.Type.GRID:switch(this._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:c.bottom<=i&&c.top>=s?this.displayData.push(c):0!=u&&this.displayData.length>0&&(h=!0);break;case cc.Layout.AxisDirection.VERTICAL:c.right>=a&&c.left<=r?this.displayData.push(c):0!=u&&this.displayData.length>0&&(h=!0)}}else{var p=this._itemSize.width+this._columnGap,d=this._itemSize.height+this._lineGap;switch(this._alignCalcType){case 1:u=(a-this._leftGap)/p,l=(r-this._leftGap)/p;break;case 2:u=(-r-this._rightGap)/p,l=(-a-this._rightGap)/p;break;case 3:u=(-i-this._topGap)/d,l=(-s-this._topGap)/d;break;case 4:u=(s-this._bottomGap)/d,l=(i-this._bottomGap)/d}for(u=Math.floor(u)*this._colLineNum,l=Math.ceil(l)*this._colLineNum,u<0&&(u=0),--l>=this._numItems&&(l=this._numItems-1);u<=l;u++)this.displayData.push(this._calcItemPos(u))}if(this._delRedundantItem(),this.displayData.length<=0||!this._numItems)return void(this._lastDisplayData=[]);this.firstListId=this.displayData[0].id,this.displayItemNum=this.displayData.length;var f=this._lastDisplayData.length,_=this.displayItemNum!=f;if(_&&(this.frameByFrameRenderNum>0&&this._lastDisplayData.sort(function(t,e){return t-e}),_=this.firstListId!=this._lastDisplayData[0]||this.displayData[this.displayItemNum-1].id!=this._lastDisplayData[f-1]),this._forceUpdate||_)if(this.frameByFrameRenderNum>0)this._numItems>0?(this._updateDone?this._updateCounter=0:this._doneAfterUpdate=!0,this._updateDone=!1):(this._updateCounter=0,this._updateDone=!0);else{this._lastDisplayData=[];for(var y=0;y<this.displayItemNum;y++)this._createOrUpdateItem(this.displayData[y]);this._forceUpdate=!1}this._calcNearestItem()}}},e.prototype._calcViewPos=function(){var t=this.content.getPosition();switch(this._alignCalcType){case 1:this.elasticLeft=t.x>0?t.x:0,this.viewLeft=(t.x<0?-t.x:0)-this.elasticLeft,this.viewRight=this.viewLeft+this.node.width,this.elasticRight=this.viewRight>this.content.width?Math.abs(this.viewRight-this.content.width):0,this.viewRight+=this.elasticRight;break;case 2:this.elasticRight=t.x<0?-t.x:0,this.viewRight=(t.x>0?-t.x:0)+this.elasticRight,this.viewLeft=this.viewRight-this.node.width,this.elasticLeft=this.viewLeft<-this.content.width?Math.abs(this.viewLeft+this.content.width):0,this.viewLeft-=this.elasticLeft;break;case 3:this.elasticTop=t.y<0?Math.abs(t.y):0,this.viewTop=(t.y>0?-t.y:0)+this.elasticTop,this.viewBottom=this.viewTop-this.node.height,this.elasticBottom=this.viewBottom<-this.content.height?Math.abs(this.viewBottom+this.content.height):0,this.viewBottom+=this.elasticBottom;break;case 4:this.elasticBottom=t.y>0?Math.abs(t.y):0,this.viewBottom=(t.y<0?-t.y:0)-this.elasticBottom,this.viewTop=this.viewBottom+this.node.height,this.elasticTop=this.viewTop>this.content.height?Math.abs(this.viewTop-this.content.height):0,this.viewTop-=this.elasticTop}},e.prototype._calcItemPos=function(t){var e,n,o,i,r,s,a,c;switch(this._align){case cc.Layout.Type.HORIZONTAL:switch(this._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:if(this._customSize){var u=this._getFixedSize(t);r=this._leftGap+(this._itemSize.width+this._columnGap)*(t-u.count)+(u.val+this._columnGap*u.count),e=(l=this._customSize[t])>0?l:this._itemSize.width}else r=this._leftGap+(this._itemSize.width+this._columnGap)*t,e=this._itemSize.width;return this.lackCenter&&(r-=this._leftGap,r+=this.content.width/2-this._allItemSizeNoEdge/2),{id:t,left:r,right:s=r+e,x:r+this._itemTmp.anchorX*e,y:this._itemTmp.y};case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:return this._customSize?(u=this._getFixedSize(t),s=-this._rightGap-(this._itemSize.width+this._columnGap)*(t-u.count)-(u.val+this._columnGap*u.count),e=(l=this._customSize[t])>0?l:this._itemSize.width):(s=-this._rightGap-(this._itemSize.width+this._columnGap)*t,e=this._itemSize.width),this.lackCenter&&(s+=this._rightGap,s-=this.content.width/2-this._allItemSizeNoEdge/2),{id:t,right:s,left:r=s-e,x:r+this._itemTmp.anchorX*e,y:this._itemTmp.y}}break;case cc.Layout.Type.VERTICAL:switch(this._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:return this._customSize?(u=this._getFixedSize(t),o=-this._topGap-(this._itemSize.height+this._lineGap)*(t-u.count)-(u.val+this._lineGap*u.count),n=(l=this._customSize[t])>0?l:this._itemSize.height):(o=-this._topGap-(this._itemSize.height+this._lineGap)*t,n=this._itemSize.height),this.lackCenter&&(o+=this._topGap,o-=this.content.height/2-this._allItemSizeNoEdge/2),{id:t,top:o,bottom:i=o-n,x:this._itemTmp.x,y:i+this._itemTmp.anchorY*n};case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:var l;if(this._customSize)u=this._getFixedSize(t),i=this._bottomGap+(this._itemSize.height+this._lineGap)*(t-u.count)+(u.val+this._lineGap*u.count),n=(l=this._customSize[t])>0?l:this._itemSize.height;else i=this._bottomGap+(this._itemSize.height+this._lineGap)*t,n=this._itemSize.height;return this.lackCenter&&(i-=this._bottomGap,i+=this.content.height/2-this._allItemSizeNoEdge/2),{id:t,top:o=i+n,bottom:i,x:this._itemTmp.x,y:i+this._itemTmp.anchorY*n}}case cc.Layout.Type.GRID:var h=Math.floor(t/this._colLineNum);switch(this._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:switch(this._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:c=(i=(o=-this._topGap-(this._itemSize.height+this._lineGap)*h)-this._itemSize.height)+this._itemTmp.anchorY*this._itemSize.height;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:o=(i=this._bottomGap+(this._itemSize.height+this._lineGap)*h)+this._itemSize.height,c=i+this._itemTmp.anchorY*this._itemSize.height}switch(a=this._leftGap+t%this._colLineNum*(this._itemSize.width+this._columnGap),this._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:a+=this._itemTmp.anchorX*this._itemSize.width,a-=this.content.anchorX*this.content.width;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:a+=(1-this._itemTmp.anchorX)*this._itemSize.width,a-=(1-this.content.anchorX)*this.content.width,a*=-1}return{id:t,top:o,bottom:i,x:a,y:c};case cc.Layout.AxisDirection.VERTICAL:switch(this._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:s=(r=this._leftGap+(this._itemSize.width+this._columnGap)*h)+this._itemSize.width,a=r+this._itemTmp.anchorX*this._itemSize.width,a-=this.content.anchorX*this.content.width;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:a=(r=(s=-this._rightGap-(this._itemSize.width+this._columnGap)*h)-this._itemSize.width)+this._itemTmp.anchorX*this._itemSize.width,a+=(1-this.content.anchorX)*this.content.width}switch(c=-this._topGap-t%this._colLineNum*(this._itemSize.height+this._lineGap),this._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:c-=(1-this._itemTmp.anchorY)*this._itemSize.height,c+=(1-this.content.anchorY)*this.content.height;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:c-=this._itemTmp.anchorY*this._itemSize.height,c+=this.content.anchorY*this.content.height,c*=-1}return{id:t,left:r,right:s,x:a,y:c}}}},e.prototype._calcExistItemPos=function(t){var e=this.getItemByListId(t);if(!e)return null;var n={id:t,x:e.x,y:e.y};return this._sizeType?(n.top=e.y+e.height*(1-e.anchorY),n.bottom=e.y-e.height*e.anchorY):(n.left=e.x-e.width*e.anchorX,n.right=e.x+e.width*(1-e.anchorX)),n},e.prototype.getItemPos=function(t){return this._virtual?this._calcItemPos(t):this.frameByFrameRenderNum?this._calcItemPos(t):this._calcExistItemPos(t)},e.prototype._getFixedSize=function(t){if(!this._customSize)return null;null==t&&(t=this._numItems);var e=0,n=0;for(var o in this._customSize)parseInt(o)<t&&(e+=this._customSize[o],n++);return{val:e,count:n}},e.prototype._onScrollBegan=function(){this._beganPos=this._sizeType?this.viewTop:this.viewLeft},e.prototype._onScrollEnded=function(){var t=this;if(t.curScrollIsTouch=!1,null!=t.scrollToListId){var e=t.getItemByListId(t.scrollToListId);t.scrollToListId=null,e&&cc.tween(e).to(.1,{scale:1.06}).to(.1,{scale:1}).start()}t._onScrolling(),t._slideMode!=a.ADHERING||t.adhering?t._slideMode==a.PAGE&&(null!=t._beganPos&&t.curScrollIsTouch?this._pageAdhere():t.adhere()):t.adhere()},e.prototype._onTouchStart=function(t,e){if(!this._scrollView.hasNestedViewGroup(t,e)&&(this.curScrollIsTouch=!0,t.eventPhase!==cc.Event.AT_TARGET||t.target!==this.node)){for(var n=t.target;null==n._listId&&n.parent;)n=n.parent;this._scrollItem=null!=n._listId?n:t.target}},e.prototype._onTouchUp=function(){var t=this;t._scrollPos=null,t._slideMode==a.ADHERING?(this.adhering&&(this._adheringBarrier=!0),t.adhere()):t._slideMode==a.PAGE&&(null!=t._beganPos?this._pageAdhere():t.adhere()),this._scrollItem=null},e.prototype._onTouchCancelled=function(t,e){var n=this;n._scrollView.hasNestedViewGroup(t,e)||t.simulate||(n._scrollPos=null,n._slideMode==a.ADHERING?(n.adhering&&(n._adheringBarrier=!0),n.adhere()):n._slideMode==a.PAGE&&(null!=n._beganPos?n._pageAdhere():n.adhere()),this._scrollItem=null)},e.prototype._onSizeChanged=function(){this.checkInited(!1)&&this._onScrolling()},e.prototype._onItemAdaptive=function(t){if(!this._sizeType&&t.width!=this._itemSize.width||this._sizeType&&t.height!=this._itemSize.height){this._customSize||(this._customSize={});var e=this._sizeType?t.height:t.width;this._customSize[t._listId]!=e&&(this._customSize[t._listId]=e,this._resizeContent(),this.updateAll(),null!=this._scrollToListId&&(this._scrollPos=null,this.unschedule(this._scrollToSo),this.scrollTo(this._scrollToListId,Math.max(0,this._scrollToEndTime-(new Date).getTime()/1e3))))}},e.prototype._pageAdhere=function(){var t=this;if(t.cyclic||!(t.elasticTop>0||t.elasticRight>0||t.elasticBottom>0||t.elasticLeft>0)){var e=t._sizeType?t.viewTop:t.viewLeft,n=(t._sizeType?t.node.height:t.node.width)*t.pageDistance;if(Math.abs(t._beganPos-e)>n)switch(t._alignCalcType){case 1:case 4:t._beganPos>e?t.prePage(.5):t.nextPage(.5);break;case 2:case 3:t._beganPos<e?t.prePage(.5):t.nextPage(.5)}else t.elasticTop<=0&&t.elasticRight<=0&&t.elasticBottom<=0&&t.elasticLeft<=0&&t.adhere();t._beganPos=null}},e.prototype.adhere=function(){var t=this;if(t.checkInited()&&!(t.elasticTop>0||t.elasticRight>0||t.elasticBottom>0||t.elasticLeft>0)){t.adhering=!0,t._calcNearestItem();var e=(t._sizeType?t._topGap:t._leftGap)/(t._sizeType?t.node.height:t.node.width);t.scrollTo(t.nearestListId,.7,e)}},e.prototype.update=function(){if(!(this.frameByFrameRenderNum<=0||this._updateDone))if(this._virtual){for(var t=this._updateCounter+this.frameByFrameRenderNum>this.displayItemNum?this.displayItemNum:this._updateCounter+this.frameByFrameRenderNum,e=this._updateCounter;e<t;e++){var n=this.displayData[e];n&&this._createOrUpdateItem(n)}this._updateCounter>=this.displayItemNum-1?this._doneAfterUpdate?(this._updateCounter=0,this._updateDone=!1,this._doneAfterUpdate=!1):(this._updateDone=!0,this._delRedundantItem(),this._forceUpdate=!1,this._calcNearestItem(),this.slideMode==a.PAGE&&(this.curPageNum=this.nearestListId)):this._updateCounter+=this.frameByFrameRenderNum}else if(this._updateCounter<this._numItems){for(t=this._updateCounter+this.frameByFrameRenderNum>this._numItems?this._numItems:this._updateCounter+this.frameByFrameRenderNum,e=this._updateCounter;e<t;e++)this._createOrUpdateItem2(e);this._updateCounter+=this.frameByFrameRenderNum}else this._updateDone=!0,this._calcNearestItem(),this.slideMode==a.PAGE&&(this.curPageNum=this.nearestListId)},e.prototype._createOrUpdateItem=function(t){var e=this.getItemByListId(t.id);if(e)this._forceUpdate&&this.renderEvent&&(e.setPosition(cc.v2(t.x,t.y)),this._resetItemSize(e),this.renderEvent&&cc.Component.EventHandler.emitEvents([this.renderEvent],e,t.id%this._actualNumItems));else{var n=this._pool.size()>0;if(e=n?this._pool.get():cc.instantiate(this._itemTmp),n&&cc.isValid(e)||(e=cc.instantiate(this._itemTmp),n=!1),e._listId!=t.id&&(e._listId=t.id,e.setContentSize(this._itemSize)),e.setPosition(cc.v2(t.x,t.y)),this._resetItemSize(e),this.content.addChild(e),n&&this._needUpdateWidget){var o=e.getComponent(cc.Widget);o&&o.updateAlignment()}e.setSiblingIndex(this.content.childrenCount-1);var i=e.getComponent(y.default);e.listItem=i,i&&(i.listId=t.id,i.list=this,i._registerEvent()),this.renderEvent&&cc.Component.EventHandler.emitEvents([this.renderEvent],e,t.id%this._actualNumItems)}this._resetItemSize(e),this._updateListItem(e.listItem),this._lastDisplayData.indexOf(t.id)<0&&this._lastDisplayData.push(t.id)},e.prototype._createOrUpdateItem2=function(t){var e,n=this.content.children[t];n?this._forceUpdate&&this.renderEvent&&(n._listId=t,e&&(e.listId=t),this.renderEvent&&cc.Component.EventHandler.emitEvents([this.renderEvent],n,t%this._actualNumItems)):((n=cc.instantiate(this._itemTmp))._listId=t,this.content.addChild(n),e=n.getComponent(y.default),n.listItem=e,e&&(e.listId=t,e.list=this,e._registerEvent()),this.renderEvent&&cc.Component.EventHandler.emitEvents([this.renderEvent],n,t%this._actualNumItems)),this._updateListItem(e),this._lastDisplayData.indexOf(t)<0&&this._lastDisplayData.push(t)},e.prototype._updateListItem=function(t){if(t&&this.selectedMode>c.NONE){var e=t.node;switch(this.selectedMode){case c.SINGLE:t.selected=this.selectedId==e._listId;break;case c.MULT:t.selected=this.multSelected.indexOf(e._listId)>=0}}},e.prototype._resetItemSize=function(){},e.prototype._updateItemPos=function(t){var e=isNaN(t)?t:this.getItemByListId(t),n=this.getItemPos(e._listId);e.setPosition(n.x,n.y)},e.prototype.setMultSelected=function(t,e){var n=this;if(n.checkInited()){if(Array.isArray(t)||(t=[t]),null==e)n.multSelected=t;else{var o=void 0,i=void 0;if(e)for(var r=t.length-1;r>=0;r--)o=t[r],(i=n.multSelected.indexOf(o))<0&&n.multSelected.push(o);else for(r=t.length-1;r>=0;r--)o=t[r],(i=n.multSelected.indexOf(o))>=0&&n.multSelected.splice(i,1)}n._forceUpdate=!0,n._onScrolling()}},e.prototype.getMultSelected=function(){return this.multSelected},e.prototype.hasMultSelected=function(t){return this.multSelected&&this.multSelected.indexOf(t)>=0},e.prototype.updateItem=function(t){if(this.checkInited()){Array.isArray(t)||(t=[t]);for(var e=0,n=t.length;e<n;e++){var o=t[e],i=this.getItemByListId(o);i&&cc.Component.EventHandler.emitEvents([this.renderEvent],i,o%this._actualNumItems)}}},e.prototype.updateAll=function(){this.checkInited()&&(this.numItems=this.numItems)},e.prototype.getItemByListId=function(t){if(this.content)for(var e=this.content.childrenCount-1;e>=0;e--){var n=this.content.children[e];if(n._listId==t)return n}},e.prototype._getOutsideItem=function(){for(var t,e=[],n=this.content.childrenCount-1;n>=0;n--)t=this.content.children[n],this.displayData.find(function(e){return e.id==t._listId})||e.push(t);return e},e.prototype._delRedundantItem=function(){if(this._virtual)for(var t=this._getOutsideItem(),e=t.length-1;e>=0;e--){var n=t[e];if(!this._scrollItem||n._listId!=this._scrollItem._listId){n.isCached=!0,this._pool.put(n);for(var o=this._lastDisplayData.length-1;o>=0;o--)if(this._lastDisplayData[o]==n._listId){this._lastDisplayData.splice(o,1);break}}}else for(;this.content.childrenCount>this._numItems;)this._delSingleItem(this.content.children[this.content.childrenCount-1])},e.prototype._delSingleItem=function(t){t.removeFromParent(),t.destroy&&t.destroy(),t=null},e.prototype.aniDelItem=function(t,e,n){var o=this;if(!o.checkInited()||o.cyclic||!o._virtual)return cc.error("This function is not allowed to be called!");if(!e)return cc.error("CallFunc are not allowed to be NULL, You need to delete the corresponding index in the data array in the CallFunc!");if(o._aniDelRuning)return cc.warn("Please wait for the current deletion to finish!");var i,r=o.getItemByListId(t);if(r){i=r.getComponent(y.default),o._aniDelRuning=!0,o._aniDelCB=e,o._aniDelItem=r,o._aniDelBeforePos=r.position,o._aniDelBeforeScale=r.scale;var s=o.displayData[o.displayData.length-1].id,a=i.selected;i.showAni(n,function(){var n,i,u;if(s<o._numItems-2&&(n=s+1),null!=n){var l=o._calcItemPos(n);o.displayData.push(l),o._virtual?o._createOrUpdateItem(l):o._createOrUpdateItem2(n)}else o._numItems--;if(o.selectedMode==c.SINGLE)a?o._selectedId=-1:o._selectedId-1>=0&&o._selectedId--;else if(o.selectedMode==c.MULT&&o.multSelected.length){var h=o.multSelected.indexOf(t);h>=0&&o.multSelected.splice(h,1);for(var p=o.multSelected.length-1;p>=0;p--)(_=o.multSelected[p])>=t&&o.multSelected[p]--}if(o._customSize){o._customSize[t]&&delete o._customSize[t];var d={},f=void 0;for(var _ in o._customSize){f=o._customSize[_];var y=parseInt(_);d[y-(y>=t?1:0)]=f}o._customSize=d}for(p=null!=n?n:s;p>=t+1;p--)if(r=o.getItemByListId(p)){var v=o._calcItemPos(p-1);i=cc.tween(r).to(.2333,{position:cc.v2(v.x,v.y)}),p<=t+1&&(u=!0,i.call(function(){o._aniDelRuning=!1,e(t),delete o._aniDelCB})),i.start()}u||(o._aniDelRuning=!1,e(t),o._aniDelCB=null)},!0)}else e(t)},e.prototype.scrollTo=function(t,e,n,o){void 0===e&&(e=.5),void 0===n&&(n=null),void 0===o&&(o=!1);var i=this;if(i.checkInited(!1)){null==e?e=.5:e<0&&(e=0),t<0?t=0:t>=i._numItems&&(t=i._numItems-1),!i._virtual&&i._layout&&i._layout.enabled&&i._layout.updateLayout();var r,s,a=i.getItemPos(t);if(!a)return!1;switch(i._alignCalcType){case 1:r=a.left,r-=null!=n?i.node.width*n:i._leftGap,a=cc.v2(r,0);break;case 2:r=a.right-i.node.width,r+=null!=n?i.node.width*n:i._rightGap,a=cc.v2(r+i.content.width,0);break;case 3:s=a.top,s+=null!=n?i.node.height*n:i._topGap,a=cc.v2(0,-s);break;case 4:s=a.bottom+i.node.height,s-=null!=n?i.node.height*n:i._bottomGap,a=cc.v2(0,-s+i.content.height)}var c=i.content.getPosition();c=Math.abs(i._sizeType?c.y:c.x);var u=i._sizeType?a.y:a.x;Math.abs((null!=i._scrollPos?i._scrollPos:c)-u)>.5&&(i._scrollView.scrollToOffset(a,e),i._scrollToListId=t,i._scrollToEndTime=(new Date).getTime()/1e3+e,i._scrollToSo=i.scheduleOnce(function(){if(i._adheringBarrier||(i.adhering=i._adheringBarrier=!1),i._scrollPos=i._scrollToListId=i._scrollToEndTime=i._scrollToSo=null,o){var e=i.getItemByListId(t);e&&cc.tween(e).to(.1,{scale:1.05}).to(.1,{scale:1}).start()}},e+.1),e<=0&&i._onScrolling())}},e.prototype._calcNearestItem=function(){var t,e,n,o,i,r,s=this;s.nearestListId=null,s._virtual&&s._calcViewPos(),n=s.viewTop,o=s.viewRight,i=s.viewBottom,r=s.viewLeft;for(var a=!1,c=0;c<s.content.childrenCount&&!a;c+=s._colLineNum)if(t=s._virtual?s.displayData[c]:s._calcExistItemPos(c))switch(e=s._sizeType?(t.top+t.bottom)/2:e=(t.left+t.right)/2,s._alignCalcType){case 1:t.right>=r&&(s.nearestListId=t.id,r>e&&(s.nearestListId+=s._colLineNum),a=!0);break;case 2:t.left<=o&&(s.nearestListId=t.id,o<e&&(s.nearestListId+=s._colLineNum),a=!0);break;case 3:t.bottom<=n&&(s.nearestListId=t.id,n<e&&(s.nearestListId+=s._colLineNum),a=!0);break;case 4:t.top>=i&&(s.nearestListId=t.id,i>e&&(s.nearestListId+=s._colLineNum),a=!0)}if((t=s._virtual?s.displayData[s.displayItemNum-1]:s._calcExistItemPos(s._numItems-1))&&t.id==s._numItems-1)switch(e=s._sizeType?(t.top+t.bottom)/2:e=(t.left+t.right)/2,s._alignCalcType){case 1:o>e&&(s.nearestListId=t.id);break;case 2:r<e&&(s.nearestListId=t.id);break;case 3:i<e&&(s.nearestListId=t.id);break;case 4:n>e&&(s.nearestListId=t.id)}},e.prototype.prePage=function(t){void 0===t&&(t=.5),this.checkInited()&&this.skipPage(this.curPageNum-1,t)},e.prototype.nextPage=function(t){void 0===t&&(t=.5),this.checkInited()&&this.skipPage(this.curPageNum+1,t)},e.prototype.skipPage=function(t,e){var n=this;if(n.checkInited())return n._slideMode!=a.PAGE?cc.error("This function is not allowed to be called, Must SlideMode = PAGE!"):void(t<0||t>=n._numItems||n.curPageNum!=t&&(n.curPageNum=t,n.pageChangeEvent&&cc.Component.EventHandler.emitEvents([n.pageChangeEvent],t),n.scrollTo(t,e)))},e.prototype.calcCustomSize=function(t){var e=this;if(e.checkInited()){if(!e._itemTmp)return cc.error("Unset template item!");if(!e.renderEvent)return cc.error("Unset Render-Event!");e._customSize={};var n=cc.instantiate(e._itemTmp);e.content.addChild(n);for(var o=0;o<t;o++)cc.Component.EventHandler.emitEvents([e.renderEvent],n,o),n.height==e._itemSize.height&&n.width==e._itemSize.width||(e._customSize[o]=e._sizeType?n.height:n.width);return Object.keys(e._customSize).length||(e._customSize=null),n.removeFromParent(),n.destroy&&n.destroy(),e._customSize}},r([h({type:cc.Enum(s),tooltip:!1})],e.prototype,"templateType",void 0),r([h({type:cc.Node,tooltip:!1,visible:function(){return this.templateType==s.NODE}})],e.prototype,"tmpNode",void 0),r([h({type:cc.Prefab,tooltip:!1,visible:function(){return this.templateType==s.PREFAB}})],e.prototype,"tmpPrefab",void 0),r([h()],e.prototype,"_slideMode",void 0),r([h({type:cc.Enum(a),tooltip:!1})],e.prototype,"slideMode",null),r([h({type:cc.Float,range:[0,1,.1],tooltip:!1,slide:!0,visible:function(){return this._slideMode==a.PAGE}})],e.prototype,"pageDistance",void 0),r([h({type:cc.Component.EventHandler,tooltip:!1,visible:function(){return this._slideMode==a.PAGE}})],e.prototype,"pageChangeEvent",void 0),r([h()],e.prototype,"_virtual",void 0),r([h({type:cc.Boolean,tooltip:!1})],e.prototype,"virtual",null),r([h({tooltip:!1,visible:function(){var t=this.slideMode==a.NORMAL;return t||(this.cyclic=!1),t}})],e.prototype,"cyclic",void 0),r([h({tooltip:!1,visible:function(){return this.virtual}})],e.prototype,"lackCenter",void 0),r([h({tooltip:!1,visible:function(){var t=this.virtual&&!this.lackCenter;return t||(this.lackSlide=!1),t}})],e.prototype,"lackSlide",void 0),r([h({type:cc.Integer})],e.prototype,"_updateRate",void 0),r([h({type:cc.Integer,range:[0,6,1],tooltip:!1,slide:!0})],e.prototype,"updateRate",null),r([h({type:cc.Integer,range:[0,12,1],tooltip:!1,slide:!0})],e.prototype,"frameByFrameRenderNum",void 0),r([h({type:cc.Component.EventHandler,tooltip:!1})],e.prototype,"renderEvent",void 0),r([h({type:cc.Enum(c),tooltip:!1})],e.prototype,"selectedMode",void 0),r([h({tooltip:!1,visible:function(){return this.selectedMode==c.SINGLE}})],e.prototype,"repeatEventSingle",void 0),r([h({type:cc.Component.EventHandler,tooltip:!1,visible:function(){return this.selectedMode>c.NONE}})],e.prototype,"selectedEvent",void 0),r([h({serializable:!1})],e.prototype,"_numItems",void 0),r([l,p(),d("\u81ea\u5b9a\u4e49\u7ec4\u4ef6/List"),_(cc.ScrollView),f(-5e3)],e)}(cc.Component);n.default=v,cc._RF.pop()},{"./ListItem":"ListItem"}],Main:[function(t,e,n){"use strict";cc._RF.push(e,"e1b90/rohdEk4SdmmEZANaD","Main");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var s=t("./Common/Components/PropController"),a=t("./UIScript/UIHome"),c=cc._decorator,u=c.ccclass,l=c.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.building=null,e}return i(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){a.default.open()},e.prototype.onDestroy=function(){},r([l(s.default)],e.prototype,"building",void 0),r([u],e)}(cc.Component);n.default=h,cc._RF.pop()},{"./Common/Components/PropController":"PropController","./UIScript/UIHome":"UIHome"}],MaskPlus:[function(t,e,n){"use strict";cc._RF.push(e,"a1aa9cyaadEZ67qCIT1FuzO","MaskPlus");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0}),n.MaskPlusType=void 0;var s,a=t("../Utils/CommonUtils");(function(t){t[t.RECT=0]="RECT",t[t.ELLIPSE=1]="ELLIPSE",t[t.IMAGE_STENCIL=2]="IMAGE_STENCIL",t[t.Polygon=3]="Polygon"})(s=n.MaskPlusType||(n.MaskPlusType={}));var c=new cc.Vec2,u=new cc.Mat4,l=[];function h(t,e,n){l.length=0;for(var o=2*Math.PI/n,i=0;i<n;++i)l.push(cc.v2(e.x*Math.cos(o*i)+t.x,e.y*Math.sin(o*i)+t.y));return l}var p=function(){},d=cc._decorator,f=d.ccclass,_=d.property,y=d.executeInEditMode,v=d.menu,m=d.help,g=d.inspector,b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._type=0,e._polygon=[],e.ellipse=new p,e}return i(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(t){if(this._type!==t&&this._resetAssembler(),this._type=t,this._type===s.Polygon&&0===this._polygon.length){var e=this.getNodeRect(),n=e[0],o=e[1],i=e[2],r=e[3];this._polygon.push(cc.v2(n,o),cc.v2(n+i,o),cc.v2(n+i,o+r),cc.v2(n,o+r))}this._type!==s.IMAGE_STENCIL&&(this.spriteFrame=null,this.alphaThreshold=0,this._updateGraphics()),this._activateMaterial()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"polygon",{get:function(){return this._polygon},set:function(t){this._polygon=t,this._updateGraphics()},enumerable:!1,configurable:!0}),e.prototype.setEllipse=function(t,e,n){this.ellipse.center=t,this.ellipse.r=e,this.ellipse.segments=n||this.segements},e.prototype._updateGraphics=function(){this.node;var t=this._graphics;t.clear(!1);var e=this.getNodeRect(),n=e[0],o=e[1],i=e[2],r=e[3];if(this._type===s.RECT)t.rect(n,o,i,r);else if(this._type===s.ELLIPSE){for(var a=h(this.ellipse.center||cc.v2(n+i/2,o+r/2),this.ellipse.r||{x:i/2,y:r/2},this.ellipse.segments||this._segments),c=0;c<a.length;++c){var u=a[c];0===c?t.moveTo(u.x,u.y):t.lineTo(u.x,u.y)}t.close()}else if(this._type===s.Polygon){for(0===this._polygon.length&&this._polygon.push(cc.v2(0,0)),t.moveTo(this._polygon[0].x,this._polygon[0].y),c=1;c<this._polygon.length;c++)t.lineTo(this._polygon[c].x,this._polygon[c].y);t.lineTo(this._polygon[0].x,this._polygon[0].y)}cc.game.renderType===cc.game.RENDER_TYPE_CANVAS?t.stroke():t.fill()},e.prototype._hitTest=function(t){var e=this.node,n=e.getContentSize(),o=n.width,i=n.height,r=c;if(e._updateWorldMatrix(),!cc.Mat4.invert(u,e._worldMatrix))return!1;var l=cc.v2(0,0);cc.Vec2.transformMat4(l,t,u),r.x=l.x+e._anchorPoint.x*o,r.y=l.y+e._anchorPoint.y*i;var h=!1;if(this.type===s.RECT||this.type===s.IMAGE_STENCIL)h=r.x>=0&&r.y>=0&&r.x<=o&&r.y<=i;else if(this.type===s.ELLIPSE){var p=o/2,d=i/2,f=r.x-.5*o,_=r.y-.5*i;h=f*f/(p*p)+_*_/(d*d)<1}else this.type===s.Polygon&&(h=a.CommonUtils.isInPolygon(l,this.polygon));return this.inverted&&(h=!h),h},e.prototype.getNodeRect=function(){var t=this.node._contentSize.width,e=this.node._contentSize.height;return[-t*this.node._anchorPoint.x,-e*this.node._anchorPoint.y,t,e]},e.Type=s,r([_({type:cc.Enum(s),override:!0})],e.prototype,"_type",void 0),r([_({type:cc.Enum(s),override:!0})],e.prototype,"type",null),r([_({type:[cc.Vec2],serializable:!0})],e.prototype,"_polygon",void 0),r([_({type:[cc.Vec2],serializable:!0})],e.prototype,"polygon",null),r([f,v("i18n:MAIN_MENU.component.renderers/MaskPlus"),y,m("i18n:COMPONENT.help_url.mask"),g("packages://maskplus/inspector.js")],e)}(cc.Mask);n.default=b,cc.MaskPlus=b,cc._RF.pop()},{"../Utils/CommonUtils":"CommonUtils"}],MatchUtils:[function(t,e,n){"use strict";cc._RF.push(e,"ce2a5iLaMdGPJK3POfEqDgZ","MatchUtils"),Object.defineProperty(n,"__esModule",{value:!0}),n.MathUtils=void 0;var o=function(){function t(){}return t.clamp=function(t,e,n){if(t>e){var o=t;t=e,e=o}return n<t?t:n>e?e:n},t.getAngle=function(t){return 180*t/Math.PI},t.getRadian=function(t){return t/180*Math.PI},t.getRadian2=function(t,e,n,o){var i=n-t,r=o-e;return Math.atan2(r,i)},t.getDistance=function(t,e,n,o){var i=n-t,r=o-e,s=i*i+r*r;return Math.sqrt(s)},t.toFixedStr=function(t,e){return t.toFixed(e).replace(/\.?0*$/,"")},t.toPercentStr=function(t,e){return this.toFixedStr(100*t,e)+"%"},t.toFixedWan=function(e){var n=1e4*Math.floor(e/1e4);return e>1e5?t.toFixedStr(n/1e5*10,1)+"\u4e07":e.toString()},t.getFinalValueBasedOnParams=function(t,e,n){if(e.length<5)return 0;var o=e[4]*(e[0]*Math.pow(t,e[3])+e[1]*t+e[2]);return n&&(o=Math.ceil(o)),o},t.limit=function(t,e){t=Math.min(t,e);var n=(e=Math.max(t,e))-t;return t+Math.random()*n},t.limitInteger=function(e,n){return Math.round(t.limit(e,n))},t.randomArray=function(t){return t[Math.floor(Math.random()*t.length)]},t}();n.MathUtils=o,cc._RF.pop()},{}],Measure:[function(t,e,n){"use strict";cc._RF.push(e,"88f3djvTDJHMY+UnVZdcrvg","Measure"),Object.defineProperty(n,"__esModule",{value:!0}),n.measure=void 0,n.measure=function(t,e,n){var o=n.value;return n.value=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=performance.now(),r=o.apply(this,t),s=performance.now();return console.log(e+" Execution time: "+(s-i).toFixed(2)+" milliseconds"),r},n},cc._RF.pop()},{}],MenuItem:[function(t,e,n){"use strict";cc._RF.push(e,"8f753evmXpEpJHipBbmNcOy","MenuItem");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var s=t("../../UIScript/UIWorkDesk"),a=cc._decorator,c=a.ccclass,u=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=null,e.desk=null,e}return i(e,t),e.prototype.onLoad=function(){},e.prototype.init=function(t){this.desk=t},e.prototype.start=function(){this.registerEvent()},e.prototype.registerEvent=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.desk.dragMove.bind(this.desk),this),this.node.on(cc.Node.EventType.TOUCH_END,this.desk.dragEnd.bind(this.desk),this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.desk.dragEnd.bind(this.desk),this)},e.prototype.unRegisterEvent=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.desk.dragMove.bind(this.desk),this),this.node.off(cc.Node.EventType.TOUCH_END,this.desk.dragEnd.bind(this.desk),this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.desk.dragEnd.bind(this.desk),this)},e.prototype.touchStart=function(t){this.desk.dragNode(t,this,s.DragType.Menu)},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this.unRegisterEvent()},r([u({type:cc.Sprite,tooltip:!1})],e.prototype,"icon",void 0),r([c],e)}(cc.Component);n.default=l,cc._RF.pop()},{"../../UIScript/UIWorkDesk":"UIWorkDesk"}],MeshAssembler:[function(t,e,n){"use strict";cc._RF.push(e,"9ba87xSitVM9boajZ/wQdaJ","MeshAssembler");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=cc.gfx,s=new r.VertexFormat([{name:r.ATTR_POSITION,type:r.ATTR_TYPE_FLOAT32,num:2},{name:r.ATTR_UV0,type:r.ATTR_TYPE_FLOAT32,num:2},{name:r.ATTR_COLOR,type:r.ATTR_TYPE_UINT8,num:4,normalize:!0}]),a=function(t){function e(){var e=t.call(this)||this;return e.row=0,e.col=0,e._realRow=0,e._realCol=0,e.stepRow=0,e.StepCol=0,e.verticesCount=4,e.indicesCount=6,e.floatsPerVert=5,e.uvOffset=2,e.colorOffset=4,e._renderData=null,e._local=null,e._renderData=new cc.RenderData,e._renderData.init(e),e.initData(),e.initLocal(),e}return i(e,t),Object.defineProperty(e.prototype,"verticesFloats",{get:function(){return this.verticesCount*this.floatsPerVert},enumerable:!1,configurable:!0}),e.prototype.getTriangleCount=function(){return(this.row-1)*(this.col-1)*2},e.prototype.getTriangle=function(t){if(t<0||t>=this.getTriangleCount())return null;var e=this._renderData.vDatas[0],n=Math.floor(t/this._realCol)*this._realCol*2+t;return t%2==0?[cc.v2(e[n*this.floatsPerVert],e[n*this.floatsPerVert+1]),cc.v2(e[(n+1)*this.floatsPerVert],e[(n+1)*this.floatsPerVert+1]),cc.v2(e[(n+this._realCol)*this.floatsPerVert],e[(n+this._realCol)*this.floatsPerVert+1])]:[cc.v2(e[n*this.floatsPerVert],e[n*this.floatsPerVert+1]),cc.v2(e[(n+this._realCol)*this.floatsPerVert],e[(n+this._realCol)*this.floatsPerVert+1]),cc.v2(e[(n+this._realCol-1)*this.floatsPerVert],e[(n+this._realCol-1)*this.floatsPerVert+1])]},e.prototype.setTriangle=function(t,e,n){if(!(t<0||t>=this.getTriangleCount())){var o=this._renderData.vDatas[0],i=Math.floor(t/this._realCol)*this._realCol*2+t;t%2==0?(o[i*this.floatsPerVert]=e[0].x,o[i*this.floatsPerVert+1]=e[0].y,o[(i+1)*this.floatsPerVert]=e[1].x,o[(i+1)*this.floatsPerVert+1]=e[1].y,o[(i+this._realCol)*this.floatsPerVert]=e[2].x,o[(i+this._realCol)*this.floatsPerVert+1]=e[2].y):(o[i*this.floatsPerVert]=e[0].x,o[i*this.floatsPerVert+1]=e[0].y,o[(i+this._realCol)*this.floatsPerVert]=e[1].x,o[(i+this._realCol)*this.floatsPerVert+1]=e[1].y,o[(i+this._realCol-1)*this.floatsPerVert]=e[2].x,o[(i+this._realCol-1)*this.floatsPerVert+1]=e[2].y),n._vertsDirty=!0}},e.prototype.getRectCount=function(){return(this.row-1)*(this.col-1)},e.prototype.getRect=function(t){if(t<0||t>=this.getRectCount())return null;var e=this._renderData.vDatas[0],n=Math.floor(2*t/this._realCol)*this._realCol*2+2*t%this._realCol;return[cc.v2(e[n*this.floatsPerVert],e[n*this.floatsPerVert+1]),cc.v2(e[(n+1)*this.floatsPerVert],e[(n+1)*this.floatsPerVert+1]),cc.v2(e[(n+this._realCol)*this.floatsPerVert],e[(n+this._realCol)*this.floatsPerVert+1]),cc.v2(e[(n+this._realCol+1)*this.floatsPerVert],e[(n+this._realCol+1)*this.floatsPerVert+1])]},e.prototype.setRect=function(t,e){if(!(t<0||t>=this.getRectCount())){var n=this._renderData.vDatas[0],o=Math.floor(2*t/this._realCol)*this._realCol*2+2*t%this._realCol;n[o*this.floatsPerVert]=e[0].x,n[o*this.floatsPerVert+1]=e[0].y,n[(o+1)*this.floatsPerVert]=e[1].x,n[(o+1)*this.floatsPerVert+1]=e[1].y,n[(o+this._realCol)*this.floatsPerVert]=e[2].x,n[(o+this._realCol)*this.floatsPerVert+1]=e[2].y,n[(o+this._realCol+1)*this.floatsPerVert]=e[3].x,n[(o+this._realCol+1)*this.floatsPerVert+1]=e[3].y}},e.prototype.resetData=function(t){if(t.texture){var e=t.texture.width,n=t.texture.height,o=t.step;this.row=Math.floor(n/o)+1,this.col=Math.floor(e/o)+1,this.stepRow=n/(this.row-1),this.StepCol=e/(this.col-1),this._realRow=2+2*(this.row-2),this._realCol=2+2*(this.col-2),cc.log(this.row,this.col),this.verticesCount=this._realRow*this._realCol,this.indicesCount=(this.row-1)*(this.col-1)*6,this._renderData.clear(),this.initData()}},e.prototype.getVfmt=function(){return s},e.prototype.getBuffer=function(){return cc.renderer._handle.getBuffer("mesh",this.getVfmt())},e.prototype.initData=function(){this._renderData.createQuadData(0,this.verticesFloats,this.indicesCount);for(var t=this._renderData.iDatas[0],e=0,n=0;n<this.row-1;++n)for(var o=0;o<this.col-1;++o){var i=2*n*this._realCol+2*o;t[e++]=i,t[e++]=i+1,t[e++]=i+this._realCol,t[e++]=i+1,t[e++]=i+this._realCol+1,t[e++]=i+this._realCol}},e.prototype.initLocal=function(){this._local=[],this._local.length=4},e.prototype.updateColor=function(t,e){var n=this._renderData.uintVDatas[0];if(n){e=null!=e?e:t.node.color._val;for(var o=this.floatsPerVert,i=this.colorOffset,r=0;r<this.verticesCount;r++)n[i+r*o]=e}},e.prototype.updateUVs=function(){for(var t=this,e=this.uvOffset,n=this.floatsPerVert,o=this._renderData.vDatas[0],i=0,r=function(t,i,r){var s=r*n;o[s+e]=t,o[s+e+1]=i},s=function(e){for(var n=0;n<t.col;n++){var o=n/(t.col-1);r(o,e,i++),0!==n&&n!==t.col-1&&r(o,e,i++)}},a=0;a<this.row;a++){var c=1-a/(this.row-1);s(c),0!==a&&a!==this.row-1&&s(c)}},e.prototype.updateWorldVertsWebGL=function(t){var e=this,n=this._local,o=this._renderData.vDatas[0],i=t.node._worldMatrix.m,r=i[0],s=i[1],a=i[4],c=i[5],u=i[12],l=i[13],h=n[0],p=n[2],d=n[1],f=n[3],_=1===r&&0===s&&0===a&&1===c,y=this.floatsPerVert,v=0,m=function(t,e,n){var i=y*n;o[i]=t+u,o[i+1]=e+l},g=function(t,e,n){var i=n*y;o[i]=t*r+e*a+u,o[i+1]=t*s+e*c+l},b=function(t,n){for(var o=0;o<e.col;o++){var i=o==e.col-1?p:h+o*e.StepCol;n(i,t,v++),0!==o&&o!==e.col-1&&n(i,t,v++)}};if(_)for(var w=0;w<this.row;w++)b(T=w==this.row-1?f:d+w*this.stepRow,m),0!==w&&w!==this.row-1&&b(T,m);else for(w=0;w<this.row;w++){var T;b(T=w==this.row-1?f:d+w*this.stepRow,g),0!==w&&w!==this.row-1&&b(T,g)}},e.prototype.updateWorldVertsNative=function(){var t=this._local,e=this._renderData.vDatas[0],n=this.floatsPerVert,o=t[0],i=t[2],r=t[1],s=t[3],a=0;e[a]=o,e[a+1]=r,e[a+=n]=i,e[a+1]=r,e[a+=n]=o,e[a+1]=s,e[a+=n]=i,e[a+1]=s},e.prototype.updateWorldVerts=function(t){this.updateWorldVertsWebGL(t)},e.prototype.updateVerts=function(t){var e,n,o,i,r=t.node,s=r.width,a=r.height,c=r.anchorX*s,u=r.anchorY*a;e=-c,n=-u,o=s-c,i=a-u;var l=this._local;l[0]=e,l[1]=n,l[2]=o,l[3]=i,this.updateWorldVerts(t)},e.prototype.updateRenderData=function(t){t._vertsDirty&&(this.resetData(t),this.updateUVs(t),this.updateVerts(t),t._vertsDirty=!1)},e.prototype.fillBuffers=function(t,e){e.worldMatDirty&&this.updateWorldVerts(t);var n=this._renderData,o=n.vDatas[0],i=n.iDatas[0],r=this.getBuffer(),s=r.request(this.verticesCount,this.indicesCount),a=s.byteOffset>>2,c=r._vData;o.length+a>c.length?c.set(o.subarray(0,c.length-a),a):c.set(o,a);for(var u=r._iData,l=s.indiceOffset,h=s.vertexOffset,p=0,d=i.length;p<d;p++)u[l++]=h+i[p]},e.prototype.packToDynamicAtlas=function(t,e){if(!e._original&&cc.dynamicAtlasManager&&e._texture.packable){var n=cc.dynamicAtlasManager.insertSpriteFrame(e);n&&e._setDynamicAtlasFrame(n)}var o=t._materials[0];o&&o.getProperty("texture")!==e._texture&&(t._vertsDirty=!0,t._updateMaterial())},e}(cc.Assembler);n.default=a,cc._RF.pop()},{}],MeshTexture:[function(t,e,n){"use strict";cc._RF.push(e,"1acd7QWgaNGAIz6Mkh6ICTD","MeshTexture");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},s=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function s(t){try{c(o.next(t))}catch(e){r(e)}}function a(t){try{c(o.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}c((o=o.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,o,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(t){return function(e){return c([t,e])}}function c(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,o=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(a){r=[6,a],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var c=t("../Assemblers/MeshAssembler"),u=cc._decorator,l=u.ccclass,h=u.menu,p=u.executeInEditMode,d=u.mixins,f=u.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._texture=null,e.step=10,e.srcBlendFactor=cc.macro.BlendFactor.SRC_ALPHA,e.dstBlendFactor=cc.macro.BlendFactor.ONE_MINUS_SRC_ALPHA,e._assembler=null,e}return i(e,t),Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this.node.width=t.width,this.node.height=t.height,this._updateMaterial()},enumerable:!1,configurable:!0}),e.prototype._updateVerts=function(){this.setVertsDirty()},e.prototype._updateMaterial=function(){var t=this._texture,e=this.getMaterial(0);e&&(void 0!==e.getDefine("USE_TEXTURE")&&e.define("USE_TEXTURE",!0),e.setProperty("texture",t)),this.__proto__._updateBlendFunc.call(this),this.setVertsDirty()},e.prototype._validateRender=function(){},e.prototype._resetAssembler=function(){(this._assembler=window.textureAssember=new c.default).init(this),this._updateColor(),this.setVertsDirty()},e.prototype.getPolygonCenter=function(t){for(var e=0,n=0,o=0;o<t.length;o++)e+=t[o].x,n+=t[o].y;return e/=t.length,n/=t.length,cc.v2(e,n)},e.prototype.tweenVec2=function(t,e,n,o,i,r){void 0===r&&(r=0);var s={_value:t};Object.defineProperty(s,"position",{get:function(){return s._value},set:function(t){s._value=t,o&&o(s._value)}});var a=cc.tween(s).delay(r).to(n,{position:e}).call(i);return a.start(),a},e.prototype.tweenVec2Bezier=function(t,e,n,o,i,r){void 0===r&&(r=0);var s={_value:t};Object.defineProperty(s,"position",{get:function(){return s._value},set:function(t){s._value=t,o&&o(s._value)}});var a=cc.tween(s).delay(r).bezierTo(n,cc.v2(t.x,t.y+100),cc.v2(e.x,e.y+100),e).call(i);return a.start(),a},e.prototype.doScaleEffect=function(){var t=this;return new Promise(function(e){for(var n=t._assembler.getRectCount(),o=t.node.convertToWorldSpaceAR(cc.v2(0,0)),i=function(i){var r=t._assembler.getRect(i),s=t.getPolygonCenter(r).sub(o).normalize();t.tweenVec2(cc.v2(0,0),s.mul(1.5),.3,function(e){t._assembler.setRect(i,[r[0].addSelf(e),r[1].addSelf(e),r[2].addSelf(e),r[3].addSelf(e)])},function(){i==n-1&&e(!0)})},r=0;r<n;r++)i(r)})},e.prototype.doTextureMove=function(t,e){return s(this,void 0,void 0,function(){var t,n,o,i,r,s=this;return a(this,function(){for(t=cc.v2(-1,0),"right"==e&&(t=cc.v2(1,0)),n=this._assembler.getRectCount(),this.node.convertToWorldSpaceAR(cc.v2(0,0)),o=function(e){var o=n-e-1,r=i._assembler.getRect(o),a=t.mul(400);i.tweenVec2Bezier(cc.v2(0,0),a,1,function(t){s._assembler.setRect(o,[r[0].add(t),r[1].add(t),r[2].add(t),r[3].add(t)])},function(){s._assembler.setRect(o,[r[0].add(a),r[1].add(a),r[2].add(a),r[3].add(a)])},.1*Math.floor(e/40))},i=this,r=0;r<n;r++)o(r);return[2]})})},r([f(cc.Texture2D)],e.prototype,"_texture",void 0),r([f(cc.Texture2D)],e.prototype,"texture",null),r([f({displayName:"\u6b65\u957f"})],e.prototype,"step",void 0),r([f({type:cc.Enum(cc.macro.BlendFactor),override:!0})],e.prototype,"srcBlendFactor",void 0),r([f({type:cc.Enum(cc.macro.BlendFactor),override:!0})],e.prototype,"dstBlendFactor",void 0),r([l,p,h("i18n:MAIN_MENU.component.ui/MeshTexture"),d(cc.BlendFunc)],e)}(cc.RenderComponent);n.default=_,cc._RF.pop()},{"../Assemblers/MeshAssembler":"MeshAssembler"}],ModalMgr:[function(t,e,n){"use strict";cc._RF.push(e,"9b75bodHflDGK6GhPrmOvTs","ModalMgr");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},s=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function s(t){try{c(o.next(t))}catch(e){r(e)}}function a(t){try{c(o.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}c((o=o.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,o,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(t){return function(e){return c([t,e])}}function c(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,o=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(a){r=[6,a],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var c=t("./config/SysDefine"),u=t("./UIModalScript"),l=cc._decorator,h=l.ccclass,p=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.uiModal=null,e}var n;return i(e,t),n=e,Object.defineProperty(e,"inst",{get:function(){if(null==this._inst){this._inst=new n;var t=new cc.Node("UIModalNode");n.popUpRoot=c.SysDefine.SYS_UIROOT_NAME+"/"+c.SysDefine.SYS_POPUP_NODE,cc.find(n.popUpRoot).addChild(t),this._inst.uiModal=t.addComponent(u.default),this._inst.uiModal.init()}return this._inst},enumerable:!1,configurable:!0}),e.prototype.showModal=function(t){return s(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return[4,this.uiModal.showModal(t.opacity,t.easingTime,t.isEasing,t.dualBlur)];case 1:return e.sent(),[2]}})})},e.prototype.checkModalWindow=function(t){if(t.length<=0)this.uiModal.node.active=!1;else{this.uiModal.node.active=!0,this.uiModal.node.parent&&this.uiModal.node.removeFromParent();for(var e=t.length-1;e>=0;e--)if(t[e].modalType.opacity>0){cc.find(n.popUpRoot).addChild(this.uiModal.node,Math.max(t[e].node.zIndex-1,0)),this.uiModal.fid=t[e].fid,this.showModal(t[e].modalType);break}}},e.popUpRoot="",e._inst=null,n=r([h],e)}(cc.Component));n.default=p,cc._RF.pop()},{"./UIModalScript":"UIModalScript","./config/SysDefine":"SysDefine"}],Obstacle:[function(t,e,n){"use strict";cc._RF.push(e,"eaa90oCwvRPFqm2RBIJWdZL","Obstacle");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var s=t("../Components/QuadTree"),a=cc._decorator,c=a.ccclass,u=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._quadtree=null,e._polygons=cc.js.createMap(),e}return i(e,t),e.prototype.onLoad=function(){var t=cc.view.getVisibleSize();this._quadtree=new s.default({x:0,y:0,width:t.width,height:t.height})},e.prototype.addPolygon=function(t,e){this._polygons[t]=e;var n=this._getBound(e);n.uid=t,this._quadtree.insert(n)},e.prototype.removePolygon=function(){},e.prototype.getPolygons=function(t){for(var e=[],n=0,o=this._quadtree.retrieve(t);n<o.length;n++){var i=o[n];e.push(this._polygons[i.uid])}return e},e.prototype._getBound=function(t){for(var e=t[0],n=e.x,o=e.x,i=e.y,r=e.y,a=0;a<t.length;a++)t[a].x<n&&(n=t[a].x),t[a].x>o&&(o=t[a].x),t[a].y<i&&(i=t[a].y),t[a].y>r&&(r=t[a].y);return new s.Bound(n,i,o-n,r-i)},e.prototype.clear=function(){this._quadtree.clear(),this._polygons={}},r([c],e)}(cc.Component));n.default=u,cc._RF.pop()},{"../Components/QuadTree":"QuadTree"}],PlayerMgr:[function(t,e,n){"use strict";cc._RF.push(e,"bea7406655LzLidqx+dJrtq","PlayerMgr");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onConfigChange=function(){},e}(t("./BaseMgr").BaseMgr);n.default=r,cc._RF.pop()},{"./BaseMgr":"BaseMgr"}],Player:[function(t,e,n){"use strict";cc._RF.push(e,"c6524N6VP9KkIrAUdQgv6Tz","Player");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var s=t("../Extra/Joystick"),a=cc._decorator,c=a.ccclass,u=a.property,l=t("../Extra/Joystick"),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rigidbody=!1,e.moveDir=cc.v2(0,1),e._speedType=s.SpeedType.STOP,e._moveSpeed=0,e.stopSpeed=0,e.normalSpeed=100,e.fastSpeed=200,e.PlayerCamera=null,e}return i(e,t),e.prototype.onLoad=function(){this.rigidbody&&(cc.director.getPhysicsManager().enabled=!0,this._body=this.getComponent(cc.RigidBody)),l.instance.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),l.instance.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),l.instance.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this)},e.prototype.onTouchStart=function(){},e.prototype.onTouchMove=function(t,e){this._speedType=e.speedType,this.moveDir=e.moveDistance},e.prototype.onTouchEnd=function(t,e){this._speedType=e.speedType},e.prototype.move=function(){if(this.node.angle=cc.misc.radiansToDegrees(Math.atan2(this.moveDir.y,this.moveDir.x))-90,this.rigidbody)this._body.applyForceToCenter(cc.v2(200*this.moveDir.x,200*this.moveDir.y),!0);else{var t=cc.v2();this.node.getPosition(t);var e=t.add(this.moveDir.mul(this._moveSpeed/120));this.node.setPosition(e)}},e.prototype.update=function(){switch(this._speedType){case s.SpeedType.STOP:this._moveSpeed=this.stopSpeed;break;case s.SpeedType.NORMAL:this._moveSpeed=this.normalSpeed;break;case s.SpeedType.FAST:this._moveSpeed=this.fastSpeed}this._speedType!==s.SpeedType.STOP&&this.move()},r([u({displayName:"\u521a\u4f53\u6a21\u5f0f",tooltip:"\u4e0d\u4f1a\u7acb\u5373\u505c\u6b62"})],e.prototype,"rigidbody",void 0),r([u({displayName:"Move Dir",tooltip:"\u79fb\u52a8\u65b9\u5411"})],e.prototype,"moveDir",void 0),r([u({displayName:"Speed Type",tooltip:"\u901f\u5ea6\u7ea7\u522b"})],e.prototype,"_speedType",void 0),r([u({type:cc.Integer,displayName:"Move Speed",tooltip:"\u79fb\u52a8\u901f\u5ea6"})],e.prototype,"_moveSpeed",void 0),r([u({type:cc.Integer,displayName:"Stop Speed",tooltip:"\u505c\u6b62\u65f6\u901f\u5ea6"})],e.prototype,"stopSpeed",void 0),r([u({type:cc.Integer,tooltip:"\u6b63\u5e38\u901f\u5ea6"})],e.prototype,"normalSpeed",void 0),r([u({type:cc.Integer,tooltip:"\u6700\u5feb\u901f\u5ea6"})],e.prototype,"fastSpeed",void 0),r([u(cc.Camera)],e.prototype,"PlayerCamera",void 0),r([c],e)}(cc.Component);n.default=h,cc._RF.pop()},{"../Extra/Joystick":"Joystick"}],PolygonUtil:[function(t,e,n){"use strict";cc._RF.push(e,"97fd0nhC4FP37VI4oHddHl0","PolygonUtil"),Object.defineProperty(n,"__esModule",{value:!0}),n.PolygonUtil=void 0;var o=function(){function t(){}return t.splitPolygonByLine=function(t,e,n,o){void 0===o&&(o=!1);for(var i=[],r=n.length-1;r>=0;r--){var s=n[r],a=0==r?n[n.length-1]:n[r-1],c=this.lineCrossPoint(s,a,t,e),u=c[0],l=c[1];-1!=u&&(n.splice(r,-1,l),i.push(r+1))}return i},t.lineCrossPoint=function(t,e,n,o){var i,r,s,a,c,u,l=t,h=e,p=n,d=o,f=new cc.Vec2(0,0);return s=this.dblcmp(i=this.ab_cross_ac(l,h,p),0),a=this.dblcmp(r=this.ab_cross_ac(l,h,d),0),c=this.dblcmp(this.ab_cross_ac(p,d,l),0),u=this.dblcmp(this.ab_cross_ac(p,d,h),0),-2==(s^a)&&-2==(c^u)?(f.x=(p.x*r-d.x*i)/(r-i),f.y=(p.y*r-d.y*i)/(r-i),[0,f]):0==s&&this.point_on_line(p,l,h)<=0?[1,f=p]:0==a&&this.point_on_line(d,l,h)<=0?[1,f=d]:0==c&&this.point_on_line(l,p,d)<=0?[1,f=l]:0==u&&this.point_on_line(h,p,d)<=0?[1,f=h]:[-1,null]},t.isLineSegmentCross=function(t,e,n,o){return((n.x-t.x)*(n.y-o.y)-(n.y-t.y)*(n.x-o.x))*((n.x-e.x)*(n.y-o.y)-(n.y-e.y)*(n.x-o.x))<0||((t.x-n.x)*(t.y-e.y)-(t.y-n.y)*(t.x-e.x))*((t.x-o.x)*(t.y-e.y)-(t.y-o.y)*(t.x-e.x))<0},t.point_on_line=function(t,e,n){return this.dblcmp(this.dot(e.x-t.x,e.y-t.y,n.x-t.x,n.y-t.y),0)},t.rayPointToLine=function(t,e,n){Math.min(e.x,n.x);var o=Math.max(e.x,n.x),i=Math.min(e.y,n.y),r=Math.max(e.y,n.y);if(t.y<i||t.y>r||t.x>o)return-1;var s=e.x+(n.x-e.x)/(n.y-e.y)*(t.y-e.y);return s>t.x?0:s==t.x?1:-1},t.relationPointToPolygon=function(t,e){for(var n=0,o=0;o<e.length;++o){if(e[o].equals(t))return 2;var i=e[o],r=e[0];o<e.length-1&&(r=e[o+1]);var s=this.rayPointToLine(t,i,r);if(1==s)return 1;0==s&&n++}return n%2==0?-1:0},t.lineCutPolygon=function(t,e,n){for(var o=[],i=[],r=[],s=0;s<n.length;++s){i.push(n[s]);var a=n[s],c=n[0];s<n.length-1&&(c=n[s+1]);var u=this.lineCrossPoint(t,e,a,c);0==u[0]?(r.push(i.length),i.push(u[1])):u[0]>0&&(u[1].equals(a)?r.push(i.length-1):r.push(i.length))}if(r.length>1){var l=i[r[0]],h=i[r[1]],p=this.relationPointToPolygon(new cc.Vec2((l.x+h.x)/2,(l.y+h.y)/2),n),d=p>=0;r.length>2&&l.sub(h).mag()>l.sub(i[r[r.length-1]]).mag()&&(h=i[r[r.length-1]],d=(p=this.relationPointToPolygon(new cc.Vec2((l.x+h.x)/2,(l.y+h.y)/2),n))<0);var f=d,_=0,y=r[_],v=[],m=[],g=0;for(v.push(i[y]),d&&m.push(i[y]),_++,g++,y++;g<i.length;){y==i.length&&(y=0);var b=i[y];_>=0&&y==r[_]?(++_>=r.length&&(_=0),d?(m.push(b),o.push(m),m=[]):(m=[]).push(b),v.push(b),d=!d):d?m.push(b):v.push(b),y++,g++}if(d)if(!f&&m.length>1)m.push(i[r[0]]),o.push(m);else for(s=0;s<m.length;++s)v.push(m[s]);o.push(v)}return o},t.ab_cross_ac=function(t,e,n){return this.cross(e.x-t.x,e.y-t.y,n.x-t.x,n.y-t.y)},t.dot=function(t,e,n,o){return t*n+e*o},t.cross=function(t,e,n,o){return t*o-n*e},t.dblcmp=function(t,e){return Math.abs(t-e)<=1e-6?0:t>e?1:-1},t}();n.PolygonUtil=o,cc._RF.pop()},{}],Pool:[function(t,e,n){"use strict";cc._RF.push(e,"284d8zxqTdJtYjT+CGS5XDE","Pool"),Object.defineProperty(n,"__esModule",{value:!0}),n.Pool=void 0;var o=function(){function t(t,e){this._fn=t,this._idx=e-1,this._frees=new Array(e);for(var n=0;n<e;n++)this._frees[n]=t()}return Object.defineProperty(t.prototype,"freeCount",{get:function(){return this._frees.length},enumerable:!1,configurable:!0}),t.prototype.alloc=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._idx<0&&this._expand(Math.round(1.2*this._frees.length)+1);var n=this._frees[this._idx];return this._frees.splice(this._idx),--this._idx,n.use&&n.use.apply(n,t),n},t.prototype.free=function(t){++this._idx,t.free&&t.free(),this._frees[this._idx]=t},t.prototype.clear=function(t){for(var e=0;e<this._idx;e++)t&&t(this._frees[e]);this._frees.splice(0),this._idx=-1},t.prototype._expand=function(t){var e=this._frees;this._frees=new Array(t);for(var n=t-e.length,o=0;o<n;o++)this._frees[o]=this._fn();o=n;for(var i=0;o<t;++o,++i)this._frees[o]=e[i];this._idx+=n},t}();n.Pool=o,cc._RF.pop()},{}],PriorityQueue:[function(t,e,n){"use strict";cc._RF.push(e,"f2318nn5GJChLoRevUhhLkg","PriorityQueue"),Object.defineProperty(n,"__esModule",{value:!0}),n.PriorityElement=void 0;var o=function(t,e){this.data=t,this.priority=e};n.PriorityElement=o;var i=function(){function t(){this.queue=new Array(32),this._size=0}return Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),t.prototype.hasElement=function(t){for(var e=0,n=this.queue;e<n.length;e++)if(n[e].data===t)return!0;return!1},t.prototype.enqueue=function(t,e){void 0===e&&(e=0),this._size>this.queue.length&&this._expand(),this.queue[this._size++]=new o(t,e),this.upAdjust()},t.prototype.dequeue=function(){if(this._size<=0)return null;var t=this.queue[0];return this.queue[0]=this.queue[--this._size],this.downAdjust(),t.data},t.prototype.clear=function(){this.queue=[],this._size=0},t.prototype.upAdjust=function(){for(var t=this._size-1,e=Math.floor(t/2),n=this.queue[t];t>0&&n.priority>this.queue[e].priority;)this.queue[t]=this.queue[e],t=e,e=Math.floor(e/2);this.queue[t]=n},t.prototype.downAdjust=function(){for(var t=0,e=this.queue[t],n=1;n<this._size&&(n+1<this._size&&this.queue[n+1].priority>this.queue[n].priority&&n++,!(e.priority>=this.queue[n].priority));)this.queue[t]=this.queue[n],t=n,n=2*n+1;this.queue[t]=e},t.prototype._expand=function(){var t=Math.round(1.2*this.queue.length)+1,e=this.queue;this.queue=new Array(t);for(var n=0;n<e.length;n++)this.queue[n]=e[n]},t.prototype.toString=function(){for(var t="",e=0;e<this._size;e++){var n=this.queue[e].data;n.toString?t+=n.toString():t+="object"==typeof n?JSON.stringify(n):n}return t},t}();n.default=i,cc._RF.pop()},{}],PriorityStack:[function(t,e,n){"use strict";cc._RF.push(e,"9ed15uYIzxGna5Bj3+zkuo8","PriorityStack"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./PriorityQueue"),i=function(){function t(t){this.compare=function(t,e){return t===e},this.stack=new Array,this._size=0,this.compare=t}return Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),t.prototype.clear=function(){return this.stack.length=0,this._size=0,!0},t.prototype.getTopEPriority=function(){return this.stack.length<=0?-1:this.stack[this.stack.length-1].priority},t.prototype.getTopElement=function(){return this.stack.length<=0?null:this.stack[this.stack.length-1].data},t.prototype.getElements=function(){for(var t=[],e=0,n=this.stack;e<n.length;e++){var o=n[e];t.push(o.data)}return t},t.prototype.push=function(t,e){void 0===e&&(e=0),this.stack.push(new o.PriorityElement(t,e)),this._size++,this._adjust()},t.prototype.pop=function(){return this.stack.length<=0?null:(this._size--,this.stack.pop().data)},t.prototype._adjust=function(){for(var t=this.stack.length-1;t>0;t--)this.stack[t].priority<this.stack[t-1].priority&&this._swap(t,t-1)},t.prototype._swap=function(t,e){var n=this.stack[t];this.stack[t]=this.stack[e],this.stack[e]=n},t.prototype.hasElement=function(t){for(var e=0,n=this.stack;e<n.length;e++){var o=n[e];if(this.compare(o.data,t))return!0}return!1},t.prototype.remove=function(t){for(var e=this.stack.length-1;e>=0;e--)if(this.compare(this.stack[e].data,t))return this.stack.splice(e,1),this._size--,!0;return!1},t}();n.default=i,cc._RF.pop()},{"./PriorityQueue":"PriorityQueue"}],PropBind:[function(t,e,n){"use strict";cc._RF.push(e,"2f9f8Tv5WdH8a3E1C7Bm4Ro","PropBind"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){}return t.prototype.bind=function(){},t}();n.default=o,cc._RF.pop()},{}],PropController:[function(t,e,n){"use strict";cc._RF.push(e,"9c55bh8k9BD0JhzsvfCJYNE","PropController");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0}),n.NodePathType=void 0;var s,a=t("./PropSelector");(function(t){t[t.Name=0]="Name",t[t.SiblingIndex=1]="SiblingIndex"})(s=n.NodePathType||(n.NodePathType={})),cc.NodePathType=s;var c=cc._decorator,u=c.ccclass,l=c.executeInEditMode,h=c.menu,p=c.inspector,d=c.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nodePathType=s.SiblingIndex,e.open=!0,e._uid="",e._state=0,e._states=[],e.propertyJson="",e}return i(e,t),Object.defineProperty(e.prototype,"uid",{get:function(){return this._uid},set:function(t){this._uid=t,this._refreshIdEnum()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},set:function(t){this._state=t,this.doControl(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"states",{get:function(){return this._states},set:function(t){this._states=t,this._refresh()},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.open=!1,this._refresh(),this._refreshIdEnum()},e.prototype.start=function(){},e.prototype.doControl=function(t){var e=t,n=JSON.parse(this.propertyJson)[e];for(var o in n){var i=o.split(":"),r=null;switch(+i[0]){case s.Name:r=cc.find(i[1],this.node);break;case s.SiblingIndex:r=this._getNodeBySiblingIndex(i[1],this.node)}if(r){var a=n[o];for(var c in a){var u=_[c];u&&u(r,a[c])}}else cc.warn("find node faild, path:",o)}},e.prototype._getNodeBySiblingIndex=function(t,e){for(var n=0,o=(t="/"==t[0]?t.substring(1):t).split("/");n<o.length;n++){var i=o[n];e=e.children[+i]}return e},e.prototype._refresh=function(){},e.prototype._refreshIdEnum=function(){},r([d({type:cc.Enum(s),tooltip:"Name: \u6839\u636enode name\u4fdd\u5b58, SiblingIndex: \u6839\u636enode \u5728children\u7684index\u4fdd\u5b58"})],e.prototype,"nodePathType",void 0),r([d({tooltip:"\u662f\u5426\u542f\u7528\u63a7\u5236\u5668"})],e.prototype,"open",void 0),r([d({serializable:!0})],e.prototype,"_uid",void 0),r([d],e.prototype,"uid",null),r([d({type:cc.Enum({})})],e.prototype,"_state",void 0),r([d({type:cc.Enum({})})],e.prototype,"state",null),r([d],e.prototype,"_states",void 0),r([d([cc.String])],e.prototype,"states",null),r([d()],e.prototype,"propertyJson",void 0),r([u,l,h("i18n:\u72b6\u6001\u63a7\u5236/PropController"),p("packages://propcontroller/dist/inspector.js")],e)}(cc.Component);n.default=f;var _={};function y(t,e){_[t]&&cc.warn(""),_[t]=e}y(a.PropEmum.All,function(t,e){var n=e.node;for(var o in t.active=n.active,t.setPosition(n.position),t.angle=n.angle,t.scaleX=n.scale.scaleX,t.scaleY=n.scale.scaleY,t.anchorX=n.anchor.anchorX,t.anchorY=n.anchor.anchorY,t.setContentSize(n.size),t.color=new cc.Color(n.color.r,n.color.g,n.color.b),t.opacity=n.opacity,e.coms){var i=e.coms[o];o=o.replace("_",".");var r=t.getComponent(o);for(var s in i)s.startsWith("_")||(r[s]=i[s])}}),y(a.PropEmum.Active,function(t,e){t.active=e}),y(a.PropEmum.Position,function(t,e){t.setPosition(e)}),y(a.PropEmum.Color,function(t,e){t.color=new cc.Color(e.r,e.g,e.b)}),y(a.PropEmum.Scale,function(t,e){t.scaleX=e.scaleX,t.scaleY=e.scaleY}),y(a.PropEmum.Rotation,function(t,e){t.angle=e}),y(a.PropEmum.Opacity,function(t,e){t.opacity=e}),y(a.PropEmum.Slew,function(t,e){t.skewX=e.skewX,t.skewY=e.skewY}),y(a.PropEmum.Size,function(t,e){t.setContentSize(e)}),y(a.PropEmum.Anchor,function(t,e){t.anchorX=e.anchorX,t.anchorY=e.anchorY}),y(a.PropEmum.Label_String,function(t,e){t.getComponent(cc.Label).string=e}),y(a.PropEmum.Sprite_Texture,function(t,e){var n,o=null!==(n=e.url)&&void 0!==n?n:"";e.uuid,o.includes("resources")&&(o=(o=o.replace("resources/","")).split(".")[0]),cc.resources.load(o,cc.Texture2D,function(e,n){e?Editor.warn("PropController  load sprite texture faild",o,e):t.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(n)})}),cc._RF.pop()},{"./PropSelector":"PropSelector"}],PropSelector:[function(t,e,n){"use strict";cc._RF.push(e,"95cf9sVxtJHbIz3btfe766G","PropSelector");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0}),n.PropEmum=void 0;var s,a=cc._decorator,c=a.ccclass,u=a.executeInEditMode,l=a.menu,h=a.property;(function(t){t[t.All=0]="All",t[t.Active=1]="Active",t[t.Position=2]="Position",t[t.Rotation=3]="Rotation",t[t.Scale=4]="Scale",t[t.Anchor=5]="Anchor",t[t.Size=6]="Size",t[t.Color=7]="Color",t[t.Opacity=8]="Opacity",t[t.Slew=9]="Slew",t[t.Label_String=10]="Label_String",t[t.Sprite_Texture=11]="Sprite_Texture"})(s=n.PropEmum||(n.PropEmum={})),cc.PropEmum=s,cc.Enum({});var p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.props=[0],e}return i(e,t),r([h({type:[cc.Enum(s)],tooltip:"\u88ab\u63a7\u5236\u7684\u5c5e\u6027"})],e.prototype,"props",void 0),r([c,l("i18n:\u72b6\u6001\u63a7\u5236/PropSelector"),u],e)}(cc.Component);n.default=p,cc._RF.pop()},{}],QuadTree:[function(t,e,n){"use strict";cc._RF.push(e,"97092zpFuhN/oWHIMkF7jei","QuadTree"),Object.defineProperty(n,"__esModule",{value:!0}),n.Bound=void 0;n.Bound=function(t,e,n,o,i){void 0===i&&(i=""),this.x=t,this.y=e,this.width=n,this.height=o,this.uid=i};var o=function(){function t(t,e,n,o){this._maxObject=10,this._maxLevel=4,this._level=0,this._bound=null,this._objects=[],this._nodes=[],this._bound=t,this._maxObject=e||this._maxObject,this._maxLevel=n||this._maxLevel,this._level=o||this._level}return t.prototype.split=function(){var e=this._level+1,n=this._bound.width/2,o=this._bound.height/2,i=this._bound.x,r=this._bound.y;this._nodes[0]=new t({uid:e+"-top-right",x:i+n,y:r,width:n,height:o},this._maxObject,this._maxLevel,e),this._nodes[1]=new t({uid:e+"-top-left",x:i,y:r,width:n,height:o},this._maxObject,this._maxLevel,e),this._nodes[2]=new t({uid:e+"-bottom-left",x:i,y:r+o,width:n,height:o},this._maxObject,this._maxLevel,e),this._nodes[3]=new t({uid:e+"-bottom-right",x:i+n,y:r+o,width:n,height:o},this._maxObject,this._maxLevel,e)},t.prototype.getIndex=function(t){var e=[],n=this._bound.x+this._bound.width/2,o=this._bound.y+this._bound.height/2,i=t.y<o,r=t.x<n,s=t.x+t.width>n,a=t.y+t.height>o;return i&&s&&e.push(0),r&&i&&e.push(1),r&&a&&e.push(2),s&&a&&e.push(3),e},t.prototype.insert=function(t){var e=0,n=[];if(this._nodes.length)for(n=this.getIndex(t),e=0;e<n.length;e++)this._nodes[n[e]].insert(t);else if(this._objects.push(t),this._objects.length>this._maxObject&&this._level<this._maxLevel){for(this._nodes.length||this.split(),e=0;e<this._objects.length;e++){n=this.getIndex(this._objects[e]);for(var o=0;o<n.length;o++)this._nodes[n[o]].insert(this._objects[e])}this._objects=[]}},t.prototype.retrieve=function(t){var e=this.getIndex(t),n=this._objects;if(this._nodes.length)for(var o=0;o<e.length;o++)n=n.concat(this._nodes[e[o]].retrieve(t));return n=n.filter(function(t,e){return n.indexOf(t)>=e})},t.prototype.clear=function(){this._objects=[];for(var t=0;t<this._nodes.length;t++)this._nodes.length&&this._nodes[t].clear();this._nodes=[]},t}();n.default=o,cc._RF.pop()},{}],Queue:[function(t,e,n){"use strict";cc._RF.push(e,"146d9Q6AJVLm5Z5V9zs9sHL","Queue"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){this.count=0,this.lowestCount=0,this.items={}}return t.prototype.enqueue=function(t){this.items[this.count]=t,this.count++},t.prototype.dequeue=function(){if(!this.isEmpty()){var t=this.items[this.lowestCount];return delete this.items[this.lowestCount],this.lowestCount++,t}},t.prototype.peek=function(){if(!this.isEmpty())return this.items[this.lowestCount]},t.prototype.isEmpty=function(){return 0===this.size()},t.prototype.clear=function(){this.items={},this.count=0,this.lowestCount=0},t.prototype.size=function(){return this.count-this.lowestCount},t.prototype.toString=function(){if(this.isEmpty())return"";for(var t=""+this.items[this.lowestCount],e=this.lowestCount+1;e<this.count;e++)t=t+","+this.items[e];return t},t}();n.default=o,cc._RF.pop()},{}],RawItem:[function(t,e,n){"use strict";cc._RF.push(e,"ba46bd5sDpHoJSuHZGhdI7j","RawItem");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var s=t("../../Common/Components/ListItem"),a=t("../../Common/Utils/CommonUtils"),c=t("../../Config/GlobalData"),u=t("../../UIScript/UIWorkDesk"),l=cc._decorator,h=l.ccclass,p=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.itemData=null,e.desk=null,e}return i(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this)},e.prototype.start=function(){this.registerEvent()},e.prototype.registerEvent=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.desk.dragMove.bind(this.desk),this),this.node.on(cc.Node.EventType.TOUCH_END,this.desk.dragEnd.bind(this.desk),this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.desk.dragEnd.bind(this.desk),this)},e.prototype.unRegisterEvent=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.desk.dragMove.bind(this.desk),this),this.node.off(cc.Node.EventType.TOUCH_END,this.desk.dragEnd.bind(this.desk),this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.desk.dragEnd.bind(this.desk),this)},e.prototype.touchStart=function(t){this.desk.dragNode(t,this,u.DragType.Raw)},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this.unRegisterEvent()},e.prototype.onClickThis=function(){t.prototype.onClickThis.call(this),console.log("RawItem onClickThis")},e.prototype.initUi=function(t,e){this.itemData=t,this.desk=e,this.title.getComponent(cc.Label).string=t.name,a.CommonUtils.setItemSpriteFrame(this.icon,""+c.GlobalData.rawPath+t.id)},r([h],e)}(s.default));n.default=p,cc._RF.pop()},{"../../Common/Components/ListItem":"ListItem","../../Common/Utils/CommonUtils":"CommonUtils","../../Config/GlobalData":"GlobalData","../../UIScript/UIWorkDesk":"UIWorkDesk"}],RawMaterial:[function(t,e,n){"use strict";cc._RF.push(e,"134487N1MJIzIe1T0+0PwIs","RawMaterial"),Object.defineProperty(n,"__esModule",{value:!0}),n.Recipe=n.RawMaterial=void 0,n.RawMaterial=[{id:2001,name:"\u6c34"},{id:2002,name:"\u5496\u5561\u8c46"},{id:2003,name:"\u51b0"},{id:2004,name:"\u725b\u5976"},{id:2005,name:"\u5de7\u514b\u529b"},{id:2006,name:"\u6930\u5b50"}],n.Recipe=[{ID:1001,Name:"\u6c34",raw1:"\u6c34",raw2:"",raw3:"",raw4:"",raw5:"",raw6:"",diff:"",price:1},{ID:1002,Name:"\u610f\u5f0f\u6d53\u7f29\u5496\u5561",raw1:"\u5496\u5561\u8c46",raw2:"",raw3:"",raw4:"",raw5:"",raw6:"",diff:"",price:2},{ID:1003,Name:"%s\u7f8e\u5f0f",raw1:"\u6c34",raw2:"\u5496\u5561\u8c46",raw3:"",raw4:"",raw5:"",raw6:"/",diff:"\u70ed/\u51b0",price:3},{ID:1004,Name:"%s\u62ff\u94c1",raw1:"\u725b\u5976",raw2:"\u5496\u5561\u8c46",raw3:"",raw4:"",raw5:"",raw6:"/",diff:"\u70ed/\u51b0",price:5},{ID:1005,Name:"\u6469\u5361",raw1:"\u725b\u5976",raw2:"\u5496\u5561\u8c46",raw3:"\u5de7\u514b\u529b",raw4:"",raw5:"",raw6:"",diff:"",price:9},{ID:1006,Name:"\u70ed\u5de7\u514b\u529b",raw1:"\u5de7\u514b\u529b",raw2:"",raw3:"",raw4:"",raw5:"",raw6:"",diff:"",price:4},{ID:1007,Name:"%s\u6930\u6c41",raw1:"\u6930\u5b50",raw2:"",raw3:"",raw4:"",raw5:"",raw6:"/",diff:"/\u51b0",price:4},{ID:1008,Name:"\u6930\u6c41%s\u62ff\u94c1",raw1:"\u6930\u5b50",raw2:"\u725b\u5976",raw3:"\u5496\u5561\u8c46",raw4:"",raw5:"",raw6:"/",diff:"/\u51b0",price:10},{ID:1009,Name:"\u5de7\u514b\u529b\u725b\u5976",raw1:"\u5de7\u514b\u529b",raw2:"\u725b\u5976",raw3:"",raw4:"",raw5:"",raw6:"",diff:"",price:7},{ID:1010,Name:"",raw1:"",raw2:"",raw3:"",raw4:"",raw5:"",raw6:"",diff:"",price:""},{ID:1011,Name:"",raw1:"",raw2:"",raw3:"",raw4:"",raw5:"",raw6:"",diff:"",price:""},{ID:1012,Name:"",raw1:"",raw2:"",raw3:"",raw4:"",raw5:"",raw6:"",diff:"",price:""},{ID:1013,Name:"",raw1:"",raw2:"",raw3:"",raw4:"",raw5:"",raw6:"",diff:"",price:""},{ID:1014,Name:"",raw1:"",raw2:"",raw3:"",raw4:"",raw5:"",raw6:"",diff:"",price:""},{ID:1015,Name:"",raw1:"",raw2:"",raw3:"",raw4:"",raw5:"",raw6:"",diff:"",price:""},{ID:1016,Name:"",raw1:"",raw2:"",raw3:"",raw4:"",raw5:"",raw6:"",diff:"",price:""}],cc._RF.pop()},{}],RecycleScroll:[function(t,e,n){"use strict";cc._RF.push(e,"0d95cDuDTpNHL3GyMiGr8Cr","RecycleScroll");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var s=cc._decorator,a=s.ccclass,c=s.property,u=s.menu,l=0,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.itemPrefab=null,e.spacing=cc.Vec2.ZERO,e.offsetContentHeight=0,e.parentContent=null,e._numItems=0,e._tempContentHeight=0,e.isDown=!0,e._viewCol=0,e._viewRow=0,e._viewW=0,e._viewH=0,e._itemW=0,e._itemH=0,e._lastPosY=0,e._isInit=!1,e._itemsUUIDToIndex={},e._fleshInterval=.2,e._fleshCounter=0,e._initTimer=.05,e._initCounter=0,e._isResize=!1,e._itemStartPos=cc.Vec2.ZERO,e._isResizeFinish=!1,e._lineIndex=-1,e.itemList=[],e.content=null,e}return i(e,t),Object.defineProperty(e.prototype,"numItems",{get:function(){return this._numItems},set:function(t){this._numItems=t,this._hideAllItems(),this._initialize(),this._updateContentHeight(),this.updateAllItems()},enumerable:!1,configurable:!0}),e.prototype.onItemRender=function(){},e.prototype.onItemClicked=function(){},e.prototype.updateAllItems=function(){var t=this;this.itemList.forEach(function(e){return t._updateItem(t._itemsUUIDToIndex[e.uuid],e,!0)})},e.prototype.scrollToIndexVertical=function(t,e){void 0===e&&(e=.2);var n=this._getContentUTF(),o=this._itemH*t/(n.height-this._viewH);this.node.getComponent(cc.ScrollView).scrollToPercentVertical(1-o,e)},e.prototype.getItemDirPos=function(t){var e=t%this._viewCol*this._itemW,n=-Math.floor(t/this._viewCol)*this._itemH+(this.spacing.y>>1),o=this._getContentUTF().convertToWorldSpaceAR(cc.v3(e,n)),i=this._getContentUTF().parent.convertToNodeSpaceAR(o);return[i.x<-this._viewW/2?-1:i.x>this._viewW/2?1:0,i.y<-this._viewH/2?-1:i.y>this._viewH/2?1:0]},e.prototype.onLoad=function(){this.node.on(cc.Node.EventType.SIZE_CHANGED,this.onSizeChange,this)},e.prototype.onSizeChange=function(){this._isResize=!0,this._initCounter=0,this._itemsUUIDToIndex={},this._getContentUTF().removeAllChildren()},e.prototype.onDestroy=function(){this.node.targetOff(this)},e.prototype._hideAllItems=function(){this.itemList.forEach(function(t){return t.active=!1})},e.prototype._getContentUTF=function(){return this.node.getComponent(cc.ScrollView).content},e.prototype._initialize=function(){var t=this;if(!this._isInit){var e=this.node.getComponent(cc.ScrollView);e.enabled=!1,this._isInit=!0;var n=this._getContentUTF();this.content=n,n.removeAllChildren(),this.itemList=[];var o=n.parent;this._viewW=o.width,this._viewH=o.height;var i=this.itemPrefab.data;this._itemW=i.width+this.spacing.x,this._itemH=i.height+this.spacing.y,this._lastPosY=n.position.y,this._viewRow=Math.ceil(this._viewH/this._itemH)+1,this._viewCol=Math.floor(this._viewW/this._itemW);var r=this._viewW-this._viewCol*this._itemW,s=cc.v2((-this._viewW>>1)+(this._itemW>>1)+(r>>1),-this._itemH>>1);this._itemStartPos=s;var a=this._viewRow*this._viewCol;console.log("\u5b9e\u4f8b\u5316\u6570\u91cf:"+a);var c=0;p(a,function(o){if(cc.isValid(n)){var i=cc.instantiate(t.itemPrefab);i.parent=n;var r=o%t._viewCol*t._itemW,u=-Math.floor(o/t._viewCol)*t._itemH+(t.spacing.y>>1),l=cc.v3(r+s.x,u+s.y);i.setPosition(l),i.on(cc.Node.EventType.TOUCH_END,function(){t.onItemClicked(t._itemsUUIDToIndex[i.uuid],i)},t),t.itemList[o]=i,i.needRender=!0,t._updateItem(o,i),t._itemsUUIDToIndex[i.uuid]=o,++c==a&&(e.enabled=!0)}},16,0,++l)}},e.prototype._updateContentHeight=function(){var t=this._getContentUTF(),e=Math.floor(this._viewW/this._itemW),n=Math.ceil(this.numItems/e);t.height=(n+4)*(this.itemPrefab.data.height+this.spacing.y)-this.spacing.y+this.offsetContentHeight},e.prototype._getPosInView=function(t){var e=this._getContentUTF(),n=e.parent,o=e.convertToWorldSpaceAR(t.position);return n.convertToNodeSpaceAR(o)},e.prototype._updateItem=function(t,e,n){void 0===n&&(n=!1);var o=t>=0&&t<this.numItems;e.active=o,o&&(e.needRender||n)&&(this.onItemRender(t,e),e.needRender=!1)},e.prototype.update=function(t){if(this._isResize)return this._initCounter+=t,void(this._initCounter>=this._initTimer&&(this._isInit=!1,this._isResize=!1,this.numItems=this._numItems,this._isResizeFinish=!0));var e=this._getContentUTF().position.y,n=e-this._lastPosY;if(this._lastPosY=e,this._fleshCounter+=t,0!=n||this._isResizeFinish){var o=n<0;this.isDown=o;var i=this._viewH>>1,r=this._itemH>>1,s=Math.floor((e-i)/this._itemH),a=this._lineIndex!=s;if(a||this._isResizeFinish){this._isResizeFinish=!1,this._lineIndex=s;for(var c=this._itemH*this._viewRow,u=this._viewRow*this._viewCol,l=Math.floor((e-i)/c),h=this.itemList.length,p=0;p<h;++p){var d=p,f=this.itemList[p],_=d%this._viewCol*this._itemW,y=-Math.floor(d/this._viewCol)*this._itemH+(this.spacing.y>>1),v=cc.v3(_+this._itemStartPos.x,y+this._itemStartPos.y-l*c);f.setPosition(v);var m=this._getPosInView(f),g=this._itemsUUIDToIndex[f.uuid],b=l*u+p;o?(m.y>=i+r&&(f.setPosition(cc.v3(f.position.x,f.position.y-this._viewRow*this._itemH)),b+=h),a&&this._getPosInView(f).y<=-(i+r)&&(f.setPosition(cc.v3(f.position.x,f.position.y+this._viewRow*this._itemH)),b-=h)):m.y>=i+r&&(f.setPosition(cc.v3(f.position.x,f.position.y-this._viewRow*this._itemH)),b+=h),b!=g&&(f.needRender=!0,this._updateItem(b,f)),this._itemsUUIDToIndex[f.uuid]=b}}}},r([c(cc.Prefab)],e.prototype,"itemPrefab",void 0),r([c(cc.Vec2)],e.prototype,"spacing",void 0),r([c(Number)],e.prototype,"offsetContentHeight",void 0),r([c(cc.Node)],e.prototype,"parentContent",void 0),r([a("RecycleScroll"),u("\u6027\u80fd\u4f18\u5316/RecycleScroll")],e)}(cc.Component);function p(t,e,n,o,i){void 0===n&&(n=16),void 0===o&&(o=0),void 0===i&&(i=0);for(var r=t,s=(new Date).getTime(),a=0;a<r&&i==l&&!(o>=r);++a){try{e&&e(o)}catch(c){cc.error(c)}if(o++,(new Date).getTime()-s>n){setTimeout(function(){p(r,e,n,o,i)},10);break}}}n.default=h,cc._RF.pop()},{}],ResMgr:[function(t,e,n){"use strict";cc._RF.push(e,"de5dbVuBfFIMLLJqz5PKFHB","ResMgr");var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function s(t){try{c(o.next(t))}catch(e){r(e)}}function a(t){try{c(o.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}c((o=o.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,o,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(t){return function(e){return c([t,e])}}function c(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,o=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(a){r=[6,a],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./CocosHelper"),s=function(){function t(){this._prefabDepends=cc.js.createMap(),this._dynamicTags=cc.js.createMap(),this._tmpAssetsDepends=[],this._assetsReference=cc.js.createMap(),this._prefabs=cc.js.createMap()}return Object.defineProperty(t,"inst",{get:function(){return null===this.instance&&(this.instance=new t),this.instance},enumerable:!1,configurable:!0}),t.prototype.getFormPrefab=function(t){return this._prefabs[t]},t.prototype.loadFormPrefab=function(t){return o(this,void 0,void 0,function(){var e,n,o;return i(this,function(i){switch(i.label){case 0:return this._prefabs[t]?[2,this._prefabs[t]]:[4,this._loadResWithReference(t,cc.Prefab)];case 1:return e=i.sent(),n=e.res,o=e.deps,this._prefabDepends[t]=o,this._prefabs[t]=n,[2,n]}})})},t.prototype.destoryFormPrefab=function(t){this._prefabs[t]&&(this._prefabs[t].destroy(),this._prefabs[t]=null,delete this._prefabs[t]),this._destoryResWithReference(this._prefabDepends[t]),this._prefabDepends[t]=null,delete this._prefabDepends[t]},t.prototype.loadDynamicRes=function(t,e,n){return o(this,void 0,void 0,function(){var o,r,s,a;return i(this,function(i){switch(i.label){case 0:return[4,this._loadResWithReference(t,e)];case 1:return o=i.sent(),r=o.res,s=o.deps,this._dynamicTags[n]||(this._dynamicTags[n]=[]),(a=this._dynamicTags[n]).push.apply(a,s),[2,r]}})})},t.prototype.destoryDynamicRes=function(t){return!!this._dynamicTags[t]&&(this._destoryResWithReference(this._dynamicTags[t]),this._dynamicTags[t]=null,delete this._dynamicTags[t],!0)},t.prototype._loadResWithReference=function(t,e){return o(this,void 0,void 0,function(){var n,o;return i(this,function(i){switch(i.label){case 0:return[4,r.default.loadResSync(t,e,this._addTmpAssetsDepends.bind(this))];case 1:return(n=i.sent())?(this._clearTmpAssetsDepends(),(o=cc.assetManager.dependUtil.getDepsRecursively(n._uuid)||[]).push(n._uuid),this.addAssetsDepends(o),[2,{res:n,deps:o}]):(this._clearTmpAssetsDepends(),[2,null])}})})},t.prototype._destoryResWithReference=function(t){var e=this.removeAssetsDepends(t);return this._destoryAssets(e),!0},t.prototype.addAssetsDepends=function(t){for(var e=0,n=t;e<n.length;e++){var o=n[e];this._checkIsBuiltinAssets(o)||(this._assetsReference[o]?this._assetsReference[o]+=1:this._assetsReference[o]=1)}},t.prototype.removeAssetsDepends=function(t){for(var e=[],n=0,o=t;n<o.length;n++){var i=o[n];this._assetsReference[i]&&0!==this._assetsReference[i]&&(this._assetsReference[i]--,0===this._assetsReference[i]&&(e.push(i),delete this._assetsReference[i]))}return e},t.prototype._destoryAssets=function(t){for(var e=0,n=t;e<n.length;e++){var o=n[e];this._destoryAsset(o)}},t.prototype._destoryAsset=function(t){if(!this._checkIsBuiltinAssets(t)){var e=cc.assetManager.assets.get(t);e&&(e.destroy(),cc.assetManager.assets.remove(t),cc.assetManager.dependUtil.remove(t))}},t.prototype._addTmpAssetsDepends=function(t,e,n){var o,i=cc.assetManager.dependUtil.getDepsRecursively(n.uuid)||[];i.push(n.uuid),this.addAssetsDepends(i),(o=this._tmpAssetsDepends).push.apply(o,i)},t.prototype._clearTmpAssetsDepends=function(){for(var t=0,e=this._tmpAssetsDepends;t<e.length;t++){var n=e[t];this._assetsReference[n]&&0!==this._assetsReference[n]&&(this._assetsReference[n]--,0===this._assetsReference[n]&&delete this._assetsReference[n])}this._tmpAssetsDepends=[]},t.prototype._checkIsBuiltinAssets=function(t){var e=cc.assetManager.assets.get(t);return!(!e||-1==e._name.indexOf("builtin"))},t.prototype.computeTextureCache=function(){var t=cc.assetManager.assets,e=0,n=0;return t.forEach(function(t){if("cc.Texture2D"==(t&&t.__classname__?t.__classname__:"")){var o=t,i=o.width*o.height*((".jpg"===o._native?3:4)/1024/1024);e+=i,n++}}),"\u7f13\u5b58 [\u7eb9\u7406\u603b\u6570:"+n+"][\u7eb9\u7406\u7f13\u5b58:"+e.toFixed(2)+"M]"},t.instance=null,t}();n.default=s,cc._RF.pop()},{"./CocosHelper":"CocosHelper"}],SceneMgr:[function(t,e,n){"use strict";cc._RF.push(e,"df3116tk7BDOqeyh6sIDQKE","SceneMgr");var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function s(t){try{c(o.next(t))}catch(e){r(e)}}function a(t){try{c(o.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}c((o=o.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,o,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(t){return function(e){return c([t,e])}}function c(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,o=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(a){r=[6,a],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./config/SysDefine"),s=t("./Struct"),a=t("./TipsMgr"),c=t("./UIManager"),u=function(){function t(){this._scenes=[]}return t.prototype.getCurrScene=function(){return c.default.getInstance().getForm(this._currScene.prefabUrl)},t.prototype.open=function(t,e,n){return o(this,void 0,void 0,function(){var o,r,a,u,l;return i(this,function(i){switch(i.label){case 0:return t=s.GetForm(t),o=t.prefabUrl,this._currScene&&this._currScene.prefabUrl==o?(cc.warn("SceneMgr","\u5f53\u524d\u573a\u666f\u548c\u9700\u8981open\u7684\u573a\u666f\u662f\u540c\u4e00\u4e2a"),[2,null]):[4,this.openLoading(null==n?void 0:n.loadingForm,e,n)];case 1:return i.sent(),this._scenes.length>0?(r=this._scenes[this._scenes.length-1],[4,c.default.getInstance().closeForm(r)]):[3,3];case 2:i.sent(),i.label=3;case 3:for(a=-1,u=0;u<this._scenes.length;u++)if(this._scenes[u].prefabUrl===t.prefabUrl){a=u;break}return-1==a?this._scenes.push(t):this._scenes.length=a+1,this._currScene=t,[4,c.default.getInstance().openForm(t,e,n)];case 4:return l=i.sent(),[4,this.closeLoading(null==n?void 0:n.loadingForm)];case 5:return i.sent(),[2,l]}})})},t.prototype.back=function(t,e){return o(this,void 0,void 0,function(){var n;return i(this,function(o){switch(o.label){case 0:return this._scenes.length<=1?(cc.warn("SceneMgr","\u5df2\u7ecf\u662f\u6700\u540e\u4e00\u4e2a\u573a\u666f\u4e86, \u65e0\u5904\u53ef\u9000"),[2]):[4,this.openLoading(null==e?void 0:e.loadingForm,t,e)];case 1:return o.sent(),n=this._scenes.pop(),[4,c.default.getInstance().closeForm(n)];case 2:return o.sent(),this._currScene=this._scenes[this._scenes.length-1],[4,c.default.getInstance().openForm(this._currScene,t,e)];case 3:return o.sent(),[4,this.closeLoading(null==e?void 0:e.loadingForm)];case 4:return o.sent(),[2]}})})},t.prototype.close=function(t,e,n){return o(this,void 0,void 0,function(){return i(this,function(){return t=s.GetForm(t),[2,c.default.getInstance().closeForm(t,e,n)]})})},t.prototype.openLoading=function(t,e,n){return o(this,void 0,void 0,function(){var o;return i(this,function(i){switch(i.label){case 0:return(o=t||r.SysDefine.defaultLoadingForm)?[4,a.default.open(o.prefabUrl,e,n)]:[2];case 1:return i.sent(),[2]}})})},t.prototype.closeLoading=function(t){return o(this,void 0,void 0,function(){var e;return i(this,function(n){switch(n.label){case 0:return(e=t||r.SysDefine.defaultLoadingForm)?[4,a.default.close(e.prefabUrl)]:[2];case 1:return n.sent(),[2]}})})},t}();n.default=new u,cc._RF.pop()},{"./Struct":"Struct","./TipsMgr":"TipsMgr","./UIManager":"UIManager","./config/SysDefine":"SysDefine"}],Scene:[function(t,e,n){"use strict";cc._RF.push(e,"b13f3yncLhOvJSRs1QLB0sR","Scene");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},s=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function s(t){try{c(o.next(t))}catch(e){r(e)}}function a(t){try{c(o.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}c((o=o.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,o,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(t){return function(e){return c([t,e])}}function c(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,o=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(a){r=[6,a],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var c=t("../Logic/Game"),u=t("../UIFrame/AdapterMgr"),l=t("../UIFrame/EventCenter"),h=t("../UIFrame/EventType"),p=cc._decorator,d=p.ccclass,f=(p.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ndBlock=null,e._block=0,e}var n;return i(e,t),n=e,e.prototype.onLoad=function(){this.initBlockNode()},e.prototype.initBlockNode=function(){this.ndBlock=new cc.Node("block"),this.ndBlock.addComponent(cc.BlockInputEvents),this.node.addChild(this.ndBlock,cc.macro.MAX_ZINDEX)},e.prototype.start=function(){return s(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return n.inst=this,u.default.inst.adapteByType(u.AdapterType.StretchHeight|u.AdapterType.StretchWidth,this.node),[4,this.onGameInit()];case 1:return t.sent(),this.registerEvent(),[2]}})})},e.prototype.onGameInit=function(){return s(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return[4,c.default.init(this.node)];case 1:return t.sent(),[2]}})})},e.prototype.registerEvent=function(){cc.sys.platform===cc.sys.WECHAT_GAME?(wx.onShow(this.onGameShow.bind(this)),wx.onHide(this.onGameHide.bind(this))):(cc.game.on(cc.game.EVENT_SHOW,this.onGameShow,this),cc.game.on(cc.game.EVENT_HIDE,this.onGameHide,this))},e.prototype.onGameShow=function(t){l.EventCenter.emit(h.EventType.GameShow,t),cc.director.resume()},e.prototype.onGameHide=function(){l.EventCenter.emit(h.EventType.GameHide),cc.director.pause()},e.prototype.update=function(t){c.default.update(t)},e.prototype.lateUpdate=function(){},e.prototype.setInputBlock=function(t){this.ndBlock?(t?++this._block:--this._block,this.ndBlock.active=this._block>0):cc.warn("\u672a\u542f\u7528 block input")},e.inst=null,n=r([d],e)}(cc.Component));n.default=f,cc._RF.pop()},{"../Logic/Game":"Game","../UIFrame/AdapterMgr":"AdapterMgr","../UIFrame/EventCenter":"EventCenter","../UIFrame/EventType":"EventType"}],ScrollViewHelper:[function(t,e,n){"use strict";cc._RF.push(e,"90448z1fXJKVppxfCvCjY6W","ScrollViewHelper");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0}),n.ScrollViewHelper=n.ScrollViewElementProxy=n.ScrollViewElementProxyState=void 0;var s,a=cc._decorator,c=a.ccclass,u=a.property;(function(t){t[t.NoUI=0]="NoUI",t[t.HaveUI=1]="HaveUI"})(s=n.ScrollViewElementProxyState||(n.ScrollViewElementProxyState={}));var l=function(){this.state=s.NoUI};n.ScrollViewElementProxy=l;var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.syncInterval=.05,e._proxys=[],e._syncCounter=0,e._lastCheckX=0,e}return i(e,t),Object.defineProperty(e.prototype,"scrollView",{get:function(){return this._svCachedScrollView},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"datas",{get:function(){return this._proxys},enumerable:!1,configurable:!0}),e.prototype.clearData=function(){for(var t=0,e=this._proxys;t<e.length;t++){var n=e[t];n.ui&&this.onFreeUI&&this.onFreeUI(n)}this._proxys.length=0},e.prototype.addData=function(t){this._initializeProxy(t),this._proxys.push(t)},e.prototype.setDebug=function(t){t&&!this._debugNode?(this._debugNode=(new cc.Node).addComponent(cc.Graphics),this.scrollView.content.addChild(this._debugNode.node),this._debugNode.node.setPosition(cc.v2(0,0))):!t&&this._debugNode&&(this._debugNode.node.removeFromParent(),this._debugNode.node.destroy()),this._refreshDebug()},e.prototype.checkUI=function(){this._checkUIState(),this._syncingUI=!0},e.prototype.setLoopHorizontal=function(t){if(t!=this._horizontalLoop){if(t){for(var e=this._proxys.length-1;e>=0;e--)if(!(o=this._proxys[e]).horizontalLoop){var n=new l;this._initializeProxy(n),n.src=o.src,n.region=new cc.Rect(o.region.x,o.region.y,o.region.width,o.region.height),n.horizontalLoop=!0,n.verticalLoop=o.verticalLoop,n.region.x+=this.scrollView.content.width,this._proxys.push(n)}this.scrollView.content.setContentSize(2*this.scrollView.content.width,this.scrollView.content.height)}else{for(e=this._proxys.length-1;e>=0;e--){var o;(o=this._proxys[e]).horizontalLoop&&o.ui&&(this.onFreeUI(o),o.ui=null,this._proxys.splice(e,1))}this.scrollView.content.setContentSize(this.scrollView.content.width/2,this.scrollView.content.height)}this._horizontalLoop=t}},e.prototype.onLoad=function(){this._bindScrollView(this.getComponent(cc.ScrollView))},e.prototype.update=function(t){this._syncingUI&&(this._syncCounter+=t,this._syncCounter>=this.syncInterval&&(this._syncCounter=0,this._syncUIState(1)))},e.prototype._initializeProxy=function(t){t.horizontalLoop=!1,t.src=t,t.state=s.NoUI,t.ui=null,t.verticalLoop=!1},e.prototype._checkLoopHorizontal=function(){var t=this.scrollView.getScrollOffset(),e=t.x-this._lastCheckX;if(Math.abs(e)>2){this._lastCheckX=t.x;var n=this.scrollView.content.width/2;e<0&&t.x<-n?(t.x+=n,this._lastCheckX=t.x,t.x=-t.x,this.scrollView.scrollToOffset(t)):e>0&&t.x>0&&(t.x-=n,this._lastCheckX=t.x,t.x=-t.x,this.scrollView.scrollToOffset(t))}},e.prototype._bindScrollView=function(){this._svCachedScrollView=this.getComponent(cc.ScrollView);var t=new cc.Component.EventHandler;t.target=this.node,t.component="ScrollViewHelper",t.handler="_onScroll",this._svCachedScrollView.scrollEvents.push(t),this._svCachedScrollView.node.on(cc.Node.EventType.SIZE_CHANGED,this._refreshViewportRect,this),this._svCachedScrollView.content.on(cc.Node.EventType.ANCHOR_CHANGED,this._refreshViewportRect,this),this._svCachedScrollView.content.on(cc.Node.EventType.SIZE_CHANGED,this._refreshViewportRect,this),this._refreshViewportRect()},e.prototype._refreshViewportRect=function(){this._rectCachedViewport=cc.rect(),this._rectCachedViewport.size=this._svCachedScrollView.node.getContentSize(),this._rectCachedViewport.origin=cc.v2(-this._svCachedScrollView.content.anchorX*this._svCachedScrollView.content.width,(1-this._svCachedScrollView.content.anchorY)*this._svCachedScrollView.content.height-this._rectCachedViewport.size.height),this._checkUIState(),this._syncingUI=!0},e.prototype._checkUIState=function(){for(var t=this._svCachedScrollView.getScrollOffset(),e=this._rectCachedViewport.width,n=this._rectCachedViewport.height,o=-t.x+this._rectCachedViewport.x,i=-t.y+this._rectCachedViewport.y,r=0,a=this._proxys;r<a.length;r++){var c=a[r],u=c.region,l=u.x,h=u.y;l>o-u.width&&l<o+e&&h>i-u.height&&h<i+n?c.state=s.HaveUI:c.state=s.NoUI}},e.prototype._syncUIState=function(t){for(var e=0,n=0,o=this._proxys;n<o.length;n++)(a=o[n]).state==s.NoUI&&a.ui&&(this.onFreeUI(a),e++,this._debugNode&&cc.log("ScrollViewHelper._syncUIState ----\x3e free ui"));for(var i=0,r=this._proxys;i<r.length;i++){var a;if((a=r[i]).state==s.HaveUI&&!a.ui){var c=this.isUIPooled&&this.isUIPooled(a);this.onAllocUI(a),e++,c||t--,this._debugNode&&cc.log("ScrollViewHelper._syncUIState ----\x3e alloc ui")}if(t<=0)break}e<=0&&(this._syncingUI=!1)},e.prototype._onScroll=function(){this._horizontalLoop&&this._checkLoopHorizontal(),this._checkUIState(),this._syncingUI=!0},e.prototype._refreshDebug=function(){if(this._debugNode){this._debugNode.clear(),this._debugNode.fillColor=cc.color(255,0,0,255);for(var t=0;t<this._proxys.length;t++)this._debugNode.fillRect(this._proxys[t].region.x,this._proxys[t].region.y,this._proxys[t].region.width,this._proxys[t].region.height)}},r([u()],e.prototype,"syncInterval",void 0),r([c],e)}(cc.Component);n.ScrollViewHelper=h,cc._RF.pop()},{}],Shake:[function(t,e,n){"use strict";cc._RF.push(e,"50dd1CK5CZDxKf4hgecFu92","Shake");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var s=cc._decorator,a=s.ccclass,c=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._initial_x=0,e._initial_y=0,e._strength_x=0,e._strength_y=0,e}var n;return i(e,t),n=e,e.create=function(t,e,o){var i=new n;return i.initWithDuration(t,e,o),i},e.prototype.initWithDuration=function(t,e,n){return cc.ActionInterval.prototype.initWithDuration.apply(this,arguments),this._strength_x=e,this._strength_y=n,!0},e.prototype.fgRangeRand=function(t,e){return Math.random()*(e-t)+t},e.prototype.update=function(){var t=this.fgRangeRand(-this._strength_x,this._strength_x),e=this.fgRangeRand(-this._strength_y,this._strength_y);this.getTarget().setPosition(t+this._initial_x,e+this._initial_y)},e.prototype.startWithTarget=function(t){cc.ActionInterval.prototype.startWithTarget.apply(this,arguments),this._initial_x=t.x,this._initial_y=t.y},e.prototype.stop=function(){this.getTarget().setPosition(new cc.Vec2(this._initial_x,this._initial_y)),cc.ActionInterval.prototype.stop.apply(this)},n=r([a],e)}(cc.ActionInterval));n.default=c,cc._RF.pop()},{}],SoundMgr:[function(t,e,n){"use strict";cc._RF.push(e,"53a8cu6MiRDyaBRISmEhgTZ","SoundMgr");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},s=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function s(t){try{c(o.next(t))}catch(e){r(e)}}function a(t){try{c(o.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}c((o=o.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,o,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(t){return function(e){return c([t,e])}}function c(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,o=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(a){r=[6,a],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var c=t("./CocosHelper"),u=t("./config/SysDefine"),l=cc._decorator,h=l.ccclass,p=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.audioCache=cc.js.createMap(),e.currEffectId=-1,e.currMusicId=-1,e.volume=new d,e}return i(e,t),Object.defineProperty(e,"inst",{get:function(){return null==this._inst&&(this._inst=cc.find(u.SysDefine.SYS_UIROOT_NAME).addComponent(this)),this._inst},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){var t=this.getVolumeToLocal();t?this.volume=t:(this.volume.musicVolume=1,this.volume.effectVolume=1),this.setVolumeToLocal(),cc.game.on(cc.game.EVENT_HIDE,function(){cc.audioEngine.pauseAll()},this),cc.game.on(cc.game.EVENT_SHOW,function(){cc.audioEngine.resumeAll()},this)},e.prototype.getVolume=function(){return this.volume},e.prototype.start=function(){},e.prototype.setMusicVolume=function(t){this.volume.musicVolume=t,this.setVolumeToLocal()},e.prototype.setEffectVolume=function(t){this.volume.effectVolume=t,this.setVolumeToLocal()},e.prototype.playMusic=function(t,e){return void 0===e&&(e=!0),s(this,void 0,void 0,function(){var n;return a(this,function(o){switch(o.label){case 0:return t&&""!==t?this.audioCache[t]?(cc.audioEngine.playMusic(this.audioCache[t],e),[2]):[4,c.default.loadResSync(t,cc.AudioClip)]:[2];case 1:return n=o.sent(),this.audioCache[t]=n,this.currMusicId=cc.audioEngine.playMusic(n,e),[2]}})})},e.prototype.playEffect=function(t,e){return void 0===e&&(e=!1),s(this,void 0,void 0,function(){var n;return a(this,function(o){switch(o.label){case 0:return t&&""!==t?this.audioCache[t]?(cc.audioEngine.playEffect(this.audioCache[t],e),[2]):[4,c.default.loadResSync(t,cc.AudioClip)]:[2];case 1:return n=o.sent(),this.audioCache[t]=n,this.currEffectId=cc.audioEngine.playEffect(n,e),[2]}})})},e.prototype.getVolumeToLocal=function(){var t=cc.sys.localStorage.getItem("Volume_For_Creator");return t?JSON.parse(t):null},e.prototype.setVolumeToLocal=function(){cc.audioEngine.setMusicVolume(this.volume.musicVolume),cc.audioEngine.setEffectsVolume(this.volume.effectVolume),cc.sys.localStorage.setItem("Volume_For_Creator",JSON.stringify(this.volume))},e.prototype.setEffectActive=function(t,e){void 0===e&&(e=-1),t?cc.audioEngine.stop(e<0?this.currEffectId:e):cc.audioEngine.resume(e<0?this.currEffectId:e)},e._inst=null,r([h],e)}(cc.Component));n.default=p;var d=function(){};cc._RF.pop()},{"./CocosHelper":"CocosHelper","./config/SysDefine":"SysDefine"}],SpinePlus:[function(t,e,n){"use strict";cc._RF.push(e,"30062r80kNGeKSQLxsTnRWf","SpinePlus");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var s=cc._decorator,a=s.ccclass,c=s.property,u=s.executeInEditMode,l=s.menu,h=s.help,p=s.inspector,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.paused=!1,e}return i(e,t),e.prototype.start=function(){},e.prototype.update=function(e){t.prototype.update.call(this,e)},r([c({override:!0,visible:!0})],e.prototype,"paused",void 0),r([a,l("i18n:MAIN_MENU.component.ui/SpinePlus"),u,h("app://docs/html/components/spine.html"),p("packages://custom-inspector/inspector/spine.js")],e)}(sp.Skeleton);n.default=d,cc._RF.pop()},{}],StateMachine:[function(t,e,n){"use strict";var o;cc._RF.push(e,"a7054SKrgdF4Z4s5xp++8qZ","StateMachine"),o={VERSION:"2.4.0",Result:{SUCCEEDED:1,NOTRANSITION:2,CANCELLED:3,PENDING:4},Error:{INVALID_TRANSITION:100,PENDING_TRANSITION:200,INVALID_CALLBACK:300},WILDCARD:"*",ASYNC:"async",create:function(t,e){var n="string"==typeof t.initial?{state:t.initial}:t.initial,i=t.terminal||t.final,r=e||t.target||{},s=t.events||[],a=t.callbacks||{},c={},u={},l=function(t){var e=Array.isArray(t.from)?t.from:t.from?[t.from]:[o.WILDCARD];c[t.name]=c[t.name]||{};for(var n=0;n<e.length;n++)u[e[n]]=u[e[n]]||[],u[e[n]].push(t.name),c[t.name][e[n]]=t.to||e[n];t.to&&(u[t.to]=u[t.to]||[])};n&&(n.event=n.event||"startup",l({name:n.event,from:"none",to:n.state}));for(var h=0;h<s.length;h++)l(s[h]);for(var p in c)c.hasOwnProperty(p)&&(r[p]=o.buildEvent(p,c[p]));for(var p in a)a.hasOwnProperty(p)&&(r[p]=a[p]);return r.current="none",r.is=function(t){return Array.isArray(t)?t.indexOf(this.current)>=0:this.current===t},r.can=function(t){return!this.transition&&void 0!==c[t]&&(c[t].hasOwnProperty(this.current)||c[t].hasOwnProperty(o.WILDCARD))},r.cannot=function(t){return!this.can(t)},r.transitions=function(){return(u[this.current]||[]).concat(u[o.WILDCARD]||[])},r.isFinished=function(){return this.is(i)},r.error=t.error||function(t,e,n,o,i,r,s){throw s||r},r.states=function(){return Object.keys(u).sort()},n&&!n.defer&&r[n.event](),r},doCallback:function(t,e,n,i,r,s){if(e)try{return e.apply(t,[n,i,r].concat(s))}catch(a){return t.error(n,i,r,s,o.Error.INVALID_CALLBACK,"an exception occurred in a caller-provided callback function",a)}},beforeAnyEvent:function(t,e,n,i,r){return o.doCallback(t,t.onbeforeevent,e,n,i,r)},afterAnyEvent:function(t,e,n,i,r){return o.doCallback(t,t.onafterevent||t.onevent,e,n,i,r)},leaveAnyState:function(t,e,n,i,r){return o.doCallback(t,t.onleavestate,e,n,i,r)},enterAnyState:function(t,e,n,i,r){return o.doCallback(t,t.onenterstate||t.onstate,e,n,i,r)},changeState:function(t,e,n,i,r){return o.doCallback(t,t.onchangestate,e,n,i,r)},beforeThisEvent:function(t,e,n,i,r){return o.doCallback(t,t["onbefore"+e],e,n,i,r)},afterThisEvent:function(t,e,n,i,r){return o.doCallback(t,t["onafter"+e]||t["on"+e],e,n,i,r)},leaveThisState:function(t,e,n,i,r){return o.doCallback(t,t["onleave"+n],e,n,i,r)},enterThisState:function(t,e,n,i,r){return o.doCallback(t,t["onenter"+i]||t["on"+i],e,n,i,r)},beforeEvent:function(t,e,n,i,r){if(!1===o.beforeThisEvent(t,e,n,i,r)||!1===o.beforeAnyEvent(t,e,n,i,r))return!1},afterEvent:function(t,e,n,i,r){o.afterThisEvent(t,e,n,i,r),o.afterAnyEvent(t,e,n,i,r)},leaveState:function(t,e,n,i,r){var s=o.leaveThisState(t,e,n,i,r),a=o.leaveAnyState(t,e,n,i,r);return!1!==s&&!1!==a&&(o.ASYNC===s||o.ASYNC===a?o.ASYNC:void 0)},enterState:function(t,e,n,i,r){o.enterThisState(t,e,n,i,r),o.enterAnyState(t,e,n,i,r)},buildEvent:function(t,e){return function(){var n=this.current,i=e[n]||(e[o.WILDCARD]!=o.WILDCARD?e[o.WILDCARD]:n)||n,r=Array.prototype.slice.call(arguments);if(this.transition)return this.error(t,n,i,r,o.Error.PENDING_TRANSITION,"event "+t+" inappropriate because previous transition did not complete");if(this.cannot(t))return this.error(t,n,i,r,o.Error.INVALID_TRANSITION,"event "+t+" inappropriate in current state "+this.current);if(!1===o.beforeEvent(this,t,n,i,r))return o.Result.CANCELLED;if(n===i)return o.afterEvent(this,t,n,i,r),o.Result.NOTRANSITION;var s=this;this.transition=function(){return s.transition=null,s.current=i,o.enterState(s,t,n,i,r),o.changeState(s,t,n,i,r),o.afterEvent(s,t,n,i,r),o.Result.SUCCEEDED},this.transition.cancel=function(){s.transition=null,o.afterEvent(s,t,n,i,r)};var a=o.leaveState(this,t,n,i,r);return!1===a?(this.transition=null,o.Result.CANCELLED):o.ASYNC===a?o.Result.PENDING:this.transition?this.transition():void 0}}},void 0!==n?(void 0!==e&&e.exports&&(n=e.exports=o),n.StateMachine=o):"function"==typeof define&&define.amd?define(function(){return o}):"undefined"!=typeof window?window.StateMachine=o:"undefined"!=typeof self&&(self.StateMachine=o),cc._RF.pop()},{}],Struct:[function(t,e,n){"use strict";cc._RF.push(e,"10f94bOjGlIYIzXaowVjrbs","Struct"),Object.defineProperty(n,"__esModule",{value:!0}),n.ECloseType=n.EPriority=n.GetForm=n.ModalType=void 0;var o=t("./config/SysDefine"),i=function(){function t(t,e,n,i){void 0===t&&(t=o.ModalOpacity.OpacityHalf),void 0===e&&(e=!1),void 0===n&&(n=!0),void 0===i&&(i=.2),this.opacity=o.ModalOpacity.OpacityHalf,this.clickMaskClose=!1,this.isEasing=!0,this.easingTime=.2,this.dualBlur=!1,this.opacity=t,this.clickMaskClose=e,this.isEasing=n,this.easingTime=i}return t.prototype.useBlur=function(){return this.dualBlur=!0,this},t}();n.ModalType=i,n.GetForm=function(t,e){return void 0===e&&(e=o.FormType.Screen),"string"==typeof t?{prefabUrl:t,type:e}:t},function(t){t[t.ZERO=0]="ZERO",t[t.ONE=1]="ONE",t[t.TWO=2]="TWO",t[t.THREE=3]="THREE",t[t.FOUR=4]="FOUR",t[t.FIVE=5]="FIVE",t[t.SIX=6]="SIX",t[t.SEVEN=7]="SEVEN",t[t.EIGHT=8]="EIGHT",t[t.NINE=9]="NINE"}(n.EPriority||(n.EPriority={})),function(t){t[t.CloseAndHide=0]="CloseAndHide",t[t.CloseAndDestory=1]="CloseAndDestory",t[t.LRU=2]="LRU"}(n.ECloseType||(n.ECloseType={})),cc._RF.pop()},{"./config/SysDefine":"SysDefine"}],SysConfig:[function(t,e,n){"use strict";cc._RF.push(e,"9963eJiicZFX5wMEhMsIL+C","SysConfig"),Object.defineProperty(n,"__esModule",{value:!0}),n.SysConfig=void 0;var o=function(){function t(){}return t.useLRUCache=!1,t}();n.SysConfig=o,cc._RF.pop()},{}],SysDefine:[function(t,e,n){"use strict";cc._RF.push(e,"7ef5dNjssZO34e85HHLM2ES","SysDefine"),Object.defineProperty(n,"__esModule",{value:!0}),n.SysDefine=n.UIState=n.ModalOpacity=n.FormType=void 0;var o=t("../../UIConfig");(function(t){t.Screen="UIScreen",t.Fixed="UIFixed",t.Window="UIWindow",t.Toast="UIToast",t.Tips="UITips"})(n.FormType||(n.FormType={})),function(t){t[t.None=0]="None",t[t.OpacityZero=1]="OpacityZero",t[t.OpacityLow=2]="OpacityLow",t[t.OpacityHalf=3]="OpacityHalf",t[t.OpacityHigh=4]="OpacityHigh",t[t.OpacityFull=5]="OpacityFull"}(n.ModalOpacity||(n.ModalOpacity={})),function(t){t[t.None=0]="None",t[t.Loading=1]="Loading",t[t.Showing=2]="Showing",t[t.Hiding=3]="Hiding"}(n.UIState||(n.UIState={}));var i=function(){function t(){}return t.defaultLoadingForm=o.default.UILoading,t.SYS_PATH_CANVAS="Canvas",t.SYS_PATH_UIFORMS_CONFIG_INFO="UIFormsConfigInfo",t.SYS_PATH_CONFIG_INFO="SysConfigInfo",t.SYS_UIROOT_NAME="Canvas/Scene/UIROOT",t.SYS_UIMODAL_NAME="Canvas/Scene/UIROOT/UIModalManager",t.SYS_UIAdapter_NAME="Canvas/Scene/UIROOT/UIAdapterManager",t.SYS_SCENE_NODE="Scene",t.SYS_UIROOT_NODE="UIROOT",t.SYS_SCREEN_NODE="Screen",t.SYS_FIXED_NODE="FixedUI",t.SYS_POPUP_NODE="PopUp",t.SYS_TOPTIPS_NODE="TopTips",t.SYS_TOAST_NODE="Toast",t.SYS_MODAL_NODE="UIModalNode",t.SYS_STANDARD_Prefix="_",t.SYS_STANDARD_Separator="$",t.SYS_STANDARD_End="#",t.UI_PATH_ROOT="UIForms/",t.SeparatorMap={_Node:"cc.Node",_Label:"cc.Label",_Button:"cc.Button",_Sprite:"cc.Sprite",_RichText:"cc.RichText",_Mask:"cc.Mask",_MotionStreak:"cc.MotionStreak",_TiledMap:"cc.TiledMap",_TiledTile:"cc.TiledTile",_Spine:"sp.Skeleton",_Graphics:"cc.Graphics",_Animation:"cc.Animation",_WebView:"cc.WebView",_EditBox:"cc.EditBox",_ScrollView:"cc.ScrollView",_VideoPlayer:"cc.VideoPlayer",_ProgressBar:"cc.ProgressBar",_PageView:"cc.PageView",_Slider:"cc.Slider",_Toggle:"cc.Toggle",_ButtonPlus:"ButtonPlus"},t}();n.SysDefine=i,cc._RF.pop()},{"../../UIConfig":"UIConfig"}],TaskMgr:[function(t,e,n){"use strict";cc._RF.push(e,"a001c6UsFtNA5aXLrNhEDJy","TaskMgr"),Object.defineProperty(n,"__esModule",{value:!0}),n.Command=n.CommandType=void 0;var o=t("./PriorityQueue");n.CommandType||(n.CommandType={});n.Command=function(){};var i=function(){function t(){this._cmdMap=cc.js.createMap(),this._debugHistory=[],this._debug=!1}return Object.defineProperty(t,"inst",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),t.prototype.setDebug=function(t){void 0===t&&(t=!0),this._debug=t},t.prototype.pushCommand=function(t,e,n){void 0===n&&(n=0),this._debug&&this._debugHistory.push(e);var i=this._cmdMap[t];i||(i=this._cmdMap[t]=new o.default),i.enqueue(e,n)},t.prototype.popCommand=function(t){var e=this._cmdMap[t];return e?e.dequeue():null},t.prototype.hasCommand=function(t,e){if(e)return this._cmdMap[e].hasElement(t);for(var n in this._cmdMap)if(this._cmdMap[n].hasElement(t))return!0;return!1},t._instance=null,t}();n.default=i,cc._RF.pop()},{"./PriorityQueue":"PriorityQueue"}],TextureAssembler:[function(t,e,n){"use strict";cc._RF.push(e,"e0687tDW69CxalPcgT1Omra","TextureAssembler");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=t("../Utils/CommonUtils"),s=cc.gfx,a=new s.VertexFormat([{name:s.ATTR_POSITION,type:s.ATTR_TYPE_FLOAT32,num:2},{name:s.ATTR_UV0,type:s.ATTR_TYPE_FLOAT32,num:2},{name:s.ATTR_COLOR,type:s.ATTR_TYPE_UINT8,num:4,normalize:!0}]),c=function(t){function e(){var e=t.call(this)||this;return e.verticesCount=4,e.indicesCount=6,e.floatsPerVert=5,e.uvOffset=2,e.colorOffset=4,e._renderData=null,e._renderData=new cc.RenderData,e._renderData.init(e),e.initData(),e}return i(e,t),Object.defineProperty(e.prototype,"verticesFloats",{get:function(){return this.verticesCount*this.floatsPerVert},enumerable:!1,configurable:!0}),e.prototype.getVfmt=function(){return a},e.prototype.getBuffer=function(){return cc.renderer._handle.getBuffer("mesh",this.getVfmt())},e.prototype.initData=function(){this._renderData.createQuadData(0,this.verticesFloats,this.indicesCount)},e.prototype.resetData=function(t){var e=t.polygon;!e||e.length<3||(this.verticesCount=e.length,this.indicesCount=this.verticesCount+2*(this.verticesCount-3),this._renderData.clear(),this.initData())},e.prototype.initQuadIndices=function(t,e){for(var n=0;n<e.length;n++)t[n]=e[n]},e.prototype.updateColor=function(t,e){var n=this._renderData.uintVDatas[0];if(n){e=null!=e?e:t.node.color._val;for(var o=this.floatsPerVert,i=this.colorOffset,r=t.polygon,s=0;s<r.length;s++)n[i+s*o]=e}},e.prototype.updateUVs=function(t){for(var e=this.uvOffset,n=this.floatsPerVert,o=this._renderData.vDatas[0],i=r.CommonUtils.computeUv(t.polygon,t.node.width,t.node.height),s=t.polygon,a=0;a<s.length;a++){var c=n*a+e;o[c]=i[a].x,o[c+1]=i[a].y}},e.prototype.updateWorldVertsWebGL=function(t){var e=this._renderData.vDatas[0],n=t.node._worldMatrix.m,o=n[0],i=n[1],r=n[4],s=n[5],a=n[12],c=n[13],u=1===o&&0===i&&0===r&&1===s,l=this.floatsPerVert;if(u)for(var h=t.polygon,p=0;p<h.length;p++)e[p*l]=h[p].x+a,e[p*l+1]=h[p].y+c;else for(h=t.polygon,p=0;p<h.length;p++)e[p*l]=o*h[p].x+r*h[p].y+a,e[p*l+1]=i*h[p].x+s*h[p].y+c},e.prototype.updateWorldVertsNative=function(t){for(var e=this._renderData.vDatas[0],n=this.floatsPerVert,o=t.polygon,i=0;i<o.length;i++)e[i*n]=o[i].x,e[i*n+1]=o[i].y},e.prototype.updateWorldVerts=function(t){this.updateWorldVertsWebGL(t)},e.prototype.updateVerts=function(t){var e=r.CommonUtils.splitePolygon(t.polygon);this.initQuadIndices(this._renderData.iDatas[0],e),this.updateWorldVerts(t)},e.prototype.updateRenderData=function(t){t._vertsDirty&&(this.resetData(t),this.updateUVs(t),this.updateVerts(t),this.updateColor(t,null),t._vertsDirty=!1)},e.prototype.fillBuffers=function(t,e){e.worldMatDirty&&this.updateWorldVerts(t);var n=this._renderData,o=n.vDatas[0],i=n.iDatas[0],r=this.getBuffer(),s=r.request(this.verticesCount,this.indicesCount),a=s.byteOffset>>2,c=r._vData;o.length+a>c.length?c.set(o.subarray(0,c.length-a),a):c.set(o,a);for(var u=r._iData,l=s.indiceOffset,h=s.vertexOffset,p=0,d=i.length;p<d;p++)u[l++]=h+i[p]},e.prototype.packToDynamicAtlas=function(t,e){if(!e._original&&cc.dynamicAtlasManager&&e._texture.packable){var n=cc.dynamicAtlasManager.insertSpriteFrame(e);n&&e._setDynamicAtlasFrame(n)}var o=t._materials[0];o&&o.getProperty("texture")!==e._texture&&(t._vertsDirty=!0,t._updateMaterial())},e}(cc.Assembler);n.default=c,cc._RF.pop()},{"../Utils/CommonUtils":"CommonUtils"}],TexturePlus:[function(t,e,n){"use strict";cc._RF.push(e,"58ad8KR/hRJi7EtoZ+PAyOU","TexturePlus");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var s,a=t("../Assemblers/TextureAssembler"),c=t("../Utils/CommonUtils");cc.renderer.renderEngine,function(t){t[t.Cut=0]="Cut",t[t.Stretch=1]="Stretch"}(s||(s={}));var u=new cc.Vec2,l=new cc.Mat4,h=cc._decorator,p=h.ccclass,d=h.menu,f=h.executeInEditMode,_=h.mixins,y=h.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._texture=null,e._polygon=[],e.srcBlendFactor=cc.macro.BlendFactor.SRC_ALPHA,e.dstBlendFactor=cc.macro.BlendFactor.ONE_MINUS_SRC_ALPHA,e.editing=!1,e._assembler=null,e}return i(e,t),Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t;var e=-t.width/2,n=-t.height/2,o=t.height/2,i=t.width/2;this.polygon=[cc.v2(e,n),cc.v2(i,n),cc.v2(i,o),cc.v2(e,o)],this.node.width=t.width,this.node.height=t.height,this._updateMaterial()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"polygon",{get:function(){return this._polygon},set:function(t){this._polygon=t,this._updateVerts()},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.node._hitTest=this._hitTest.bind(this)},e.prototype.start=function(){var t=this;this.node.on(cc.Node.EventType.TOUCH_START,function(){console.log("click texture plus")},this),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(e){t.node.x+=e.getDeltaX(),t.node.y+=e.getDeltaY()},this)},e.prototype._updateVerts=function(){this.setVertsDirty()},e.prototype._updateMaterial=function(){var t=this._texture,e=this.getMaterial(0);e&&(void 0!==e.getDefine("USE_TEXTURE")&&e.define("USE_TEXTURE",!0),e.setProperty("texture",t)),this.__proto__._updateBlendFunc.call(this),this.setVertsDirty()},e.prototype._validateRender=function(){},e.prototype._resetAssembler=function(){(this._assembler=new a.default).init(this),this._updateColor(),this.setVertsDirty()},e.prototype._hitTest=function(t){var e=this.node,n=e.getContentSize(),o=(n.width,n.height,u);return e._updateWorldMatrix(),!!cc.Mat4.invert(l,e._worldMatrix)&&(cc.Vec2.transformMat4(o,t,l),c.CommonUtils.isInPolygon(o,this.polygon))},e.Type=s,r([y(cc.Texture2D)],e.prototype,"_texture",void 0),r([y(cc.Texture2D)],e.prototype,"texture",null),r([y({type:[cc.Vec2],serializable:!0})],e.prototype,"_polygon",void 0),r([y({type:[cc.Vec2],serializable:!0})],e.prototype,"polygon",null),r([y({type:cc.Enum(cc.macro.BlendFactor),override:!0})],e.prototype,"srcBlendFactor",void 0),r([y({type:cc.Enum(cc.macro.BlendFactor),override:!0})],e.prototype,"dstBlendFactor",void 0),r([y(cc.Boolean)],e.prototype,"editing",void 0),r([p,f,d("i18n:MAIN_MENU.component.ui/TexturePlus"),_(cc.BlendFunc)],e)}(cc.RenderComponent);n.default=v,cc._RF.pop()},{"../Assemblers/TextureAssembler":"TextureAssembler","../Utils/CommonUtils":"CommonUtils"}],TipsMgr:[function(t,e,n){"use strict";cc._RF.push(e,"f0adbheCVRBErVSp07wosNT","TipsMgr");var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function s(t){try{c(o.next(t))}catch(e){r(e)}}function a(t){try{c(o.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}c((o=o.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,o,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(t){return function(e){return c([t,e])}}function c(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,o=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(a){r=[6,a],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./config/SysDefine"),s=t("./Struct"),a=t("./UIManager"),c=function(){function t(){}return t.prototype.open=function(t,e,n){return o(this,void 0,void 0,function(){return i(this,function(o){switch(o.label){case 0:return t=s.GetForm(t,r.FormType.Tips),[4,a.default.getInstance().openForm(t,e,n)];case 1:return[2,o.sent()]}})})},t.prototype.close=function(t,e,n){return o(this,void 0,void 0,function(){return i(this,function(o){switch(o.label){case 0:return t=s.GetForm(t,r.FormType.Tips),[4,a.default.getInstance().closeForm(t,e,n)];case 1:return[2,o.sent()]}})})},t}();n.default=new c,cc._RF.pop()},{"./Struct":"Struct","./UIManager":"UIManager","./config/SysDefine":"SysDefine"}],ToastMgr:[function(t,e,n){"use strict";cc._RF.push(e,"68e22m/kRFCA4LrPLsSxzY9","ToastMgr");var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function s(t){try{c(o.next(t))}catch(e){r(e)}}function a(t){try{c(o.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}c((o=o.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,o,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(t){return function(e){return c([t,e])}}function c(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,o=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(a){r=[6,a],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../Common/Utils/Pool"),s=t("./config/SysDefine"),a=t("./EventCenter"),c=t("./ResMgr"),u=t("./Struct"),l=t("./UIForm"),h=t("./UIManager"),p=function(){function t(){this._pools=cc.js.createMap(),this._showingToast=cc.js.createMap()}return t.prototype.open=function(t,e){return o(this,void 0,void 0,function(){var n,o,r;return i(this,function(i){switch(i.label){case 0:return t=u.GetForm(t,s.FormType.Toast),n=this._pools[t.prefabUrl],console.log(n,t.prefabUrl),n?[3,2]:[4,this.genPool(t.prefabUrl)];case 1:n=i.sent(),i.label=2;case 2:return o=n.alloc(),[4,h.default.getInstance().enterToToast(o,e)];case 3:return i.sent(),(r=this._showingToast[t.prefabUrl])||(r=this._showingToast[t.prefabUrl]=new Array),r.push(o),[2,o]}})})},t.prototype.close=function(t,e){return o(this,void 0,void 0,function(){var n,o;return i(this,function(i){switch(i.label){case 0:return[4,h.default.getInstance().exitToToast(t,e)];case 1:if(i.sent(),console.log(t.fid),!this._pools[t.fid])return[2];if(this._pools[t.fid].free(t),!(n=this._showingToast[t.fid]))return[2];for(o=n.length-1;o>=0;o--)if(n[o].uuid===t.uuid){n.splice(o,1);break}return[2]}})})},t.prototype.genPool=function(t){return o(this,void 0,void 0,function(){var e;return i(this,function(n){switch(n.label){case 0:return[4,c.default.inst.loadFormPrefab(t)];case 1:return e=n.sent(),[2,this._pools[t]=new r.Pool(function(){var n=cc.instantiate(e);h.default.getInstance().addNode(n);var o=n.getComponent(l.UIToast);return o.fid=t,o},3)]}})})},t.prototype.clearToasts=function(t){var e=this._pools[t];if(e){var n=this._showingToast[t];if(n){for(var o=0,i=n;o<i.length;o++){var r=i[o];e.free(r)}e.clear(function(t){t.node.destroy(),a.EventCenter.targetOff(t)}),c.default.inst.destoryFormPrefab(t),this._pools[t]=null,delete this._pools[t],this._showingToast[t]=null,delete this._showingToast[t]}}},t.prototype.checkHasShowingToast=function(t){return this._showingToast[t].length>0},t}();n.default=new p,cc._RF.pop()},{"../Common/Utils/Pool":"Pool","./EventCenter":"EventCenter","./ResMgr":"ResMgr","./Struct":"Struct","./UIForm":"UIForm","./UIManager":"UIManager","./config/SysDefine":"SysDefine"}],TouchPlus:[function(t,e,n){"use strict";cc._RF.push(e,"1c88eM+YFpH45yVr93vRF2l","TouchPlus");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var s=cc._decorator,a=s.ccclass,c=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.offset=15,e.isTouch=!1,e.isClick=!0,e}return i(e,t),e.prototype.addEvent=function(t,e){this.clickEvent=t,this.slideEvent=e},e.prototype.start=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.touchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.touchCancel,this)},e.prototype.touchStart=function(t){this.isTouch=!0,this.startPosition=t.getLocation()},e.prototype.touchMove=function(t){this.isTouch&&t.getLocation().sub(this.startPosition).mag()>this.offset&&(this.isClick=!1,this.slideEvent&&this.slideEvent(t))},e.prototype.touchEnd=function(t){this.isTouch&&(this.isTouch=!1,this.isClick&&this.clickEvent&&this.clickEvent(t),this.isClick=!0)},e.prototype.touchCancel=function(){this.isTouch&&(this.isTouch=!1,this.isClick=!0)},e.prototype.onDestroy=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this),this.node.off(cc.Node.EventType.TOUCH_END,this.touchEnd,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.touchCancel,this)},r([a],e)}(cc.Component));n.default=c,cc._RF.pop()},{}],UIBase:[function(t,e,n){"use strict";cc._RF.push(e,"e39bcXBPZZJwbPmOzg0+yw0","UIBase");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function s(t){try{c(o.next(t))}catch(e){r(e)}}function a(t){try{c(o.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}c((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(t){return function(e){return c([t,e])}}function c(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,o=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(a){r=[6,a],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./Struct"),c=t("./AdapterMgr"),u=t("./ResMgr"),l=t("./FormMgr"),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.fid="",e.formData=null,e.formType=null,e.closeType=null,e._inited=!1,e.view=null,e.model=null,e._blocker=null,e}return i(e,t),e.open=function(t,e){var n=this.UIConfig;n?l.default.open(n,t,e):cc.warn("sorry UIConfig is null, please check AutoConfig")},e.close=function(){l.default.close(this.UIConfig)},e.prototype._preInit=function(t){return r(this,void 0,void 0,function(){var e;return s(this,function(n){switch(n.label){case 0:return this._inited?[2]:(this._inited=!0,this.view=this.getComponent(this.node.name+"_Auto"),[4,this.load(t)]);case 1:return(e=n.sent())?(cc.error(e),this.closeSelf(),[2]):(this.onInit(t),[2])}})})},e.prototype.load=function(){return r(this,void 0,Promise,function(){return s(this,function(){return[2,null]})})},e.prototype.onInit=function(){},e.prototype.onShow=function(){},e.prototype.onAfterShow=function(){},e.prototype.onHide=function(){},e.prototype.onAfterHide=function(){},e.prototype.closeSelf=function(t){return r(this,void 0,Promise,function(){return s(this,function(e){switch(e.label){case 0:return[4,l.default.close(a.GetForm(this.fid,this.formType),t)];case 1:return[2,e.sent()]}})})},e.prototype.showEffect=function(){return r(this,void 0,void 0,function(){return s(this,function(){return[2]})})},e.prototype.hideEffect=function(){return r(this,void 0,void 0,function(){return s(this,function(){return[2]})})},e.prototype.setBlockInput=function(t){if(!this._blocker){var e=new cc.Node("block_input_events");this._blocker=e.addComponent(cc.BlockInputEvents),this._blocker.node.setContentSize(c.default.inst.visibleSize),this.node.addChild(this._blocker.node,cc.macro.MAX_ZINDEX)}this._blocker.node.active=t},e.prototype.loadRes=function(t,e){return r(this,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return[4,u.default.inst.loadDynamicRes(t,e,this.fid)];case 1:return[2,n.sent()]}})})},e}(cc.Component);n.default=h,cc.UIBase=h,cc._RF.pop()},{"./AdapterMgr":"AdapterMgr","./FormMgr":"FormMgr","./ResMgr":"ResMgr","./Struct":"Struct"}],UIConfig:[function(t,e,n){"use strict";cc._RF.push(e,"146c1Cgz6VBgbdJJq7LiwWK","UIConfig"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){}return t.UIHome={prefabUrl:"Prefab/Screen/UIHome",type:"UIScreen"},t.UILoading={prefabUrl:"Prefab/Tips/UILoading",type:"UITips"},t.UIWorkDesk={prefabUrl:"Prefab/Screen/UIWorkDesk",type:"UIWindow"},t}();n.default=o,cc.game.on(cc.game.EVENT_GAME_INITED,function(){for(var t in o){var e=cc.js.getClassByName(t);if(!e){var n=o[t].prefabUrl.split("/");if(!n||n.length<=0)continue;var i=n[n.length-1];e=cc.js.getClassByName(i)}e.UIConfig=o[t]}}),cc._RF.pop()},{}],UIForm:[function(t,e,n){"use strict";cc._RF.push(e,"c37basMGP5Pc7Er41uB3gdC","UIForm");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function s(t){try{c(o.next(t))}catch(e){r(e)}}function a(t){try{c(o.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}c((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(t){return function(e){return c([t,e])}}function c(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,o=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(a){r=[6,a],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.UIToast=n.UITips=n.UIFixed=n.UIWindow=n.UIScreen=void 0;var a=t("./CocosHelper"),c=t("./config/SysDefine"),u=t("./FormMgr"),l=t("./Struct"),h=t("./UIBase"),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.formType=c.FormType.Screen,e.closeType=l.ECloseType.CloseAndDestory,e}return i(e,t),e}(h.default);n.UIScreen=p;var d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.formType=c.FormType.Window,e.modalType=new l.ModalType(c.ModalOpacity.OpacityFull),e.closeType=l.ECloseType.LRU,e}return i(e,t),e.prototype.showEffect=function(){return r(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return this.node.scale=0,[4,a.default.runTweenSync(this.node,cc.tween().to(.3,{scale:1},cc.easeBackOut()))];case 1:return t.sent(),[2]}})})},e}(h.default);n.UIWindow=d;var f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.formType=c.FormType.Fixed,e.closeType=l.ECloseType.LRU,e}return i(e,t),e}(h.default);n.UIFixed=f;var _=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.formType=c.FormType.Tips,e.closeType=l.ECloseType.CloseAndHide,e}return i(e,t),e}(h.default);n.UITips=_;var y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.formType=c.FormType.Toast,e}return i(e,t),e.prototype.use=function(){},e.prototype.free=function(){},e.prototype.closeSelf=function(){return r(this,void 0,Promise,function(){return s(this,function(t){switch(t.label){case 0:return[4,u.default.close({prefabUrl:this.fid,type:this.formType})];case 1:return[2,t.sent()]}})})},e}(h.default);n.UIToast=y,cc.UIScreen=p,cc.UIWindow=d,cc.UIFixed=f,cc.UITips=_,cc.UIToast=y,cc._RF.pop()},{"./CocosHelper":"CocosHelper","./FormMgr":"FormMgr","./Struct":"Struct","./UIBase":"UIBase","./config/SysDefine":"SysDefine"}],UIHome_Auto:[function(t,e,n){"use strict";cc._RF.push(e,"d0e1bIfKq5LxI9rGB9rijU4","UIHome_Auto");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var s=cc._decorator,a=s.ccclass,c=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.Player=null,e.Joystick=null,e.Setting=null,e.Coin=null,e.Gift=null,e.Backpack=null,e.Recipe=null,e}return i(e,t),r([c(cc.Node)],e.prototype,"Player",void 0),r([c(cc.Node)],e.prototype,"Joystick",void 0),r([c(cc.Node)],e.prototype,"Setting",void 0),r([c(cc.Node)],e.prototype,"Coin",void 0),r([c(cc.Node)],e.prototype,"Gift",void 0),r([c(cc.Node)],e.prototype,"Backpack",void 0),r([c(cc.Node)],e.prototype,"Recipe",void 0),r([a],e)}(cc.Component);n.default=u,cc._RF.pop()},{}],UIHome:[function(t,e,n){"use strict";cc._RF.push(e,"b0a0dOekNZK/7MwbDKjiuCe","UIHome");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},s=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function s(t){try{c(o.next(t))}catch(e){r(e)}}function a(t){try{c(o.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}c((o=o.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,o,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(t){return function(e){return c([t,e])}}function c(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,o=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(a){r=[6,a],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var c=t("../Extra/Joystick"),u=t("../UIFrame/UIForm"),l=t("./UIWorkDesk"),h=cc._decorator,p=h.ccclass,d=(h.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.model=5,e}return i(e,t),e.prototype.load=function(){return s(this,void 0,void 0,function(){return a(this,function(){return[2,null]})})},e.prototype.refreshView=function(){console.log(this.model)},e.prototype.start=function(){},e.prototype.useFixedType=function(){c.instance.emit("set_joystick_type",c.JoystickType.FIXED)},e.prototype.useFollowType=function(){c.instance.emit("set_joystick_type",c.JoystickType.FOLLOW)},e.prototype.clickBackpack=function(){l.default.open()},r([p],e)}(u.UIScreen));n.default=d,cc._RF.pop()},{"../Extra/Joystick":"Joystick","../UIFrame/UIForm":"UIForm","./UIWorkDesk":"UIWorkDesk"}],UILoading:[function(t,e,n){"use strict";cc._RF.push(e,"f5535NOnxVA4oA5HsMZ5MRw","UILoading");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var s=t("../UIFrame/UIForm"),a=cc._decorator,c=a.ccclass,u=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.start=function(){},r([c],e)}(s.UITips));n.default=u,cc._RF.pop()},{"../UIFrame/UIForm":"UIForm"}],UIManager:[function(t,e,n){"use strict";cc._RF.push(e,"e31dcGQp2pBEaii62Cywsyt","UIManager");var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function s(t){try{c(o.next(t))}catch(e){r(e)}}function a(t){try{c(o.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}c((o=o.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,o,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(t){return function(e){return c([t,e])}}function c(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,o=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(a){r=[6,a],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./config/SysDefine"),s=t("./ResMgr"),a=t("./ModalMgr"),c=t("./AdapterMgr"),u=t("../Scene/Scene"),l=t("./Struct"),h=t("./EventCenter"),p=t("./EventType"),d=t("../Common/Utils/LRUCache"),f="UIManager",_=function(){function t(){this._UIROOT=null,this._ndScreen=null,this._ndFixed=null,this._ndPopUp=null,this._ndToast=null,this._ndTips=null,this._windows=[],this._allForms=cc.js.createMap(),this._showingForms=cc.js.createMap(),this._tipsForms=cc.js.createMap(),this._loadingForm=cc.js.createMap(),this._closingForm=cc.js.createMap(),this._LRUCache=new d.LRUCache(3)}return t.getInstance=function(){var e=this;if(null==this.instance){this.instance=new t;var n=cc.director.getScene().getChildByName("Canvas"),o=n.getChildByName(r.SysDefine.SYS_SCENE_NODE);o?!o.getComponent(u.default)&&o.addComponent(u.default):((o=new cc.Node(r.SysDefine.SYS_SCENE_NODE)).addComponent(u.default),o.parent=n);var i=this.instance._UIROOT=new cc.Node(r.SysDefine.SYS_UIROOT_NODE);o.addChild(i),i.addChild(this.instance._ndScreen=new cc.Node(r.SysDefine.SYS_SCREEN_NODE)),i.addChild(this.instance._ndFixed=new cc.Node(r.SysDefine.SYS_FIXED_NODE)),i.addChild(this.instance._ndPopUp=new cc.Node(r.SysDefine.SYS_POPUP_NODE)),i.addChild(this.instance._ndToast=new cc.Node(r.SysDefine.SYS_TOAST_NODE)),i.addChild(this.instance._ndTips=new cc.Node(r.SysDefine.SYS_TOPTIPS_NODE)),cc.director.once(cc.Director.EVENT_BEFORE_SCENE_LAUNCH,function(){e.instance=null})}return this.instance},t.prototype.loadUIForm=function(t){return o(this,void 0,Promise,function(){var e;return i(this,function(n){switch(n.label){case 0:return[4,this._loadForm(t)];case 1:return(e=n.sent())?[2,e]:(console.warn(e+"\u6ca1\u6709\u88ab\u6210\u529f\u52a0\u8f7d"),[2,null])}})})},t.prototype.openForm=function(t,e,n){return o(this,void 0,Promise,function(){var o,s;return i(this,function(i){switch(i.label){case 0:return!(o=t.prefabUrl)||o.length<=0?(cc.warn(o+", \u53c2\u6570\u9519\u8bef"),[2]):this.checkFormShowing(o)?(cc.warn(o+", \u7a97\u4f53\u6b63\u5728\u663e\u793a\u4e2d"),[2,null]):[4,this._loadForm(o)];case 1:if(!(s=i.sent()))return cc.warn(o+" \u52a0\u8f7d\u5931\u8d25\u4e86!"),[2,null];switch(s.fid=o,s.formData=n,s.formType){case r.FormType.Screen:return[3,2];case r.FormType.Fixed:return[3,4];case r.FormType.Window:return[3,6];case r.FormType.Tips:return[3,8]}return[3,10];case 2:return[4,this.enterToScreen(s.fid,e)];case 3:return i.sent(),[3,10];case 4:return[4,this.enterToFixed(s.fid,e)];case 5:return i.sent(),[3,10];case 6:return[4,this.enterToPopup(s.fid,e)];case 7:return i.sent(),[3,10];case 8:return[4,this.enterToTips(s.fid,e)];case 9:return i.sent(),[3,10];case 10:return s.closeType===l.ECloseType.LRU&&this._LRUCache.remove(s.fid),[2,s]}})})},t.prototype.closeForm=function(t,e){return o(this,void 0,Promise,function(){var n,o;return i(this,function(i){switch(i.label){case 0:if(!(n=t.prefabUrl)||n.length<=0)return cc.warn(f,n+", \u53c2\u6570\u9519\u8bef"),[2,!1];if(!(o=this._allForms[n]))return[2,!1];if(!this.checkFormShowing(n)&&t.type!==r.FormType.Tips)return cc.warn(f,n+", \u5df2\u7ecf\u5173\u95ed\u4e86, \u8bf7\u4e0d\u8981\u91cd\u590d\u5173\u95ed"),[2,!1];if(this._closingForm[n])return cc.warn(f,n+", form\u6b63\u5728\u5173\u95ed\u4e2d"),[2];switch(this._closingForm[n]=o,o.formType){case r.FormType.Screen:return[3,1];case r.FormType.Fixed:return[3,3];case r.FormType.Window:return[3,5];case r.FormType.Tips:return[3,7]}return[3,9];case 1:return[4,this.exitToScreen(n,e)];case 2:return i.sent(),[3,9];case 3:return[4,this.exitToFixed(n,e)];case 4:return i.sent(),[3,9];case 5:return[4,this.exitToPopup(n,e)];case 6:return i.sent(),h.EventCenter.emit(p.EventType.WindowClosed,n),[3,9];case 7:return[4,this.exitToTips(n,e)];case 8:return i.sent(),[3,9];case 9:switch(h.EventCenter.emit(p.EventType.FormClosed,n),o.formData&&o.formData.onClose&&o.formData.onClose(),o.closeType){case l.ECloseType.CloseAndDestory:this.destoryForm(o);break;case l.ECloseType.LRU:this.putLRUCache(o)}return this._closingForm[n]=null,delete this._closingForm[n],[2,!0]}})})},t.prototype._loadForm=function(t){return o(this,void 0,Promise,function(){var e,n=this;return i(this,function(){return(e=this._allForms[t])?[2,e]:[2,new Promise(function(e){n._loadingForm[t]?n._loadingForm[t].push(e):(n._loadingForm[t]=[e],n._doLoadUIForm(t).then(function(e){for(var o=0,i=n._loadingForm[t];o<i.length;o++)(0,i[o])(e);n._loadingForm[t]=null,delete n._loadingForm[t]}))})]})})},t.prototype._doLoadUIForm=function(t){return o(this,void 0,Promise,function(){var e,n,o;return i(this,function(i){switch(i.label){case 0:return[4,s.default.inst.loadFormPrefab(t)];case 1:return e=i.sent(),n=cc.instantiate(e),o=this.addNode(n),this._allForms[t]=o,[2,o]}})})},t.prototype.addNode=function(t){var e=t.getComponent(cc.UIBase);if(!e)return cc.warn(t.name+" \u7ed3\u70b9\u6ca1\u6709\u7ed1\u5b9aUIBase"),null;switch(t.active=!1,e.formType){case r.FormType.Screen:this._ndScreen.addChild(t);break;case r.FormType.Fixed:this._ndFixed.addChild(t);break;case r.FormType.Window:this._ndPopUp.addChild(t);break;case r.FormType.Toast:this._ndToast.addChild(t);break;case r.FormType.Tips:this._ndTips.addChild(t)}return e},t.prototype.enterToScreen=function(t,e){return o(this,void 0,void 0,function(){var n,o,r;return i(this,function(i){switch(i.label){case 0:for(o in n=[],this._showingForms)n.push(this._showingForms[o].closeSelf());return[4,Promise.all(n)];case 1:return i.sent(),(r=this._allForms[t])?(this._showingForms[t]=r,c.default.inst.adapteByType(c.AdapterType.StretchHeight|c.AdapterType.StretchWidth,r.node),[4,r._preInit(e)]):[2];case 2:return i.sent(),r.onShow(e),[4,this.showEffect(r)];case 3:return i.sent(),r.onAfterShow(e),[2]}})})},t.prototype.enterToFixed=function(t,e){return o(this,void 0,void 0,function(){var n;return i(this,function(o){switch(o.label){case 0:return(n=this._allForms[t])?[4,n._preInit(e)]:[2];case 1:return o.sent(),n.onShow(e),this._showingForms[t]=n,[4,this.showEffect(n)];case 2:return o.sent(),n.onAfterShow(e),[2]}})})},t.prototype.enterToPopup=function(t,e){return o(this,void 0,void 0,function(){var n,o;return i(this,function(i){switch(i.label){case 0:return(n=this._allForms[t])?[4,n._preInit(e)]:[2];case 1:for(i.sent(),this._windows.push(n),o=0;o<this._windows.length;o++)this._windows[o].node.zIndex=o+1;return n.onShow(e),this._showingForms[t]=n,a.default.inst.checkModalWindow(this._windows),[4,this.showEffect(n)];case 2:return i.sent(),n.onAfterShow(e),[2]}})})},t.prototype.enterToTips=function(t,e){return o(this,void 0,void 0,function(){var n;return i(this,function(o){switch(o.label){case 0:return(n=this._allForms[t])?[4,n._preInit(e)]:[2];case 1:return o.sent(),this._tipsForms[t]=n,n.onShow(e),[4,this.showEffect(n)];case 2:return o.sent(),n.onAfterShow(e),[2]}})})},t.prototype.enterToToast=function(t,e){return o(this,void 0,void 0,function(){return i(this,function(n){switch(n.label){case 0:return[4,t._preInit(e)];case 1:return n.sent(),t.onShow(e),[4,this.showEffect(t)];case 2:return n.sent(),t.onAfterShow(e),[2]}})})},t.prototype.exitToScreen=function(t,e){return o(this,void 0,void 0,function(){var n;return i(this,function(o){switch(o.label){case 0:return(n=this._showingForms[t])?(n.onHide(e),[4,this.hideEffect(n)]):[2];case 1:return o.sent(),n.onAfterHide(e),this._showingForms[t]=null,delete this._showingForms[t],[2]}})})},t.prototype.exitToFixed=function(t,e){return o(this,void 0,void 0,function(){var n;return i(this,function(o){switch(o.label){case 0:return(n=this._allForms[t])?(n.onHide(e),[4,this.hideEffect(n)]):[2];case 1:return o.sent(),n.onAfterHide(e),this._showingForms[t]=null,delete this._showingForms[t],[2]}})})},t.prototype.exitToPopup=function(t,e){return o(this,void 0,void 0,function(){var n,o;return i(this,function(i){switch(i.label){case 0:if(this._windows.length<=0)return[2];for(n=null,o=this._windows.length-1;o>=0;o--)this._windows[o].fid===t&&(n=this._windows[o],this._windows.splice(o,1));return n?(n.onHide(e),a.default.inst.checkModalWindow(this._windows),[4,this.hideEffect(n)]):[2];case 1:return i.sent(),n.onAfterHide(e),this._showingForms[t]=null,delete this._showingForms[t],[2]}})})},t.prototype.exitToTips=function(t,e){return o(this,void 0,void 0,function(){var n;return i(this,function(o){switch(o.label){case 0:return(n=this._allForms[t])?(n.onHide(e),[4,this.hideEffect(n)]):[2];case 1:return o.sent(),n.onAfterHide(e),this._tipsForms[t]=null,delete this._tipsForms[t],[2]}})})},t.prototype.exitToToast=function(t,e){return o(this,void 0,void 0,function(){return i(this,function(n){switch(n.label){case 0:return t.onHide(e),[4,this.hideEffect(t)];case 1:return n.sent(),t.onAfterHide(e),[2]}})})},t.prototype.showEffect=function(t){var e;return o(this,void 0,void 0,function(){return i(this,function(n){switch(n.label){case 0:return t.node.active=!0,(null===(e=t.formData)||void 0===e?void 0:e.quick)?[3,2]:[4,t.showEffect()];case 1:n.sent(),n.label=2;case 2:return[2]}})})},t.prototype.hideEffect=function(t){var e;return o(this,void 0,void 0,function(){return i(this,function(n){switch(n.label){case 0:return(null===(e=t.formData)||void 0===e?void 0:e.quick)?[3,2]:[4,t.hideEffect()];case 1:n.sent(),n.label=2;case 2:return t.node.active=!1,[2]}})})},t.prototype.destoryForm=function(t){h.EventCenter.targetOff(t),t.node.destroy(),s.default.inst.destoryFormPrefab(t.fid),s.default.inst.destoryDynamicRes(t.fid),this._allForms[t.fid]=null,delete this._allForms[t.fid]},t.prototype.putLRUCache=function(t){if(this._LRUCache.put(t.fid),this._LRUCache.needDelete()){var e=this._LRUCache.deleteLastNode();if(e){var n=this.getForm(e);if(!n||!n.node)return;n&&this.destoryForm(n)}}},t.prototype.checkFormShowing=function(t){return!!this._showingForms[t]},t.prototype.checkFormLoading=function(t){return!!this._loadingForm[t]},t.prototype.getForm=function(t){return this._allForms[t]},t.prototype.getUIROOT=function(){return this._UIROOT},t.instance=null,t}();n.default=_,cc._RF.pop()},{"../Common/Utils/LRUCache":"LRUCache","../Scene/Scene":"Scene","./AdapterMgr":"AdapterMgr","./EventCenter":"EventCenter","./EventType":"EventType","./ModalMgr":"ModalMgr","./ResMgr":"ResMgr","./Struct":"Struct","./config/SysDefine":"SysDefine"}],UIModalScript:[function(t,e,n){"use strict";cc._RF.push(e,"80f365N6pFApJ6MlMUc+H9D","UIModalScript");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},s=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function s(t){try{c(o.next(t))}catch(e){r(e)}}function a(t){try{c(o.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}c((o=o.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,o,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(t){return function(e){return c([t,e])}}function c(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,o=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(a){r=[6,a],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var c=t("./UIManager"),u=t("./config/SysDefine"),l=t("./CocosHelper"),h=t("./WindowMgr"),p=(cc.RenderFlow.FLAG_RENDER,cc.RenderFlow.FLAG_POST_RENDER,cc._decorator),d=p.ccclass,f=(p.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprite=null,e.camera=null,e._texture=null,e._renderTexture=null,e._renderTextures=[],e}return i(e,t),e.prototype.init=function(){var t=cc.view.getVisibleSize();this.node.height=t.height,this.node.width=t.width,this.node.addComponent(cc.Button),this.node.on("click",this.clickMaskWindow,this),this.sprite=this.node.addComponent(cc.Sprite),this.useNormalSprite(this.sprite),this.node.color=new cc.Color(255,255,255),this.node.opacity=0,this.node.active=!1},e.prototype.showModal=function(t,e,n,o){return void 0===e&&(e=.6),void 0===n&&(n=!0),void 0===o&&(o=!1),s(this,void 0,void 0,function(){var i,r;return a(this,function(s){switch(s.label){case 0:switch(o?(this.camera||(i=new cc.Node("BlurCamera"),this.camera=i.addComponent(cc.Camera),cc.find("Canvas").addChild(i)),this.useDualBlurSprite(this.camera),this.node.color=cc.Color.WHITE):(this.useNormalSprite(this.sprite),this.node.color=cc.Color.BLACK),r=0,t){case u.ModalOpacity.None:this.node.active=!1;break;case u.ModalOpacity.OpacityZero:r=0;break;case u.ModalOpacity.OpacityLow:r=63;break;case u.ModalOpacity.OpacityHalf:r=126;break;case u.ModalOpacity.OpacityHigh:r=189;break;case u.ModalOpacity.OpacityFull:r=255}return this.node.active?n?[4,l.default.runTweenSync(this.node,cc.tween().to(e,{opacity:r}))]:[3,2]:[2];case 1:return s.sent(),[3,3];case 2:this.node.opacity=r,s.label=3;case 3:return[2]}})})},e.prototype.clickMaskWindow=function(){return s(this,void 0,void 0,function(){var t;return a(this,function(e){switch(e.label){case 0:return(t=c.default.getInstance().getForm(this.fid))&&t.modalType.clickMaskClose?[4,h.default.close(this.fid)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},e.prototype.getSingleTexture=function(){if(this._texture)return this._texture;for(var t=new Uint8Array(16),e=0;e<2;e++)for(var n=0;n<2;n++)t[8*e+4*n+0]=255,t[8*e+4*n+1]=255,t[8*e+4*n+2]=255,t[8*e+4*n+3]=255;var o=new cc.Texture2D;return o.name="single color",o.initWithData(t,cc.Texture2D.PixelFormat.RGBA8888,2,2),o.handleLoadedTexture(),this._texture=o,o.addRef(),this._texture},e.prototype.useNormalSprite=function(t){t.sizeMode=cc.Sprite.SizeMode.CUSTOM,t.type=cc.Sprite.Type.SIMPLE,t.spriteFrame=new cc.SpriteFrame(this.getSingleTexture())},e.prototype.useDualBlurSprite=function(t){var e=this,n=[];this._renderTexture||(this._renderTexture=new cc.RenderTexture).initWithSize(cc.visibleRect.width,cc.visibleRect.height,cc.game._renderContext.STENCIL_INDEX8),t.enabled=!0,t.targetTexture=this._renderTexture,function(){for(var t=0,o=c.default.getInstance().getUIROOT().getChildByName(u.SysDefine.SYS_TOPTIPS_NODE).children;t<o.length;t++)(s=o[t])._activeInHierarchy&&0!=s.opacity&&(s._dirtyRenderFlag=s._renderFlag,s._renderFlag&=~(cc.RenderFlow.FLAG_CHILDREN|cc.RenderFlow.FLAG_RENDER),n.push(s));e.node._renderFlag&=~cc.RenderFlow.FLAG_RENDER;for(var i=c.default.getInstance().getUIROOT().getChildByName(u.SysDefine.SYS_POPUP_NODE).children,r=i.length-1;r>=0;r--)if(i[r].zIndex>e.node.zIndex){var s;if(!(s=i[r])._activeInHierarchy||0==s.opacity)continue;s._dirtyRenderFlag=s._renderFlag,s._renderFlag&=~(cc.RenderFlow.FLAG_CHILDREN|cc.RenderFlow.FLAG_RENDER),n.push(s)}}(),t.render(),function(){for(var t=0,e=n;t<e.length;t++){var o=e[t];o._renderFlag=o._dirtyRenderFlag}}(),this.sprite.spriteFrame.setTexture(t.targetTexture),this.sprite.markForRender(!0),this.renderDualBlur(t,3),t.enabled=!1},e.prototype.renderDualBlur=function(t,e){var n=cc.view.getVisibleSize();if(this._renderTextures.length<=0)for(var o=0;o<e;o++){var i=Math.pow(2,o),r=new cc.RenderTexture;r.initWithSize(cc.visibleRect.width/i|0,cc.visibleRect.height/i|0),this._renderTextures.push(r)}for(_||((_=this.genMaterial(m)).setProperty("v_halfpixel",[.5/n.width,.5/n.height]),_.setProperty("v_offset",[4,4])),this.sprite.setMaterial(0,_),o=0;o<e;o++)t.targetTexture=this._renderTextures[o],t.render(this.sprite.node),this.sprite.spriteFrame.setTexture(t.targetTexture),this.sprite.markForRender(!0);for(y||((y=this.genMaterial(v)).setProperty("v_halfpixel",[.5/n.width,.5/n.height]),y.setProperty("v_offset",[4,4])),this.sprite.setMaterial(0,y),o=e-1;o>0;o--)t.targetTexture=this._renderTextures[o-1],t.render(this.sprite.node),this.sprite.spriteFrame.setTexture(t.targetTexture),this.sprite.markForRender(!0);this.sprite.setMaterial(0,cc.Material.getBuiltinMaterial("2d-sprite"))},e.prototype.genMaterial=function(t){var e=cc.deserialize(t,{priority:0,responseType:"json"});return e.onLoad&&e.onLoad(),e.__onLoadInvoked__=!0,cc.Material.create(e,0)},r([d],e)}(cc.Component));n.default=f;var _=null,y=null,v={__type__:"cc.EffectAsset",_name:"BlurUp",_objFlags:0,_native:"",properties:null,techniques:[{passes:[{blendState:{targets:[{blend:!0}]},rasterizerState:{cullMode:0},properties:{texture:{value:"white",type:29},alphaThreshold:{value:[.5],type:13}},program:"BlurUp|vs|fs"}]}],shaders:[{hash:3005313742,glsl3:{vert:"\nprecision highp float;\nuniform CCGlobal {\n  mat4 cc_matView;\n  mat4 cc_matViewInv;\n  mat4 cc_matProj;\n  mat4 cc_matProjInv;\n  mat4 cc_matViewProj;\n  mat4 cc_matViewProjInv;\n  vec4 cc_cameraPos;\n  vec4 cc_time;\n  mediump vec4 cc_screenSize;\n  mediump vec4 cc_screenScale;\n};\nuniform CCLocal {\n  mat4 cc_matWorld;\n  mat4 cc_matWorldIT;\n};\nin vec3 a_position;\nin vec4 a_color;\nout vec4 v_color;\n#if USE_TEXTURE\nin vec2 a_uv0;\nout vec2 v_uv0;\n#endif\nvoid main () {\n  vec4 pos = vec4(a_position, 1);\n  #if CC_USE_MODEL\n  pos = cc_matViewProj * cc_matWorld * pos;\n  #else\n  pos = cc_matViewProj * pos;\n  #endif\n  #if USE_TEXTURE\n  v_uv0 = a_uv0;\n  #endif\n  v_color = a_color;\n  gl_Position = pos;\n}",frag:"\nprecision highp float;\n#if USE_ALPHA_TEST\n  uniform ALPHA_TEST {\n    float alphaThreshold;\n  };\n#endif\nvoid ALPHA_TEST (in vec4 color) {\n  #if USE_ALPHA_TEST\n      if (color.a < alphaThreshold) discard;\n  #endif\n}\nvoid ALPHA_TEST (in float alpha) {\n  #if USE_ALPHA_TEST\n      if (alpha < alphaThreshold) discard;\n  #endif\n}\nin vec4 v_color;\n#if USE_TEXTURE\nin vec2 v_uv0;\nuniform sampler2D texture;\n#endif\nuniform CustomUniform {\n  vec2 v_halfpixel;\n  vec2 v_offset;\n};\nvoid main () {\n  vec4 o = vec4(1, 1, 1, 1);\n  vec4 sum = texture2D(texture, v_uv0) * 4.0;\n  sum += texture2D(texture, v_uv0 - v_halfpixel.xy * v_offset);\n  sum += texture2D(texture, v_uv0 + v_halfpixel.xy * v_offset);\n  sum += texture2D(texture, v_uv0 + vec2(v_halfpixel.x, -v_halfpixel.y) * v_offset);\n  sum += texture2D(texture, v_uv0 - vec2(v_halfpixel.x, -v_halfpixel.y) * v_offset);\n  o = sum / 8.0;\n  o *= v_color;\n  ALPHA_TEST(o);\n  #if USE_BGRA\n    gl_FragColor = o.bgra;\n  #else\n    gl_FragColor = o.rgba;\n  #endif\n}"},glsl1:{vert:"\nprecision highp float;\nuniform mat4 cc_matViewProj;\nuniform mat4 cc_matWorld;\nattribute vec3 a_position;\nattribute vec4 a_color;\nvarying vec4 v_color;\n#if USE_TEXTURE\nattribute vec2 a_uv0;\nvarying vec2 v_uv0;\n#endif\nvoid main () {\n  vec4 pos = vec4(a_position, 1);\n  #if CC_USE_MODEL\n  pos = cc_matViewProj * cc_matWorld * pos;\n  #else\n  pos = cc_matViewProj * pos;\n  #endif\n  #if USE_TEXTURE\n  v_uv0 = a_uv0;\n  #endif\n  v_color = a_color;\n  gl_Position = pos;\n}",frag:"\nprecision highp float;\n#if USE_ALPHA_TEST\n  uniform float alphaThreshold;\n#endif\nvoid ALPHA_TEST (in vec4 color) {\n  #if USE_ALPHA_TEST\n      if (color.a < alphaThreshold) discard;\n  #endif\n}\nvoid ALPHA_TEST (in float alpha) {\n  #if USE_ALPHA_TEST\n      if (alpha < alphaThreshold) discard;\n  #endif\n}\nvarying vec4 v_color;\n#if USE_TEXTURE\nvarying vec2 v_uv0;\nuniform sampler2D texture;\n#endif\nuniform vec2 v_halfpixel;\nuniform vec2 v_offset;\nvoid main () {\n  vec4 o = vec4(1, 1, 1, 1);\n  vec4 sum = texture2D(texture, v_uv0) * 4.0;\n  sum += texture2D(texture, v_uv0 - v_halfpixel.xy * v_offset);\n  sum += texture2D(texture, v_uv0 + v_halfpixel.xy * v_offset);\n  sum += texture2D(texture, v_uv0 + vec2(v_halfpixel.x, -v_halfpixel.y) * v_offset);\n  sum += texture2D(texture, v_uv0 - vec2(v_halfpixel.x, -v_halfpixel.y) * v_offset);\n  o = sum / 8.0;\n  o *= v_color;\n  ALPHA_TEST(o);\n  #if USE_BGRA\n    gl_FragColor = o.bgra;\n  #else\n    gl_FragColor = o.rgba;\n  #endif\n}"},builtins:{globals:{blocks:[{name:"CCGlobal",defines:[]}],samplers:[]},locals:{blocks:[{name:"CCLocal",defines:[]}],samplers:[]}},defines:[{name:"USE_TEXTURE",type:"boolean",defines:[]},{name:"CC_USE_MODEL",type:"boolean",defines:[]},{name:"USE_ALPHA_TEST",type:"boolean",defines:[]},{name:"USE_BGRA",type:"boolean",defines:[]}],blocks:[{name:"ALPHA_TEST",members:[{name:"alphaThreshold",type:13,count:1}],defines:["USE_ALPHA_TEST"],binding:0},{name:"CustomUniform",members:[{name:"v_halfpixel",type:14,count:1},{name:"v_offset",type:14,count:1}],defines:[],binding:1}],samplers:[{name:"texture",type:29,count:1,defines:["USE_TEXTURE"],binding:30}],record:null,name:"BlurUp|vs|fs"}]},m={__type__:"cc.EffectAsset",_name:"BlurDown",_objFlags:0,_native:"",properties:null,techniques:[{passes:[{blendState:{targets:[{blend:!0}]},rasterizerState:{cullMode:0},properties:{texture:{value:"white",type:29},alphaThreshold:{value:[.5],type:13}},program:"BlurDown|vs|fs"}]}],shaders:[{hash:4206633856,glsl3:{vert:"\nprecision highp float;\nuniform CCGlobal {\n  mat4 cc_matView;\n  mat4 cc_matViewInv;\n  mat4 cc_matProj;\n  mat4 cc_matProjInv;\n  mat4 cc_matViewProj;\n  mat4 cc_matViewProjInv;\n  vec4 cc_cameraPos;\n  vec4 cc_time;\n  mediump vec4 cc_screenSize;\n  mediump vec4 cc_screenScale;\n};\nuniform CCLocal {\n  mat4 cc_matWorld;\n  mat4 cc_matWorldIT;\n};\nin vec3 a_position;\nin vec4 a_color;\nout vec4 v_color;\n#if USE_TEXTURE\nin vec2 a_uv0;\nout vec2 v_uv0;\n#endif\nvoid main () {\n  vec4 pos = vec4(a_position, 1);\n  #if CC_USE_MODEL\n  pos = cc_matViewProj * cc_matWorld * pos;\n  #else\n  pos = cc_matViewProj * pos;\n  #endif\n  #if USE_TEXTURE\n  v_uv0 = a_uv0;\n  #endif\n  v_color = a_color;\n  gl_Position = pos;\n}",frag:"\nprecision highp float;\n#if USE_ALPHA_TEST\n  uniform ALPHA_TEST {\n    float alphaThreshold;\n  };\n#endif\nvoid ALPHA_TEST (in vec4 color) {\n  #if USE_ALPHA_TEST\n      if (color.a < alphaThreshold) discard;\n  #endif\n}\nvoid ALPHA_TEST (in float alpha) {\n  #if USE_ALPHA_TEST\n      if (alpha < alphaThreshold) discard;\n  #endif\n}\nin vec4 v_color;\n#if USE_TEXTURE\nin vec2 v_uv0;\nuniform sampler2D texture;\n#endif\nuniform CustomUniform {\n  vec2 v_halfpixel;\n  vec2 v_offset;\n};\nvoid main () {\n  vec4 o = vec4(1, 1, 1, 1);\n  vec4 sum = texture2D(texture, v_uv0 + vec2(-v_halfpixel.x * 2.0, 0.0) * v_offset);\n  sum += texture2D(texture, v_uv0 + vec2(-v_halfpixel.x, v_halfpixel.y) * v_offset) * 2.0;\n  sum += texture2D(texture, v_uv0 + vec2(0.0, v_halfpixel.y * 2.0) * v_offset);\n  sum += texture2D(texture, v_uv0 + vec2(v_halfpixel.x, v_halfpixel.y) * v_offset) * 2.0;\n  sum += texture2D(texture, v_uv0 + vec2(v_halfpixel.x * 2.0, 0.0) * v_offset);\n  sum += texture2D(texture, v_uv0 + vec2(v_halfpixel.x, -v_halfpixel.y) * v_offset) * 2.0;\n  sum += texture2D(texture, v_uv0 + vec2(0.0, -v_halfpixel.y * 2.0) * v_offset);\n  sum += texture2D(texture, v_uv0 + vec2(-v_halfpixel.x, -v_halfpixel.y) * v_offset) * 2.0;\n  o = sum / 12.0;\n  o *= v_color;\n  ALPHA_TEST(o);\n  #if USE_BGRA\n    gl_FragColor = o.bgra;\n  #else\n    gl_FragColor = o.rgba;\n  #endif\n}"},glsl1:{vert:"\nprecision highp float;\nuniform mat4 cc_matViewProj;\nuniform mat4 cc_matWorld;\nattribute vec3 a_position;\nattribute vec4 a_color;\nvarying vec4 v_color;\n#if USE_TEXTURE\nattribute vec2 a_uv0;\nvarying vec2 v_uv0;\n#endif\nvoid main () {\n  vec4 pos = vec4(a_position, 1);\n  #if CC_USE_MODEL\n  pos = cc_matViewProj * cc_matWorld * pos;\n  #else\n  pos = cc_matViewProj * pos;\n  #endif\n  #if USE_TEXTURE\n  v_uv0 = a_uv0;\n  #endif\n  v_color = a_color;\n  gl_Position = pos;\n}",frag:"\nprecision highp float;\n#if USE_ALPHA_TEST\n  uniform float alphaThreshold;\n#endif\nvoid ALPHA_TEST (in vec4 color) {\n  #if USE_ALPHA_TEST\n      if (color.a < alphaThreshold) discard;\n  #endif\n}\nvoid ALPHA_TEST (in float alpha) {\n  #if USE_ALPHA_TEST\n      if (alpha < alphaThreshold) discard;\n  #endif\n}\nvarying vec4 v_color;\n#if USE_TEXTURE\nvarying vec2 v_uv0;\nuniform sampler2D texture;\n#endif\nuniform vec2 v_halfpixel;\nuniform vec2 v_offset;\nvoid main () {\n  vec4 o = vec4(1, 1, 1, 1);\n  vec4 sum = texture2D(texture, v_uv0 + vec2(-v_halfpixel.x * 2.0, 0.0) * v_offset);\n  sum += texture2D(texture, v_uv0 + vec2(-v_halfpixel.x, v_halfpixel.y) * v_offset) * 2.0;\n  sum += texture2D(texture, v_uv0 + vec2(0.0, v_halfpixel.y * 2.0) * v_offset);\n  sum += texture2D(texture, v_uv0 + vec2(v_halfpixel.x, v_halfpixel.y) * v_offset) * 2.0;\n  sum += texture2D(texture, v_uv0 + vec2(v_halfpixel.x * 2.0, 0.0) * v_offset);\n  sum += texture2D(texture, v_uv0 + vec2(v_halfpixel.x, -v_halfpixel.y) * v_offset) * 2.0;\n  sum += texture2D(texture, v_uv0 + vec2(0.0, -v_halfpixel.y * 2.0) * v_offset);\n  sum += texture2D(texture, v_uv0 + vec2(-v_halfpixel.x, -v_halfpixel.y) * v_offset) * 2.0;\n  o = sum / 12.0;\n  o *= v_color;\n  ALPHA_TEST(o);\n  #if USE_BGRA\n    gl_FragColor = o.bgra;\n  #else\n    gl_FragColor = o.rgba;\n  #endif\n}"},builtins:{globals:{blocks:[{name:"CCGlobal",defines:[]}],samplers:[]},locals:{blocks:[{name:"CCLocal",defines:[]}],samplers:[]}},defines:[{name:"USE_TEXTURE",type:"boolean",defines:[]},{name:"CC_USE_MODEL",type:"boolean",defines:[]},{name:"USE_ALPHA_TEST",type:"boolean",defines:[]},{name:"USE_BGRA",type:"boolean",defines:[]}],blocks:[{name:"ALPHA_TEST",members:[{name:"alphaThreshold",type:13,count:1}],defines:["USE_ALPHA_TEST"],binding:0},{name:"CustomUniform",members:[{name:"v_halfpixel",type:14,count:1},{name:"v_offset",type:14,count:1}],defines:[],binding:1}],samplers:[{name:"texture",type:29,count:1,defines:["USE_TEXTURE"],binding:30}],record:null,name:"BlurDown|vs|fs"}]};cc._RF.pop()},{"./CocosHelper":"CocosHelper","./UIManager":"UIManager","./WindowMgr":"WindowMgr","./config/SysDefine":"SysDefine"}],UIWorkDesk_Auto:[function(t,e,n){"use strict";cc._RF.push(e,"96cb8I22TJPHYxW6gg45dRb","UIWorkDesk_Auto");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var s=t("./../Common/Components/List"),a=cc._decorator,c=a.ccclass,u=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.MenuList=null,e.Scroll=null,e.CoffeePos=null,e}return i(e,t),r([u(cc.Node)],e.prototype,"MenuList",void 0),r([u(s.default)],e.prototype,"Scroll",void 0),r([u(cc.Node)],e.prototype,"CoffeePos",void 0),r([c],e)}(cc.Component);n.default=l,cc._RF.pop()},{"./../Common/Components/List":"List"}],UIWorkDesk:[function(t,e,n){"use strict";cc._RF.push(e,"b0b79n3Ta5Bz7qDiGc5ZdnV","UIWorkDesk");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},s=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function s(t){try{c(o.next(t))}catch(e){r(e)}}function a(t){try{c(o.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}c((o=o.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,o,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(t){return function(e){return c([t,e])}}function c(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,o=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(a){r=[6,a],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.DragType=void 0;var c,u=t("../Common/GPDrag"),l=t("../Config/RawMaterial"),h=t("../Game/Coffee"),p=t("../Game/Item/MenuItem"),d=t("../Game/Item/RawItem"),f=t("../UIFrame/CocosHelper"),_=t("../UIFrame/Struct"),y=t("../UIFrame/UIForm"),v=t("../UIFrame/config/SysDefine"),m=cc._decorator,g=m.ccclass,b=m.property;(function(t){t[t.Raw=0]="Raw",t[t.Menu=1]="Menu"})(c=n.DragType||(n.DragType={}));var w=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.coffee=null,e.menu=null,e.coffeeNode=null,e.menuNode=null,e.modalType=new _.ModalType(v.ModalOpacity.OpacityZero),e.menuMaxNum=6,e.dragIndex=-1,e.dragCount=0,e.dragItem=null,e.dragMenuItem=null,e.dragType=null,e}var n;return i(e,t),n=e,e.prototype.start=function(){console.log("UIBackpack start..."),this.addCoffe()},e.prototype.addCoffe=function(){this.coffeeNode=cc.instantiate(this.coffee),this.coffeeNode.parent=this.view.CoffeePos,this.coffeeNode.active=!1,this.coffeeNode.position=cc.v3(0,61),this.coffeeNode.angle=8;for(var t=0;t<=this.menuMaxNum;t++){var e=cc.instantiate(this.menu);t<this.menuMaxNum?(e.getComponent(u.GPDrag).enabled=!1,e.getComponent(p.default).init(this),e.parent=this.view.MenuList,this.view.MenuList.getComponent(cc.Layout).updateLayout()):(this.menuNode=e,e.getComponent(p.default).enabled=!1,this.menuComp.succeedCheck=this.succkCheck.bind(this),this.menuComp.succeedCallback=this.succeedCallback.bind(this),this.menuNode.children[0].active=!0,this.menuNode.parent=this.node,this.menuNode.active=!1)}},e.prototype.close=function(){n.close()},e.prototype.showEffect=function(){return s(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return this.node.scale=0,this.node.position=cc.v3(0,-800),[4,f.default.runTweenSync(this.node,cc.tween().by(.3,{position:cc.v3(0,400),scale:1},cc.easeBackOut()))];case 1:return t.sent(),[2]}})})},e.prototype.hideEffect=function(){return s(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return[4,f.default.runTweenSync(this.node,cc.tween().to(.8,{position:cc.v3(0,-800),scale:0},cc.easeBackOut()))];case 1:return t.sent(),[2]}})})},e.prototype.onAfterShow=function(){this.view.Scroll.numItems=l.RawMaterial.length,this.view.Scroll.scrollTo(0,0,.1)},e.prototype.onListGridRender=function(t,e){t.getComponent(d.default).initUi(l.RawMaterial[e],this)},e.prototype.clickMake=function(){return s(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return this.coffeeNode.active=!0,[4,f.default.runTweenSync(this.coffeeNode,cc.tween().to(.5,{position:cc.v3(0,0),angle:0}))];case 1:return t.sent(),this.coffeComp.runTopUp(),[2]}})})},Object.defineProperty(e.prototype,"coffeComp",{get:function(){return this.coffeeNode.getComponent(h.default)},enumerable:!1,configurable:!0}),e.prototype.dragNode=function(t,e,n){this.dragType=n,n==c.Raw?this.dragItem=e:this.dragMenuItem=e,this.view.Scroll.node.getComponent(cc.ScrollView).enabled=!1,this.menuNode.setContentSize(cc.size(e.node.width,e.node.height)),this.menuNode.children[0].getComponent(cc.Sprite).spriteFrame=e.icon.spriteFrame;var o=this.node.convertToNodeSpaceAR(t.getLocation());this.menuNode.position=cc.v3(o.x,o.y),this.menuNode.active=!0,t.target=this.menuNode,t.currentTarget=this.menuNode,this.dragIndex=l.RawMaterial.indexOf(e.itemData),this.menuComp.OnDragStart(t)},e.prototype.dragMove=function(t){this.menuNode&&(t.target=this.menuNode,t.currentTarget=this.menuNode,this.menuComp.OnDragMove(t))},e.prototype.dragEnd=function(t){this.menuNode&&(t.target=this.menuNode,t.currentTarget=this.menuNode,this.menuComp.OnDragEnd(t))},e.prototype.succkCheck=function(){var t=this.view.MenuList.getBoundingBoxToWorld();this.dragType==c.Menu&&(t=this.view.Scroll.node.getBoundingBoxToWorld());var e=cc.Intersection.rectRect(this.menuNode.getBoundingBoxToWorld(),t);return e||((this.menuComp.backHomeType=u.DragBackHomeType.Tween)?this.scheduleOnce(this.initDragData,this.menuComp.backTweenTime):this.initDragData()),e},e.prototype.succeedCallback=function(){var t=this.view.MenuList.children[this.dragCount].children[0];this.dragType==c.Raw?(t.getComponent(cc.Sprite).spriteFrame=this.dragItem.icon.spriteFrame,t.active=!0,this.dragCount++):this.dragMenuItem.icon.node.active=!1,this.initDragData()},Object.defineProperty(e.prototype,"menuComp",{get:function(){return this.menuNode.getComponent(u.GPDrag)},enumerable:!1,configurable:!0}),e.prototype.initDragData=function(){this.menuNode.active=!1,this.dragIndex=-1,this.view.Scroll.node.getComponent(cc.ScrollView).enabled=!0},r([b(cc.Prefab)],e.prototype,"coffee",void 0),r([b(cc.Prefab)],e.prototype,"menu",void 0),n=r([g],e)}(y.UIWindow);n.default=w,cc._RF.pop()},{"../Common/GPDrag":"GPDrag","../Config/RawMaterial":"RawMaterial","../Game/Coffee":"Coffee","../Game/Item/MenuItem":"MenuItem","../Game/Item/RawItem":"RawItem","../UIFrame/CocosHelper":"CocosHelper","../UIFrame/Struct":"Struct","../UIFrame/UIForm":"UIForm","../UIFrame/config/SysDefine":"SysDefine"}],WindowMgr:[function(t,e,n){"use strict";cc._RF.push(e,"3a04aa299JD1rqA2T4NCR4W","WindowMgr");var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function s(t){try{c(o.next(t))}catch(e){r(e)}}function a(t){try{c(o.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}c((o=o.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,o,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(t){return function(e){return c([t,e])}}function c(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,o=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(a){r=[6,a],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../Common/Utils/PriorityQueue"),s=t("../Common/Utils/PriorityStack"),a=t("./config/SysDefine"),c=t("./Struct"),u=t("./UIManager"),l=function(){function t(){this._showingList=new s.default(function(t,e){return t.prefabUrl===e.prefabUrl}),this._waitingList=new r.default}return Object.defineProperty(t.prototype,"currWindow",{get:function(){return this._currWindow},enumerable:!1,configurable:!0}),t.prototype.getWindows=function(){return this._showingList.getElements()},t.prototype.open=function(t,e,n){return o(this,void 0,void 0,function(){var o;return i(this,function(i){switch(i.label){case 0:return t=c.GetForm(t,a.FormType.Window),o=t.prefabUrl,n=this._formatFormData(n),this._showingList.size<=0||!n.showWait&&n.priority>=this._showingList.getTopEPriority()?(this._showingList.push(t,n.priority),this._currWindow=this._showingList.getTopElement(),[4,u.default.getInstance().openForm(t,e,n)]):[3,2];case 1:return[2,i.sent()];case 2:return this._waitingList.enqueue({form:t,params:e,formData:n}),[4,u.default.getInstance().loadUIForm(o)];case 3:return[2,i.sent()]}})})},t.prototype.close=function(t,e,n){return o(this,void 0,void 0,function(){var o;return i(this,function(i){switch(i.label){case 0:return t=c.GetForm(t,a.FormType.Window),this._showingList.remove(t)?[4,u.default.getInstance().closeForm(t,e,n)]:[2,!1];case 1:return i.sent(),this._showingList.size<=0&&this._waitingList.size>0&&(o=this._waitingList.dequeue(),this.open(o.form,o.params,o.formData)),[2,!0]}})})},t.prototype.closeAll=function(){return o(this,void 0,void 0,function(){var t,e,n;return i(this,function(o){switch(o.label){case 0:this._waitingList.clear(),t=0,e=this._showingList.getElements(),o.label=1;case 1:return t<e.length?(n=e[t],[4,u.default.getInstance().closeForm(n)]):[3,4];case 2:o.sent(),o.label=3;case 3:return t++,[3,1];case 4:return this._showingList.clear(),[2,!0]}})})},t.prototype._formatFormData=function(t){return Object.assign({showWait:!1,priority:c.EPriority.FIVE},t)},t}();n.default=new l,cc._RF.pop()},{"../Common/Utils/PriorityQueue":"PriorityQueue","../Common/Utils/PriorityStack":"PriorityStack","./Struct":"Struct","./UIManager":"UIManager","./config/SysDefine":"SysDefine"}],mobx:[function(t,e,n){(function(t){"use strict";cc._RF.push(e,"de3aaq1fItEy5tKcvHOTs15","mobx"),n.__esModule=!0,n.$mobx=void 0,n.FlowCancellationError=Dn,n.Reaction=n.ObservableSet=n.ObservableMap=void 0,n._allowStateChanges=ee,n.runInAction=n._allowStateChangesInsideComputed=function(t){return Qt(t.name||an,!1,t,this,void 0)},n._allowStateReadsEnd=xe,n._allowStateReadsStart=Oe,n._autoAction=void 0,n._endAction=te,n._getAdministration=$o,n._getGlobalState=function(){return Re},n._interceptReads=function(t,e,n){var i;if(Mo(t)||Oo(t)||ae(t))i=$o(t);else if(Vo(t)){if("production"!==o&&!T(e))return r("InterceptReads can only be used with a specific property, not with an object in general");i=$o(t,e)}else if("production"!==o)return r("Expected observable map, object or array as first array");return"production"!==o&&void 0!==i.dehancer?r("An intercept reader was already established"):(i.dehancer="function"==typeof e?e:n,function(){i.dehancer=void 0})},n._isComputingDerivation=function(){return null!==Re.trackingDerivation},n._resetGlobalState=function(){var t=new Ee;for(var e in t)-1===Pe.indexOf(e)&&(Re[e]=t[e]);Re.allowStateChanges=!Re.enforceActions},n._startAction=$t,n.action=void 0,n.autorun=yn,n.computed=n.comparer=void 0,n.configure=function(t){!0===t.isolateGlobalState&&De();var e,n,i=t.useProxies,r=t.enforceActions;if(void 0!==i&&(Re.useProxies=i===xn||i!==On&&"undefined"!=typeof Proxy),"ifavailable"===i&&(Re.verifyProxies=!0),void 0!==r){var s=r===xn?xn:r===Cn;Re.enforceActions=s,Re.allowStateChanges=!0!==s&&s!==xn}["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(e){e in t&&(Re[e]=!!t[e])}),Re.allowStateReads=!Re.observableRequiresReaction,"production"!==o&&!0===Re.disableErrorBoundaries&&console.warn("WARNING: Debug feature only. MobX will NOT recover from errors when `disableErrorBoundaries` is enabled."),t.reactionScheduler&&(e=t.reactionScheduler,n=Xe,Xe=function(t){return e(function(){return n(t)})})},n.createAtom=tt,n.defineProperty=function(t,e,n){if(Vo(t))return t[Z].defineProperty_(e,n);r(39)},n.entries=function(t){return Vo(t)?Hn(t).map(function(e){return[e,t[e]]}):Mo(t)?Hn(t).map(function(e){return[e,t.get(e)]}):No(t)?Array.from(t.entries()):Oo(t)?t.map(function(t,e){return[e,t]}):void r(7)},n.extendObservable=Pn,n.flow=void 0,n.flowResult=function(t){return t},n.get=function(t,e){if(zn(t,e))return Vo(t)?t[Z].get_(e):Mo(t)?t.get(e):Oo(t)?t[e]:void r(11)},n.getAtom=Qo,n.getDebugName=ti,n.getDependencyTree=En,n.getObserverTree=function(t,e){return Mn(Qo(t,e))},n.has=zn,n.intercept=function(t,e,n){return w(n)?jn(t,e,n):Un(t,e)},n.isAction=_n,n.isBoxedObservable=void 0,n.isComputed=function(t){return"production"!==o&&arguments.length>1?r("isComputed expects only 1 argument. Use isComputedProp to inspect the observability of a property"):Vn(t)},n.isComputedProp=function(t,e){return"production"===o||T(e)?Vn(t,e):r("isComputed expected a property name as second argument")},n.isFlow=kn,n.isFlowCancellationError=function(t){return t instanceof Dn},n.isObservable=Gn,n.isObservableArray=Oo,n.isObservableMap=void 0,n.isObservableObject=Vo,n.isObservableProp=function(t,e){return"production"===o||T(e)?Bn(t,e):r("expected a property name as second argument")},n.isObservableSet=void 0,n.keys=Hn,n.makeAutoObservable=function(t,e,n){if("production"!==o&&(O(t)||O(Object.getPrototypeOf(t))||r("'makeAutoObservable' can only be used for classes that don't have a superclass"),Vo(t)&&r("makeAutoObservable can only be used on objects not already made observable")),O(t))return Pn(t,t,e,n);var i=ko(t,n)[Z];if(!t[lo]){var s=Object.getPrototypeOf(t),a=new Set([].concat(A(t),A(s)));a.delete("constructor"),a.delete(Z),C(s,lo,a)}Ue();try{t[lo].forEach(function(t){return i.make_(t,!e||!(t in e)||e[t])})}finally{je()}return t},n.makeObservable=function(t,e,n){var o=ko(t,n)[Z];Ue();try{null!=e||(e=J(t)),A(e).forEach(function(t){return o.make_(t,e[t])})}finally{je()}return t},n.observable=void 0,n.observe=function(t,e,n,o){return w(n)?Yn(t,e,n,o):qn(t,e,n)},n.onBecomeObserved=wn,n.onBecomeUnobserved=Tn,n.onReactionError=function(t){return Re.globalReactionErrorHandlers.push(t),function(){var e=Re.globalReactionErrorHandlers.indexOf(t);e>=0&&Re.globalReactionErrorHandlers.splice(e,1)}},n.override=void 0,n.ownKeys=Wn,n.reaction=function(t,e,n){var i;void 0===n&&(n=d),"production"!==o&&(w(t)&&w(e)||r("First and second argument to reaction should be functions"),O(n)||r("Third argument of reactions should be an object"));var s,a,c,u=null!=(i=n.name)?i:"production"!==o?"Reaction@"+m():"Reaction",l=dn(u,n.onError?(a=n.onError,c=e,function(){try{return c.apply(this,arguments)}catch(t){a.call(this,t)}}):e),h=!n.scheduler&&!n.delay,p=mn(n),f=!0,_=!1,y=void 0,v=n.compareStructural?et.structural:n.equals||et.default,g=new qe(u,function(){f||h?b():_||(_=!0,p(b))},n.onError,n.requiresObservable);function b(){if(_=!1,!g.isDisposed_){var e=!1;g.track(function(){var n=ee(!1,function(){return t(g)});e=f||!v(s,n),y=s,s=n}),f&&n.fireImmediately?l(s,y,g):!f&&e&&l(s,y,g),f=!1}}return g.schedule_(),g.getDisposer_()},n.remove=function(t,e){Vo(t)?t[Z].delete_(e):Mo(t)?t.delete(e):No(t)?t.delete(e):Oo(t)?("number"!=typeof e&&(e=parseInt(e,10)),t.splice(e,1)):r(9)},n.set=function t(e,n,o){if(2!==arguments.length||No(e))Vo(e)?e[Z].set_(n,o):Mo(e)?e.set(n,o):No(e)?e.add(n):Oo(e)?("number"!=typeof n&&(n=parseInt(n,10)),n<0&&r("Invalid index: '"+n+"'"),Ue(),n>=e.length&&(e.length=n+1),e[n]=o,je()):r(8);else{Ue();var i=n;try{for(var s in i)t(e,s,i[s])}finally{je()}}},n.spy=on,n.toJS=function(t,e){return"production"!==o&&e&&r("toJS no longer supports options"),Kn(t,new Map)},n.trace=Jn,n.transaction=Qn,n.untracked=we,n.values=function(t){return Vo(t)?Hn(t).map(function(e){return t[e]}):Mo(t)?Hn(t).map(function(e){return t.get(e)}):No(t)?Array.from(t.values()):Oo(t)?t.slice():void r(6)},n.when=function(t,e,n){return 1===arguments.length||e&&"object"==typeof e?to(t,e):$n(t,e,n||{})};var o="production",i="production"!==o?{0:"Invalid value for configuration 'enforceActions', expected 'never', 'always' or 'observed'",1:function(t,e){return"Cannot apply '"+t+"' to '"+e.toString()+"': Field not found."},5:"'keys()' can only be used on observable objects, arrays, sets and maps",6:"'values()' can only be used on observable objects, arrays, sets and maps",7:"'entries()' can only be used on observable objects, arrays and maps",8:"'set()' can only be used on observable objects, arrays and maps",9:"'remove()' can only be used on observable objects, arrays and maps",10:"'has()' can only be used on observable objects, arrays and maps",11:"'get()' can only be used on observable objects, arrays and maps",12:"Invalid annotation",13:"Dynamic observable objects cannot be frozen",14:"Intercept handlers should return nothing or a change object",15:"Observable arrays cannot be frozen",16:"Modification exception: the internal structure of an observable array was changed.",17:function(t,e){return"[mobx.array] Index out of bounds, "+t+" is larger than "+e},18:"mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js",19:function(t){return"Cannot initialize from classes that inherit from Map: "+t.constructor.name},20:function(t){return"Cannot initialize map from "+t},21:function(t){return"Cannot convert to map from '"+t+"'"},22:"mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js",23:"It is not possible to get index atoms from arrays",24:function(t){return"Cannot obtain administration from "+t},25:function(t,e){return"the entry '"+t+"' does not exist in the observable map '"+e+"'"},26:"please specify a property",27:function(t,e){return"no observable property '"+t.toString()+"' found on the observable object '"+e+"'"},28:function(t){return"Cannot obtain atom from "+t},29:"Expecting some object",30:"invalid action stack. did you forget to finish an action?",31:"missing option for computed: get",32:function(t,e){return"Cycle detected in computation "+t+": "+e},33:function(t){return"The setter of computed value '"+t+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"},34:function(t){return"[ComputedValue '"+t+"'] It is not possible to assign a new value to a computed value."},35:"There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`",36:"isolateGlobalState should be called before MobX is running any reactions",37:function(t){return"[mobx] `observableArray."+t+"()` mutates the array in-place, which is not allowed inside a derivation. Use `array.slice()."+t+"()` instead"},38:"'ownKeys()' can only be used on observable objects",39:"'defineProperty()' can only be used on observable objects"}:{};function r(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if("production"!==o){var s="string"==typeof t?t:i[t];throw"function"==typeof s&&(s=s.apply(null,n)),new Error("[MobX] "+s)}throw new Error("number"==typeof t?"[MobX] minified error nr: "+t+(n.length?" "+n.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+t)}var s={};function a(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:s}var c=Object.assign,u=Object.getOwnPropertyDescriptor,l=Object.defineProperty,h=Object.prototype,p=[];Object.freeze(p);var d={};Object.freeze(d);var f="undefined"!=typeof Proxy,_=Object.toString();function y(){f||r("production"!==o?"`Proxy` objects are not available in the current environment. Please configure MobX to enable a fallback implementation.`":"Proxy not available")}function v(t){"production"!==o&&Re.verifyProxies&&r("MobX is currently configured to be able to run in ES5 mode, but in ES5 MobX won't be able to "+t)}function m(){return++Re.mobxGuid}function g(t){var e=!1;return function(){if(!e)return e=!0,t.apply(this,arguments)}}var b=function(){};function w(t){return"function"==typeof t}function T(t){switch(typeof t){case"string":case"symbol":case"number":return!0}return!1}function S(t){return null!==t&&"object"==typeof t}function O(t){var e;if(!S(t))return!1;var n=Object.getPrototypeOf(t);return null==n||(null==(e=n.constructor)?void 0:e.toString())===_}function x(t){var e=null==t?void 0:t.constructor;return!!e&&("GeneratorFunction"===e.name||"GeneratorFunction"===e.displayName)}function C(t,e,n){l(t,e,{enumerable:!1,writable:!0,configurable:!0,value:n})}function P(t,e,n){l(t,e,{enumerable:!1,writable:!1,configurable:!0,value:n})}function E(t,e){var n="isMobX"+t;return e.prototype[n]=!0,function(t){return S(t)&&!0===t[n]}}function I(t){return t instanceof Map}function M(t){return t instanceof Set}var R=void 0!==Object.getOwnPropertySymbols;function D(t){var e=Object.keys(t);if(!R)return e;var n=Object.getOwnPropertySymbols(t);return n.length?[].concat(e,n.filter(function(e){return h.propertyIsEnumerable.call(t,e)})):e}var A="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:R?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames;function N(t){return"string"==typeof t?t:"symbol"==typeof t?t.toString():new String(t).toString()}function F(t){return null===t?null:"object"==typeof t?""+t:t}function L(t,e){return h.hasOwnProperty.call(t,e)}var k=Object.getOwnPropertyDescriptors||function(t){var e={};return A(t).forEach(function(n){e[n]=u(t,n)}),e};function U(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function j(t,e,n){return e&&U(t.prototype,e),n&&U(t,n),t}function V(){return(V=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t}).apply(this,arguments)}function B(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function G(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function H(t,e){if(t){if("string"==typeof t)return z(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?z(t,e):void 0}}function z(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function W(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=H(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0;return function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=t[Symbol.iterator]()).next.bind(n)}var q=Symbol("mobx-stored-annotations");function Y(t){return Object.assign(function(e,n){X(e,n,t)},t)}function X(t,e,n){L(t,q)||C(t,q,V({},t[q])),"production"!==o&&st(n)&&!L(t[q],e)&&r("'"+t.constructor.name+".prototype."+e.toString()+"' is decorated with 'override', but no such decorated member was found on prototype."),K(t,n,e),st(n)||(t[q][e]=n)}function K(t,e,n){if("production"!==o&&!st(e)&&L(t[q],n)){var i=t.constructor.name+".prototype."+n.toString(),s=t[q][n].annotationType_;r("Cannot apply '@"+e.annotationType_+"' to '"+i+"':\nThe field is already decorated with '@"+s+"'.\nRe-decorating fields is not allowed.\nUse '@override' decorator for methods overriden by subclass.")}}function J(t){return L(t,q)||("production"===o||t[q]||r("No annotations were passed to makeObservable, but no decorated members have been found either"),C(t,q,V({},t[q]))),t[q]}var Z=Symbol("mobx administration");n.$mobx=Z;var Q=function(){function t(t){void 0===t&&(t="production"!==o?"Atom@"+m():"Atom"),this.name_=void 0,this.isPendingUnobservation_=!1,this.isBeingObserved_=!1,this.observers_=new Set,this.diffValue_=0,this.lastAccessedBy_=0,this.lowestObserverState_=ce.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=t}var e=t.prototype;return e.onBO=function(){this.onBOL&&this.onBOL.forEach(function(t){return t()})},e.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(t){return t()})},e.reportObserved=function(){return Ve(this)},e.reportChanged=function(){Ue(),Be(this),je()},e.toString=function(){return this.name_},t}(),$=E("Atom",Q);function tt(t,e,n){void 0===e&&(e=b),void 0===n&&(n=b);var o=new Q(t);return e!==b&&wn(o,e),n!==b&&Tn(o,n),o}var et={identity:function(t,e){return t===e},structural:function(t,e){return ni(t,e)},default:function(t,e){return Object.is(t,e)},shallow:function(t,e){return ni(t,e,1)}};function nt(t,e,n){return Gn(t)?t:Array.isArray(t)?Vt.array(t,{name:n}):O(t)?Vt.object(t,void 0,{name:n}):I(t)?Vt.map(t,{name:n}):M(t)?Vt.set(t,{name:n}):"function"!=typeof t||_n(t)||kn(t)?t:x(t)?Fn(t):fn(n,t)}function ot(t){return t}n.comparer=et;var it="override",rt=Y({annotationType_:it,make_:function(t,e){return"production"!==o&&t.isPlainObject_&&r("Cannot apply '"+this.annotationType_+"' to '"+t.name_+"."+e.toString()+"':\n'"+this.annotationType_+"' cannot be used on plain objects."),"production"===o||L(t.appliedAnnotations_,e)||r("'"+t.name_+"."+e.toString()+"' is annotated with '"+this.annotationType_+"', but no such annotated member was found on prototype."),0},extend_:function(){r("'"+this.annotationType_+"' can only be used with 'makeObservable'")}});function st(t){return t.annotationType_===it}function at(t,e){return{annotationType_:t,options_:e,make_:ct,extend_:ut}}function ct(t,e,n,o){var i;if(null==(i=this.options_)?void 0:i.bound)return null===this.extend_(t,e,n,!1)?0:1;if(o===t.target_)return null===this.extend_(t,e,n,!1)?0:2;if(_n(n.value))return 1;var r=ht(t,this,e,n,!1);return l(o,e,r),2}function ut(t,e,n,o){var i=ht(t,this,e,n);return t.defineProperty_(e,i,o)}function lt(t,e,n,i){var s=e.annotationType_,a=i.value;"production"===o||w(a)||r("Cannot apply '"+s+"' to '"+t.name_+"."+n.toString()+"':\n'"+s+"' can only be used on properties with a function value.")}function ht(t,e,n,o,i){var r,s,a,c,u;void 0===i&&(i=Re.safeDescriptors),lt(t,e,n,o);var l,h=o.value;return(null==(r=e.options_)?void 0:r.bound)&&(h=h.bind(null!=(l=t.proxy_)?l:t.target_)),{value:Zt(null!=(s=null==(a=e.options_)?void 0:a.name)?s:n.toString(),h,null!=(c=null==(u=e.options_)?void 0:u.autoAction)&&c),configurable:!i||t.isPlainObject_,enumerable:!1,writable:!i}}function pt(t,e){return{annotationType_:t,options_:e,make_:dt,extend_:ft}}function dt(t,e,n,o){var i;if(o===t.target_)return null===this.extend_(t,e,n,!1)?0:2;if((null==(i=this.options_)?void 0:i.bound)&&!kn(t.target_[e])&&null===this.extend_(t,e,n,!1))return 0;if(kn(n.value))return 1;var r=yt(t,this,e,n,!1,!1);return l(o,e,r),2}function ft(t,e,n,o){var i,r=yt(t,this,e,n,null==(i=this.options_)?void 0:i.bound);return t.defineProperty_(e,r,o)}function _t(t,e,n,i){var s=e.annotationType_,a=i.value;"production"===o||w(a)||r("Cannot apply '"+s+"' to '"+t.name_+"."+n.toString()+"':\n'"+s+"' can only be used on properties with a generator function value.")}function yt(t,e,n,o,i,r){void 0===r&&(r=Re.safeDescriptors),_t(t,e,n,o);var s,a=o.value;return i&&(a=a.bind(null!=(s=t.proxy_)?s:t.target_)),{value:Fn(a),configurable:!r||t.isPlainObject_,enumerable:!1,writable:!r}}function vt(t,e){return{annotationType_:t,options_:e,make_:mt,extend_:gt}}function mt(t,e,n){return null===this.extend_(t,e,n,!1)?0:1}function gt(t,e,n,o){return bt(t,this,e,n),t.defineComputedProperty_(e,V({},this.options_,{get:n.get,set:n.set}),o)}function bt(t,e,n,i){var s=e.annotationType_,a=i.get;"production"===o||a||r("Cannot apply '"+s+"' to '"+t.name_+"."+n.toString()+"':\n'"+s+"' can only be used on getter(+setter) properties.")}function wt(t,e){return{annotationType_:t,options_:e,make_:Tt,extend_:St}}function Tt(t,e,n){return null===this.extend_(t,e,n,!1)?0:1}function St(t,e,n,o){var i,r;return Ot(t,this,e,n),t.defineObservableProperty_(e,n.value,null!=(i=null==(r=this.options_)?void 0:r.enhancer)?i:nt,o)}function Ot(t,e,n,i){var s=e.annotationType_;"production"===o||"value"in i||r("Cannot apply '"+s+"' to '"+t.name_+"."+n.toString()+"':\n'"+s+"' cannot be used on getter/setter properties")}n.override=rt;var xt="true",Ct=Pt();function Pt(t){return{annotationType_:xt,options_:t,make_:Et,extend_:It}}function Et(t,e,n,o){var i,r,s,a;if(n.get)return Wt.make_(t,e,n,o);if(n.set){var c=Zt(e.toString(),n.set);return o===t.target_?null===t.defineProperty_(e,{configurable:!Re.safeDescriptors||t.isPlainObject_,set:c})?0:2:(l(o,e,{configurable:!0,set:c}),2)}if(o!==t.target_&&"function"==typeof n.value)return x(n.value)?((null==(a=this.options_)?void 0:a.autoBind)?Fn.bound:Fn).make_(t,e,n,o):((null==(s=this.options_)?void 0:s.autoBind)?fn.bound:fn).make_(t,e,n,o);var u,h=!1===(null==(i=this.options_)?void 0:i.deep)?Vt.ref:Vt;return"function"==typeof n.value&&(null==(r=this.options_)?void 0:r.autoBind)&&(n.value=n.value.bind(null!=(u=t.proxy_)?u:t.target_)),h.make_(t,e,n,o)}function It(t,e,n,o){var i,r,s;return n.get?Wt.extend_(t,e,n,o):n.set?t.defineProperty_(e,{configurable:!Re.safeDescriptors||t.isPlainObject_,set:Zt(e.toString(),n.set)},o):("function"==typeof n.value&&(null==(i=this.options_)?void 0:i.autoBind)&&(n.value=n.value.bind(null!=(s=t.proxy_)?s:t.target_)),(!1===(null==(r=this.options_)?void 0:r.deep)?Vt.ref:Vt).extend_(t,e,n,o))}var Mt={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};function Rt(t){return t||Mt}Object.freeze(Mt);var Dt=wt("observable"),At=wt("observable.ref",{enhancer:ot}),Nt=wt("observable.shallow",{enhancer:function(t,e,n){return null==t?t:Vo(t)||Oo(t)||Mo(t)||No(t)?t:Array.isArray(t)?Vt.array(t,{name:n,deep:!1}):O(t)?Vt.object(t,void 0,{name:n,deep:!1}):I(t)?Vt.map(t,{name:n,deep:!1}):M(t)?Vt.set(t,{name:n,deep:!1}):void("production"!==o&&r("The shallow modifier / decorator can only used in combination with arrays, objects, maps and sets"))}}),Ft=wt("observable.struct",{enhancer:function(t,e){return"production"!==o&&Gn(t)&&r("observable.struct should not be used with observable values"),ni(t,e)?e:t}}),Lt=Y(Dt);function kt(t){return!0===t.deep?nt:!1===t.deep?ot:(e=t.defaultDecorator)&&null!=(n=null==(o=e.options_)?void 0:o.enhancer)?n:nt;var e,n,o}function Ut(t){var e;return t?null!=(e=t.defaultDecorator)?e:Pt(t):void 0}function jt(t,e,n){if(!T(e))return Gn(t)?t:O(t)?Vt.object(t,e,n):Array.isArray(t)?Vt.array(t,e):I(t)?Vt.map(t,e):M(t)?Vt.set(t,e):"object"==typeof t&&null!==t?t:Vt.box(t,e);X(t,e,Dt)}Object.assign(jt,Lt);var Vt=c(jt,{box:function(t,e){var n=Rt(e);return new se(t,kt(n),n.name,!0,n.equals)},array:function(t,e){var n=Rt(e);return(!1===Re.useProxies||!1===n.proxy?Zo:_o)(t,kt(n),n.name)},map:function(t,e){var n=Rt(e);return new Po(t,kt(n),n.name)},set:function(t,e){var n=Rt(e);return new Ao(t,kt(n),n.name)},object:function(t,e,n){return Pn(!1===Re.useProxies||!1===(null==n?void 0:n.proxy)?ko({},n):oo({},n),t,e)},ref:Y(At),shallow:Y(Nt),deep:Lt,struct:Y(Ft)});n.observable=Vt;var Bt,Gt,Ht=vt("computed"),zt=vt("computed.struct",{equals:et.structural}),Wt=function(t,e){if(T(e))return X(t,e,Ht);if(O(t))return Y(vt("computed",t));"production"!==o&&(w(t)||r("First argument to `computed` should be an expression."),w(e)&&r("A setter as second argument is no longer supported, use `{ set: fn }` option instead"));var n=O(e)?e:{};return n.get=t,n.name||(n.name=t.name||""),new le(n)};n.computed=Wt,Object.assign(Wt,Ht),Wt.struct=Y(zt);var qt,Yt=0,Xt=1,Kt=null!=(Bt=null==(Gt=u(function(){},"name"))?void 0:Gt.configurable)&&Bt,Jt={value:"action",configurable:!0,writable:!1,enumerable:!1};function Zt(t,e,n,i){function s(){return Qt(t,n,e,i||this,arguments)}return void 0===n&&(n=!1),"production"!==o&&(w(e)||r("`action` can only be invoked on functions"),"string"==typeof t&&t||r("actions should have valid names, got: '"+t+"'")),s.isMobxAction=!0,Kt&&(Jt.value=t,Object.defineProperty(s,"name",Jt)),s}function Qt(t,e,n,o,i){var r=$t(t,e,o,i);try{return n.apply(o,i)}catch(s){throw r.error_=s,s}finally{te(r)}}function $t(t,e,n,i){var r="production"!==o&&Qe()&&!!t,s=0;if("production"!==o&&r){s=Date.now();var a=i?Array.from(i):p;tn({type:rn,name:t,object:n,arguments:a})}var c=Re.trackingDerivation,u=!e||!c;Ue();var l=Re.allowStateChanges;u&&(Te(),l=ne(!0));var h={runAsAction_:u,prevDerivation_:c,prevAllowStateChanges_:l,prevAllowStateReads_:Oe(!0),notifySpy_:r,startTime_:s,actionId_:Xt++,parentActionId_:Yt};return Yt=h.actionId_,h}function te(t){Yt!==t.actionId_&&r(30),Yt=t.parentActionId_,void 0!==t.error_&&(Re.suppressReactionErrors=!0),oe(t.prevAllowStateChanges_),xe(t.prevAllowStateReads_),je(),t.runAsAction_&&Se(t.prevDerivation_),"production"!==o&&t.notifySpy_&&nn({time:Date.now()-t.startTime_}),Re.suppressReactionErrors=!1}function ee(t,e){var n=ne(t);try{return e()}finally{oe(n)}}function ne(t){var e=Re.allowStateChanges;return Re.allowStateChanges=t,e}function oe(t){Re.allowStateChanges=t}var ie="create";qt=Symbol.toPrimitive;var re,se=function(t){function e(e,n,i,r,s){var a;return void 0===i&&(i="production"!==o?"ObservableValue@"+m():"ObservableValue"),void 0===r&&(r=!0),void 0===s&&(s=et.default),(a=t.call(this,i)||this).enhancer=void 0,a.name_=void 0,a.equals=void 0,a.hasUnreportedChange_=!1,a.interceptors_=void 0,a.changeListeners_=void 0,a.value_=void 0,a.dehancer=void 0,a.enhancer=n,a.name_=i,a.equals=s,a.value_=n(e,void 0,i),"production"!==o&&r&&Qe()&&$e({type:ie,object:G(a),observableKind:"value",debugObjectName:a.name_,newValue:""+a.value_}),a}B(e,t);var n=e.prototype;return n.dehanceValue=function(t){return void 0!==this.dehancer?this.dehancer(t):t},n.set=function(t){var e=this.value_;if((t=this.prepareNewValue_(t))!==Re.UNCHANGED){var n=Qe();"production"!==o&&n&&tn({type:ho,object:this,observableKind:"value",debugObjectName:this.name_,newValue:t,oldValue:e}),this.setNewValue_(t),"production"!==o&&n&&nn()}},n.prepareNewValue_=function(t){if(_e(this),io(this)){var e=so(this,{object:this,type:ho,newValue:t});if(!e)return Re.UNCHANGED;t=e.newValue}return t=this.enhancer(t,this.value_,this.name_),this.equals(this.value_,t)?Re.UNCHANGED:t},n.setNewValue_=function(t){var e=this.value_;this.value_=t,this.reportChanged(),ao(this)&&uo(this,{type:ho,object:this,newValue:t,oldValue:e})},n.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},n.intercept_=function(t){return ro(this,t)},n.observe_=function(t,e){return e&&t({observableKind:"value",debugObjectName:this.name_,object:this,type:ho,newValue:this.value_,oldValue:void 0}),co(this,t)},n.raw=function(){return this.value_},n.toJSON=function(){return this.get()},n.toString=function(){return this.name_+"["+this.value_+"]"},n.valueOf=function(){return F(this.get())},n[qt]=function(){return this.valueOf()},e}(Q),ae=E("ObservableValue",se);n.isBoxedObservable=ae,re=Symbol.toPrimitive;var ce,ue,le=function(){function t(t){this.dependenciesState_=ce.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.isBeingObserved_=!1,this.isPendingUnobservation_=!1,this.observers_=new Set,this.diffValue_=0,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=ce.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new pe(null),this.name_=void 0,this.triggeredBy_=void 0,this.isComputing_=!1,this.isRunningSetter_=!1,this.derivation=void 0,this.setter_=void 0,this.isTracing_=ue.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,t.get||r(31),this.derivation=t.get,this.name_=t.name||("production"!==o?"ComputedValue@"+m():"ComputedValue"),t.set&&(this.setter_=Zt("production"!==o?this.name_+"-setter":"ComputedValue-setter",t.set)),this.equals_=t.equals||(t.compareStructural||t.struct?et.structural:et.default),this.scope_=t.context,this.requiresReaction_=!!t.requiresReaction,this.keepAlive_=!!t.keepAlive}var e=t.prototype;return e.onBecomeStale_=function(){He(this)},e.onBO=function(){this.onBOL&&this.onBOL.forEach(function(t){return t()})},e.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(t){return t()})},e.get=function(){if(this.isComputing_&&r(32,this.name_,this.derivation),0!==Re.inBatch||0!==this.observers_.size||this.keepAlive_){if(Ve(this),fe(this)){var t=Re.trackingContext;this.keepAlive_&&!t&&(Re.trackingContext=this),this.trackAndCompute()&&Ge(this),Re.trackingContext=t}}else fe(this)&&(this.warnAboutUntrackedRead_(),Ue(),this.value_=this.computeValue_(!1),je());var e=this.value_;if(de(e))throw e.cause;return e},e.set=function(t){if(this.setter_){this.isRunningSetter_&&r(33,this.name_),this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,t)}finally{this.isRunningSetter_=!1}}else r(34,this.name_)},e.trackAndCompute=function(){var t=this.value_,e=this.dependenciesState_===ce.NOT_TRACKING_,n=this.computeValue_(!0);"production"!==o&&Qe()&&$e({observableKind:"computed",debugObjectName:this.name_,object:this.scope_,type:"update",oldValue:this.value_,newValue:n});var i=e||de(t)||de(n)||!this.equals_(t,n);return i&&(this.value_=n),i},e.computeValue_=function(t){this.isComputing_=!0;var e,n=ne(!1);if(t)e=ve(this,this.derivation,this.scope_);else if(!0===Re.disableErrorBoundaries)e=this.derivation.call(this.scope_);else try{e=this.derivation.call(this.scope_)}catch(o){e=new pe(o)}return oe(n),this.isComputing_=!1,e},e.suspend_=function(){this.keepAlive_||(be(this),this.value_=void 0)},e.observe_=function(t,e){var n=this,o=!0,i=void 0;return yn(function(){var r=n.get();if(!o||e){var s=Te();t({observableKind:"computed",debugObjectName:n.name_,type:ho,object:n,newValue:r,oldValue:i}),Se(s)}o=!1,i=r})},e.warnAboutUntrackedRead_=function(){"production"!==o&&(!0===this.requiresReaction_&&r("[mobx] Computed value "+this.name_+" is read outside a reactive context"),this.isTracing_!==ue.NONE&&console.log("[mobx.trace] '"+this.name_+"' is being read outside a reactive context. Doing a full recompute"),Re.computedRequiresReaction&&console.warn("[mobx] Computed value "+this.name_+" is being read outside a reactive context. Doing a full recompute"))},e.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},e.valueOf=function(){return F(this.get())},e[re]=function(){return this.valueOf()},t}(),he=E("ComputedValue",le);(function(t){t[t.NOT_TRACKING_=-1]="NOT_TRACKING_",t[t.UP_TO_DATE_=0]="UP_TO_DATE_",t[t.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",t[t.STALE_=2]="STALE_"})(ce||(ce={})),function(t){t[t.NONE=0]="NONE",t[t.LOG=1]="LOG",t[t.BREAK=2]="BREAK"}(ue||(ue={}));var pe=function(t){this.cause=void 0,this.cause=t};function de(t){return t instanceof pe}function fe(t){switch(t.dependenciesState_){case ce.UP_TO_DATE_:return!1;case ce.NOT_TRACKING_:case ce.STALE_:return!0;case ce.POSSIBLY_STALE_:for(var e=Oe(!0),n=Te(),o=t.observing_,i=o.length,r=0;r<i;r++){var s=o[r];if(he(s)){if(Re.disableErrorBoundaries)s.get();else try{s.get()}catch(a){return Se(n),xe(e),!0}if(t.dependenciesState_===ce.STALE_)return Se(n),xe(e),!0}}return Ce(t),Se(n),xe(e),!1}}function _e(t){if("production"!==o){var e=t.observers_.size>0;Re.allowStateChanges||!e&&"always"!==Re.enforceActions||console.warn("[MobX] "+(Re.enforceActions?"Since strict-mode is enabled, changing (observed) observable values without using an action is not allowed. Tried to modify: ":"Side effects like changing state are not allowed at this point. Are you trying to modify state from, for example, a computed value or the render function of a React component? You can wrap side effects in 'runInAction' (or decorate functions with 'action') if needed. Tried to modify: ")+t.name_)}}function ye(t){"production"!==o&&!Re.allowStateReads&&Re.observableRequiresReaction&&console.warn("[mobx] Observable "+t.name_+" being read outside a reactive context")}function ve(t,e,n){var o=Oe(!0);Ce(t),t.newObserving_=new Array(t.observing_.length+100),t.unboundDepsCount_=0,t.runId_=++Re.runId;var i,r=Re.trackingDerivation;if(Re.trackingDerivation=t,Re.inBatch++,!0===Re.disableErrorBoundaries)i=e.call(n);else try{i=e.call(n)}catch(s){i=new pe(s)}return Re.inBatch--,Re.trackingDerivation=r,ge(t),me(t),xe(o),i}function me(t){"production"!==o&&0===t.observing_.length&&(Re.reactionRequiresObservable||t.requiresObservable_)&&console.warn("[mobx] Derivation "+t.name_+" is created/updated without reading any observable value")}function ge(t){for(var e=t.observing_,n=t.observing_=t.newObserving_,o=ce.UP_TO_DATE_,i=0,r=t.unboundDepsCount_,s=0;s<r;s++){var a=n[s];0===a.diffValue_&&(a.diffValue_=1,i!==s&&(n[i]=a),i++),a.dependenciesState_>o&&(o=a.dependenciesState_)}for(n.length=i,t.newObserving_=null,r=e.length;r--;){var c=e[r];0===c.diffValue_&&Le(c,t),c.diffValue_=0}for(;i--;){var u=n[i];1===u.diffValue_&&(u.diffValue_=0,Fe(u,t))}o!==ce.UP_TO_DATE_&&(t.dependenciesState_=o,t.onBecomeStale_())}function be(t){var e=t.observing_;t.observing_=[];for(var n=e.length;n--;)Le(e[n],t);t.dependenciesState_=ce.NOT_TRACKING_}function we(t){var e=Te();try{return t()}finally{Se(e)}}function Te(){var t=Re.trackingDerivation;return Re.trackingDerivation=null,t}function Se(t){Re.trackingDerivation=t}function Oe(t){var e=Re.allowStateReads;return Re.allowStateReads=t,e}function xe(t){Re.allowStateReads=t}function Ce(t){if(t.dependenciesState_!==ce.UP_TO_DATE_){t.dependenciesState_=ce.UP_TO_DATE_;for(var e=t.observing_,n=e.length;n--;)e[n].lowestObserverState_=ce.UP_TO_DATE_}}var Pe=["mobxGuid","spyListeners","enforceActions","computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","allowStateReads","disableErrorBoundaries","runId","UNCHANGED","useProxies"],Ee=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},Ie=!0,Me=!1,Re=function(){var t=a();return t.__mobxInstanceCount>0&&!t.__mobxGlobals&&(Ie=!1),t.__mobxGlobals&&t.__mobxGlobals.version!==(new Ee).version&&(Ie=!1),Ie?t.__mobxGlobals?(t.__mobxInstanceCount+=1,t.__mobxGlobals.UNCHANGED||(t.__mobxGlobals.UNCHANGED={}),t.__mobxGlobals):(t.__mobxInstanceCount=1,t.__mobxGlobals=new Ee):(setTimeout(function(){Me||r(35)},1),new Ee)}();function De(){if((Re.pendingReactions.length||Re.inBatch||Re.isRunningReactions)&&r(36),Me=!0,Ie){var t=a();0==--t.__mobxInstanceCount&&(t.__mobxGlobals=void 0),Re=new Ee}}function Ae(t){return t.observers_&&t.observers_.size>0}function Ne(t){return t.observers_}function Fe(t,e){t.observers_.add(e),t.lowestObserverState_>e.dependenciesState_&&(t.lowestObserverState_=e.dependenciesState_)}function Le(t,e){t.observers_.delete(e),0===t.observers_.size&&ke(t)}function ke(t){!1===t.isPendingUnobservation_&&(t.isPendingUnobservation_=!0,Re.pendingUnobservations.push(t))}function Ue(){Re.inBatch++}function je(){if(0==--Re.inBatch){Ke();for(var t=Re.pendingUnobservations,e=0;e<t.length;e++){var n=t[e];n.isPendingUnobservation_=!1,0===n.observers_.size&&(n.isBeingObserved_&&(n.isBeingObserved_=!1,n.onBUO()),n instanceof le&&n.suspend_())}Re.pendingUnobservations=[]}}function Ve(t){ye(t);var e=Re.trackingDerivation;return null!==e?(e.runId_!==t.lastAccessedBy_&&(t.lastAccessedBy_=e.runId_,e.newObserving_[e.unboundDepsCount_++]=t,!t.isBeingObserved_&&Re.trackingContext&&(t.isBeingObserved_=!0,t.onBO())),!0):(0===t.observers_.size&&Re.inBatch>0&&ke(t),!1)}function Be(t){t.lowestObserverState_!==ce.STALE_&&(t.lowestObserverState_=ce.STALE_,t.observers_.forEach(function(e){e.dependenciesState_===ce.UP_TO_DATE_&&("production"!==o&&e.isTracing_!==ue.NONE&&ze(e,t),e.onBecomeStale_()),e.dependenciesState_=ce.STALE_}))}function Ge(t){t.lowestObserverState_!==ce.STALE_&&(t.lowestObserverState_=ce.STALE_,t.observers_.forEach(function(e){e.dependenciesState_===ce.POSSIBLY_STALE_?(e.dependenciesState_=ce.STALE_,"production"!==o&&e.isTracing_!==ue.NONE&&ze(e,t)):e.dependenciesState_===ce.UP_TO_DATE_&&(t.lowestObserverState_=ce.UP_TO_DATE_)}))}function He(t){t.lowestObserverState_===ce.UP_TO_DATE_&&(t.lowestObserverState_=ce.POSSIBLY_STALE_,t.observers_.forEach(function(t){t.dependenciesState_===ce.UP_TO_DATE_&&(t.dependenciesState_=ce.POSSIBLY_STALE_,t.onBecomeStale_())}))}function ze(t,e){if(console.log("[mobx.trace] '"+t.name_+"' is invalidated due to a change in: '"+e.name_+"'"),t.isTracing_===ue.BREAK){var n=[];We(En(t),n,1),new Function("debugger;\n/*\nTracing '"+t.name_+"'\n\nYou are entering this break point because derivation '"+t.name_+"' is being traced and '"+e.name_+"' is now forcing it to update.\nJust follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update\nThe stackframe you are looking for is at least ~6-8 stack-frames up.\n\n"+(t instanceof le?t.derivation.toString().replace(/[*]\//g,"/"):"")+"\n\nThe dependencies for this derivation are:\n\n"+n.join("\n")+"\n*/\n    ")()}}function We(t,e,n){e.length>=1e3?e.push("(and many more)"):(e.push(""+new Array(n).join("\t")+t.name),t.dependencies&&t.dependencies.forEach(function(t){return We(t,e,n+1)}))}var qe=function(){function t(t,e,n,i){void 0===t&&(t="production"!==o?"Reaction@"+m():"Reaction"),void 0===i&&(i=!1),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=ce.NOT_TRACKING_,this.diffValue_=0,this.runId_=0,this.unboundDepsCount_=0,this.isDisposed_=!1,this.isScheduled_=!1,this.isTrackPending_=!1,this.isRunning_=!1,this.isTracing_=ue.NONE,this.name_=t,this.onInvalidate_=e,this.errorHandler_=n,this.requiresObservable_=i}var e=t.prototype;return e.onBecomeStale_=function(){this.schedule_()},e.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,Re.pendingReactions.push(this),Ke())},e.isScheduled=function(){return this.isScheduled_},e.runReaction_=function(){if(!this.isDisposed_){Ue(),this.isScheduled_=!1;var t=Re.trackingContext;if(Re.trackingContext=this,fe(this)){this.isTrackPending_=!0;try{this.onInvalidate_(),"production"!==o&&this.isTrackPending_&&Qe()&&$e({name:this.name_,type:"scheduled-reaction"})}catch(e){this.reportExceptionInDerivation_(e)}}Re.trackingContext=t,je()}},e.track=function(t){if(!this.isDisposed_){Ue();var e,n=Qe();"production"!==o&&n&&(e=Date.now(),tn({name:this.name_,type:"reaction"})),this.isRunning_=!0;var i=Re.trackingContext;Re.trackingContext=this;var r=ve(this,t,void 0);Re.trackingContext=i,this.isRunning_=!1,this.isTrackPending_=!1,this.isDisposed_&&be(this),de(r)&&this.reportExceptionInDerivation_(r.cause),"production"!==o&&n&&nn({time:Date.now()-e}),je()}},e.reportExceptionInDerivation_=function(t){var e=this;if(this.errorHandler_)this.errorHandler_(t,this);else{if(Re.disableErrorBoundaries)throw t;var n="production"!==o?"[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '"+this+"'":"[mobx] uncaught error in '"+this+"'";Re.suppressReactionErrors?"production"!==o&&console.warn("[mobx] (error in reaction '"+this.name_+"' suppressed, fix error of causing action below)"):console.error(n,t),"production"!==o&&Qe()&&$e({type:"error",name:this.name_,message:n,error:""+t}),Re.globalReactionErrorHandlers.forEach(function(n){return n(t,e)})}},e.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(Ue(),be(this),je()))},e.getDisposer_=function(){var t=this.dispose.bind(this);return t[Z]=this,t},e.toString=function(){return"Reaction["+this.name_+"]"},e.trace=function(t){void 0===t&&(t=!1),Jn(this,t)},t}();n.Reaction=qe;var Ye=100,Xe=function(t){return t()};function Ke(){Re.inBatch>0||Re.isRunningReactions||Xe(Je)}function Je(){Re.isRunningReactions=!0;for(var t=Re.pendingReactions,e=0;t.length>0;){++e===Ye&&(console.error("production"!==o?"Reaction doesn't converge to a stable state after "+Ye+" iterations. Probably there is a cycle in the reactive function: "+t[0]:"[mobx] cycle in reaction: "+t[0]),t.splice(0));for(var n=t.splice(0),i=0,r=n.length;i<r;i++)n[i].runReaction_()}Re.isRunningReactions=!1}var Ze=E("Reaction",qe);function Qe(){return"production"!==o&&!!Re.spyListeners.length}function $e(t){if("production"!==o&&Re.spyListeners.length)for(var e=Re.spyListeners,n=0,i=e.length;n<i;n++)e[n](t)}function tn(t){"production"!==o&&$e(V({},t,{spyReportStart:!0}))}var en={type:"report-end",spyReportEnd:!0};function nn(t){"production"!==o&&$e(t?V({},t,{type:"report-end",spyReportEnd:!0}):en)}function on(t){return"production"===o?(console.warn("[mobx.spy] Is a no-op in production builds"),function(){}):(Re.spyListeners.push(t),g(function(){Re.spyListeners=Re.spyListeners.filter(function(e){return e!==t})}))}var rn="action",sn="autoAction",an="<unnamed action>",cn=at(rn),un=at("action.bound",{bound:!0}),ln=at(sn,{autoAction:!0}),hn=at("autoAction.bound",{autoAction:!0,bound:!0});function pn(t){return function(e,n){return w(e)?Zt(e.name||an,e,t):w(n)?Zt(e,n,t):T(n)?X(e,n,t?ln:cn):T(e)?Y(at(t?sn:rn,{name:e,autoAction:t})):void("production"!==o&&r("Invalid arguments for `action`"))}}var dn=pn(!1);n.action=dn,Object.assign(dn,cn);var fn=pn(!0);function _n(t){return w(t)&&!0===t.isMobxAction}function yn(t,e){var n,i;void 0===e&&(e=d),"production"!==o&&(w(t)||r("Autorun expects a function as first argument"),_n(t)&&r("Autorun does not accept actions since actions are untrackable"));var s,a=null!=(n=null==(i=e)?void 0:i.name)?n:"production"!==o?t.name||"Autorun@"+m():"Autorun";if(e.scheduler||e.delay){var c=mn(e),u=!1;s=new qe(a,function(){u||(u=!0,c(function(){u=!1,s.isDisposed_||s.track(l)}))},e.onError,e.requiresObservable)}else s=new qe(a,function(){this.track(l)},e.onError,e.requiresObservable);function l(){t(s)}return s.schedule_(),s.getDisposer_()}n._autoAction=fn,Object.assign(fn,ln),dn.bound=Y(un),fn.bound=Y(hn);var vn=function(t){return t()};function mn(t){return t.scheduler?t.scheduler:t.delay?function(e){return setTimeout(e,t.delay)}:vn}var gn="onBO",bn="onBUO";function wn(t,e,n){return Sn(gn,t,e,n)}function Tn(t,e,n){return Sn(bn,t,e,n)}function Sn(t,e,n,o){var i="function"==typeof o?Qo(e,n):Qo(e),r=w(o)?o:n,s=t+"L";return i[s]?i[s].add(r):i[s]=new Set([r]),function(){var t=i[s];t&&(t.delete(r),0===t.size&&delete i[s])}}var On="never",xn="always",Cn="observed";function Pn(t,e,n,i){"production"!==o&&(arguments.length>4&&r("'extendObservable' expected 2-4 arguments"),"object"!=typeof t&&r("'extendObservable' expects an object as first argument"),Mo(t)&&r("'extendObservable' should not be used on maps, use map.merge instead"),O(e)||r("'extendObservabe' only accepts plain objects as second argument"),(Gn(e)||Gn(n))&&r("Extending an object with another observable (object) is not supported"));var s=k(e),a=ko(t,i)[Z];Ue();try{A(s).forEach(function(t){a.extend_(t,s[t],!n||!(t in n)||n[t])})}finally{je()}return t}function En(t,e){return In(Qo(t,e))}function In(t){var e,n={name:t.name_};return t.observing_&&t.observing_.length>0&&(n.dependencies=(e=t.observing_,Array.from(new Set(e))).map(In)),n}function Mn(t){var e={name:t.name_};return Ae(t)&&(e.observers=Array.from(Ne(t)).map(Mn)),e}var Rn=0;function Dn(){this.message="FLOW_CANCELLED"}Dn.prototype=Object.create(Error.prototype);var An=pt("flow"),Nn=pt("flow.bound",{bound:!0}),Fn=Object.assign(function(t,e){if(T(e))return X(t,e,An);"production"!==o&&1!==arguments.length&&r("Flow expects single argument with generator function");var n=t,i=n.name||"<unnamed flow>",s=function(){var t,e=this,o=arguments,r=++Rn,s=dn(i+" - runid: "+r+" - init",n).apply(e,o),a=void 0,c=new Promise(function(e,n){var o=0;function c(t){var e;a=void 0;try{e=dn(i+" - runid: "+r+" - yield "+o++,s.next).call(s,t)}catch(c){return n(c)}l(e)}function u(t){var e;a=void 0;try{e=dn(i+" - runid: "+r+" - yield "+o++,s.throw).call(s,t)}catch(c){return n(c)}l(e)}function l(t){if(!w(null==t?void 0:t.then))return t.done?e(t.value):(a=Promise.resolve(t.value)).then(c,u);t.then(l,n)}t=n,c(void 0)});return c.cancel=dn(i+" - runid: "+r+" - cancel",function(){try{a&&Ln(a);var e=s.return(void 0),n=Promise.resolve(e.value);n.then(b,b),Ln(n),t(new Dn)}catch(o){t(o)}}),c};return s.isMobXFlow=!0,s},An);function Ln(t){w(t.cancel)&&t.cancel()}function kn(t){return!0===(null==t?void 0:t.isMobXFlow)}function Un(t,e){return $o(t).intercept_(e)}function jn(t,e,n){return $o(t,e).intercept_(n)}function Vn(t,e){if(void 0!==e){if(!1===Vo(t))return!1;if(!t[Z].values_.has(e))return!1;var n=Qo(t,e);return he(n)}return he(t)}function Bn(t,e){return!!t&&(void 0!==e?"production"!==o&&(Mo(t)||Oo(t))?r("isObservable(object, propertyName) is not supported for arrays and maps. Use map.has or array.length instead."):!!Vo(t)&&t[Z].values_.has(e):Vo(t)||!!t[Z]||$(t)||Ze(t)||he(t))}function Gn(t){return"production"!==o&&1!==arguments.length&&r("isObservable expects only 1 argument. Use isObservableProp to inspect the observability of a property"),Bn(t)}function Hn(t){return Vo(t)?t[Z].keys_():Mo(t)||No(t)?Array.from(t.keys()):Oo(t)?t.map(function(t,e){return e}):void r(5)}function zn(t,e){return Vo(t)?t[Z].has_(e):Mo(t)?t.has(e):No(t)?t.has(e):Oo(t)?e>=0&&e<t.length:void r(10)}function Wn(t){if(Vo(t))return t[Z].ownKeys_();r(38)}function qn(t,e,n){return $o(t).observe_(e,n)}function Yn(t,e,n,o){return $o(t,e).observe_(n,o)}function Xn(t,e,n){return t.set(e,n),n}function Kn(t,e){if(null==t||"object"!=typeof t||t instanceof Date||!Gn(t))return t;if(ae(t)||he(t))return Kn(t.get(),e);if(e.has(t))return e.get(t);if(Oo(t)){var n=Xn(e,t,new Array(t.length));return t.forEach(function(t,o){n[o]=Kn(t,e)}),n}if(No(t)){var o=Xn(e,t,new Set);return t.forEach(function(t){o.add(Kn(t,e))}),o}if(Mo(t)){var i=Xn(e,t,new Map);return t.forEach(function(t,n){i.set(n,Kn(t,e))}),i}var r=Xn(e,t,{});return Wn(t).forEach(function(n){h.propertyIsEnumerable.call(t,n)&&(r[n]=Kn(t[n],e))}),r}function Jn(){"production"===o&&r("trace() is not available in production builds");for(var t=!1,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];"boolean"==typeof n[n.length-1]&&(t=n.pop());var s=Zn(n);if(!s)return r("'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly");s.isTracing_===ue.NONE&&console.log("[mobx.trace] '"+s.name_+"' tracing enabled"),s.isTracing_=t?ue.BREAK:ue.LOG}function Zn(t){switch(t.length){case 0:return Re.trackingDerivation;case 1:return Qo(t[0]);case 2:return Qo(t[0],t[1])}}function Qn(t,e){void 0===e&&(e=void 0),Ue();try{return t.apply(e)}finally{je()}}function $n(t,e,n){var i;"number"==typeof n.timeout&&(i=setTimeout(function(){if(!s[Z].isDisposed_){s();var t=new Error("WHEN_TIMEOUT");if(!n.onError)throw t;n.onError(t)}},n.timeout)),n.name="production"!==o?n.name||"When@"+m():"When";var r=Zt("production"!==o?n.name+"-effect":"When-effect",e),s=yn(function(e){ee(!1,t)&&(e.dispose(),i&&clearTimeout(i),r())},n);return s}function to(t,e){if("production"!==o&&e&&e.onError)return r("the options 'onError' and 'promise' cannot be combined");var n,i=new Promise(function(o,i){var r=$n(t,o,V({},e,{onError:i}));n=function(){r(),i("WHEN_CANCELLED")}});return i.cancel=n,i}function eo(t){return t[Z]}n.flow=Fn,Fn.bound=Y(Nn);var no={has:function(t,e){return"production"!==o&&Re.trackingDerivation&&v("detect new properties using the 'in' operator. Use 'has' from 'mobx' instead."),eo(t).has_(e)},get:function(t,e){return eo(t).get_(e)},set:function(t,e,n){var i;return!!T(e)&&("production"===o||eo(t).values_.has(e)||v("add a new observable property through direct assignment. Use 'set' from 'mobx' instead."),null==(i=eo(t).set_(e,n,!0))||i)},deleteProperty:function(t,e){var n;return"production"!==o&&v("delete properties from an observable object. Use 'remove' from 'mobx' instead."),!!T(e)&&(null==(n=eo(t).delete_(e,!0))||n)},defineProperty:function(t,e,n){var i;return"production"!==o&&v("define property on an observable object. Use 'defineProperty' from 'mobx' instead."),null==(i=eo(t).defineProperty_(e,n))||i},ownKeys:function(t){return"production"!==o&&Re.trackingDerivation&&v("iterate keys to detect added / removed properties. Use 'keys' from 'mobx' instead."),eo(t).ownKeys_()},preventExtensions:function(){r(13)}};function oo(t,e){var n,o;return y(),null!=(o=(n=(t=ko(t,e))[Z]).proxy_)?o:n.proxy_=new Proxy(t,no)}function io(t){return void 0!==t.interceptors_&&t.interceptors_.length>0}function ro(t,e){var n=t.interceptors_||(t.interceptors_=[]);return n.push(e),g(function(){var t=n.indexOf(e);-1!==t&&n.splice(t,1)})}function so(t,e){var n=Te();try{for(var o=[].concat(t.interceptors_||[]),i=0,s=o.length;i<s&&((e=o[i](e))&&!e.type&&r(14),e);i++);return e}finally{Se(n)}}function ao(t){return void 0!==t.changeListeners_&&t.changeListeners_.length>0}function co(t,e){var n=t.changeListeners_||(t.changeListeners_=[]);return n.push(e),g(function(){var t=n.indexOf(e);-1!==t&&n.splice(t,1)})}function uo(t,e){var n=Te(),o=t.changeListeners_;if(o){for(var i=0,r=(o=o.slice()).length;i<r;i++)o[i](e);Se(n)}}var lo=Symbol("mobx-keys"),ho="update",po={get:function(t,e){var n=t[Z];return e===Z?n:"length"===e?n.getArrayLength_():"string"!=typeof e||isNaN(e)?L(yo,e)?yo[e]:t[e]:n.get_(parseInt(e))},set:function(t,e,n){var o=t[Z];return"length"===e&&o.setArrayLength_(n),"symbol"==typeof e||isNaN(e)?t[e]=n:o.set_(parseInt(e),n),!0},preventExtensions:function(){r(15)}},fo=function(){function t(t,e,n,i){void 0===t&&(t="production"!==o?"ObservableArray@"+m():"ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=n,this.legacyMode_=i,this.atom_=new Q(t),this.enhancer_=function(n,i){return e(n,i,"production"!==o?t+"[..]":"ObservableArray[..]")}}var e=t.prototype;return e.dehanceValue_=function(t){return void 0!==this.dehancer?this.dehancer(t):t},e.dehanceValues_=function(t){return void 0!==this.dehancer&&t.length>0?t.map(this.dehancer):t},e.intercept_=function(t){return ro(this,t)},e.observe_=function(t,e){return void 0===e&&(e=!1),e&&t({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),co(this,t)},e.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},e.setArrayLength_=function(t){("number"!=typeof t||t<0)&&r("Out of range: "+t);var e=this.values_.length;if(t!==e)if(t>e){for(var n=new Array(t-e),o=0;o<t-e;o++)n[o]=void 0;this.spliceWithArray_(e,0,n)}else this.spliceWithArray_(t,e-t)},e.updateArrayLength_=function(t,e){t!==this.lastKnownLength_&&r(16),this.lastKnownLength_+=e,this.legacyMode_&&e>0&&Jo(t+e+1)},e.spliceWithArray_=function(t,e,n){var i=this;_e(this.atom_);var r=this.values_.length;if(void 0===t?t=0:t>r?t=r:t<0&&(t=Math.max(0,r+t)),e=1===arguments.length?r-t:null==e?0:Math.max(0,Math.min(e,r-t)),void 0===n&&(n=p),io(this)){var s=so(this,{object:this.proxy_,type:"splice",index:t,removedCount:e,added:n});if(!s)return p;e=s.removedCount,n=s.added}if(n=0===n.length?n:n.map(function(t){return i.enhancer_(t,void 0)}),this.legacyMode_||"production"!==o){var a=n.length-e;this.updateArrayLength_(r,a)}var c=this.spliceItemsIntoValues_(t,e,n);return 0===e&&0===n.length||this.notifyArraySplice_(t,n,c),this.dehanceValues_(c)},e.spliceItemsIntoValues_=function(t,e,n){var o;if(n.length<1e4)return(o=this.values_).splice.apply(o,[t,e].concat(n));var i=this.values_.slice(t,t+e),r=this.values_.slice(t+e);this.values_.length=t+n.length-e;for(var s=0;s<n.length;s++)this.values_[t+s]=n[s];for(var a=0;a<r.length;a++)this.values_[t+n.length+a]=r[a];return i},e.notifyArrayChildUpdate_=function(t,e,n){var i=!this.owned_&&Qe(),r=ao(this),s=r||i?{observableKind:"array",object:this.proxy_,type:ho,debugObjectName:this.atom_.name_,index:t,newValue:e,oldValue:n}:null;"production"!==o&&i&&tn(s),this.atom_.reportChanged(),r&&uo(this,s),"production"!==o&&i&&nn()},e.notifyArraySplice_=function(t,e,n){var i=!this.owned_&&Qe(),r=ao(this),s=r||i?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:t,removed:n,added:e,removedCount:n.length,addedCount:e.length}:null;"production"!==o&&i&&tn(s),this.atom_.reportChanged(),r&&uo(this,s),"production"!==o&&i&&nn()},e.get_=function(t){if(t<this.values_.length)return this.atom_.reportObserved(),this.dehanceValue_(this.values_[t]);console.warn("production"!==o?"[mobx] Out of bounds read: "+t:"[mobx.array] Attempt to read an array index ("+t+") that is out of bounds ("+this.values_.length+"). Please check length first. Out of bound indices will not be tracked by MobX")},e.set_=function(t,e){var n=this.values_;if(t<n.length){_e(this.atom_);var o=n[t];if(io(this)){var i=so(this,{type:ho,object:this.proxy_,index:t,newValue:e});if(!i)return;e=i.newValue}(e=this.enhancer_(e,o))!==o&&(n[t]=e,this.notifyArrayChildUpdate_(t,e,o))}else t===n.length?this.spliceWithArray_(t,0,[e]):r(17,t,n.length)},t}();function _o(t,e,n,i){void 0===n&&(n="production"!==o?"ObservableArray@"+m():"ObservableArray"),void 0===i&&(i=!1),y();var r=new fo(n,e,i,!1);P(r.values_,Z,r);var s=new Proxy(r.values_,po);if(r.proxy_=s,t&&t.length){var a=ne(!0);r.spliceWithArray_(0,0,t),oe(a)}return s}var yo={clear:function(){return this.splice(0)},replace:function(t){var e=this[Z];return e.spliceWithArray_(0,e.values_.length,t)},toJSON:function(){return this.slice()},splice:function(t,e){for(var n=arguments.length,o=new Array(n>2?n-2:0),i=2;i<n;i++)o[i-2]=arguments[i];var r=this[Z];switch(arguments.length){case 0:return[];case 1:return r.spliceWithArray_(t);case 2:return r.spliceWithArray_(t,e)}return r.spliceWithArray_(t,e,o)},spliceWithArray:function(t,e,n){return this[Z].spliceWithArray_(t,e,n)},push:function(){for(var t=this[Z],e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return t.spliceWithArray_(t.values_.length,0,n),t.values_.length},pop:function(){return this.splice(Math.max(this[Z].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var t=this[Z],e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return t.spliceWithArray_(0,0,n),t.values_.length},reverse:function(){return Re.trackingDerivation&&r(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){Re.trackingDerivation&&r(37,"sort");var t=this.slice();return t.sort.apply(t,arguments),this.replace(t),this},remove:function(t){var e=this[Z],n=e.dehanceValues_(e.values_).indexOf(t);return n>-1&&(this.splice(n,1),!0)}};function vo(t,e){"function"==typeof Array.prototype[t]&&(yo[t]=e(t))}function mo(t){return function(){var e=this[Z];e.atom_.reportObserved();var n=e.dehanceValues_(e.values_);return n[t].apply(n,arguments)}}function go(t){return function(e,n){var o=this,i=this[Z];return i.atom_.reportObserved(),i.dehanceValues_(i.values_)[t](function(t,i){return e.call(n,t,i,o)})}}function bo(t){return function(){var e=this,n=this[Z];n.atom_.reportObserved();var o=n.dehanceValues_(n.values_),i=arguments[0];return arguments[0]=function(t,n,o){return i(t,n,o,e)},o[t].apply(o,arguments)}}vo("concat",mo),vo("flat",mo),vo("includes",mo),vo("indexOf",mo),vo("join",mo),vo("lastIndexOf",mo),vo("slice",mo),vo("toString",mo),vo("toLocaleString",mo),vo("every",go),vo("filter",go),vo("find",go),vo("findIndex",go),vo("flatMap",go),vo("forEach",go),vo("map",go),vo("some",go),vo("reduce",bo),vo("reduceRight",bo);var wo,To,So=E("ObservableArrayAdministration",fo);function Oo(t){return S(t)&&So(t[Z])}var xo={},Co="add";wo=Symbol.iterator,To=Symbol.toStringTag;var Po=function(){function t(t,e,n){void 0===e&&(e=nt),void 0===n&&(n="production"!==o?"ObservableMap@"+m():"ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[Z]=xo,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=e,this.name_=n,w(Map)||r(18),this.keysAtom_=tt("production"!==o?this.name_+".keys()":"ObservableMap.keys()"),this.data_=new Map,this.hasMap_=new Map,this.merge(t)}var e=t.prototype;return e.has_=function(t){return this.data_.has(t)},e.has=function(t){var e=this;if(!Re.trackingDerivation)return this.has_(t);var n=this.hasMap_.get(t);if(!n){var i=n=new se(this.has_(t),ot,"production"!==o?this.name_+"."+N(t)+"?":"ObservableMap.key?",!1);this.hasMap_.set(t,i),Tn(i,function(){return e.hasMap_.delete(t)})}return n.get()},e.set=function(t,e){var n=this.has_(t);if(io(this)){var o=so(this,{type:n?ho:Co,object:this,newValue:e,name:t});if(!o)return this;e=o.newValue}return n?this.updateValue_(t,e):this.addValue_(t,e),this},e.delete=function(t){var e=this;if(_e(this.keysAtom_),io(this)&&!so(this,{type:"delete",object:this,name:t}))return!1;if(this.has_(t)){var n=Qe(),i=ao(this),r=i||n?{observableKind:"map",debugObjectName:this.name_,type:"delete",object:this,oldValue:this.data_.get(t).value_,name:t}:null;return"production"!==o&&n&&tn(r),Qn(function(){e.keysAtom_.reportChanged(),e.updateHasMapEntry_(t,!1),e.data_.get(t).setNewValue_(void 0),e.data_.delete(t)}),i&&uo(this,r),"production"!==o&&n&&nn(),!0}return!1},e.updateHasMapEntry_=function(t,e){var n=this.hasMap_.get(t);n&&n.setNewValue_(e)},e.updateValue_=function(t,e){var n=this.data_.get(t);if((e=n.prepareNewValue_(e))!==Re.UNCHANGED){var i=Qe(),r=ao(this),s=r||i?{observableKind:"map",debugObjectName:this.name_,type:ho,object:this,oldValue:n.value_,name:t,newValue:e}:null;"production"!==o&&i&&tn(s),n.setNewValue_(e),r&&uo(this,s),"production"!==o&&i&&nn()}},e.addValue_=function(t,e){var n=this;_e(this.keysAtom_),Qn(function(){var i=new se(e,n.enhancer_,"production"!==o?n.name_+"."+N(t):"ObservableMap.key",!1);n.data_.set(t,i),e=i.value_,n.updateHasMapEntry_(t,!0),n.keysAtom_.reportChanged()});var i=Qe(),r=ao(this),s=r||i?{observableKind:"map",debugObjectName:this.name_,type:Co,object:this,name:t,newValue:e}:null;"production"!==o&&i&&tn(s),r&&uo(this,s),"production"!==o&&i&&nn()},e.get=function(t){return this.has(t)?this.dehanceValue_(this.data_.get(t).get()):this.dehanceValue_(void 0)},e.dehanceValue_=function(t){return void 0!==this.dehancer?this.dehancer(t):t},e.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},e.values=function(){var t=this,e=this.keys();return ri({next:function(){var n=e.next(),o=n.done,i=n.value;return{done:o,value:o?void 0:t.get(i)}}})},e.entries=function(){var t=this,e=this.keys();return ri({next:function(){var n=e.next(),o=n.done,i=n.value;return{done:o,value:o?void 0:[i,t.get(i)]}}})},e[wo]=function(){return this.entries()},e.forEach=function(t,e){for(var n,o=W(this);!(n=o()).done;){var i=n.value,r=i[0],s=i[1];t.call(e,s,r,this)}},e.merge=function(t){var e=this;return Mo(t)&&(t=new Map(t)),Qn(function(){O(t)?D(t).forEach(function(n){return e.set(n,t[n])}):Array.isArray(t)?t.forEach(function(t){var n=t[0],o=t[1];return e.set(n,o)}):I(t)?(t.constructor!==Map&&r(19,t),t.forEach(function(t,n){return e.set(n,t)})):null!=t&&r(20,t)}),this},e.clear=function(){var t=this;Qn(function(){we(function(){for(var e,n=W(t.keys());!(e=n()).done;){var o=e.value;t.delete(o)}})})},e.replace=function(t){var e=this;return Qn(function(){for(var n,o=Ro(t),i=new Map,r=!1,s=W(e.data_.keys());!(n=s()).done;){var a=n.value;if(!o.has(a))if(e.delete(a))r=!0;else{var c=e.data_.get(a);i.set(a,c)}}for(var u,l=W(o.entries());!(u=l()).done;){var h=u.value,p=h[0],d=h[1],f=e.data_.has(p);if(e.set(p,d),e.data_.has(p)){var _=e.data_.get(p);i.set(p,_),f||(r=!0)}}if(!r)if(e.data_.size!==i.size)e.keysAtom_.reportChanged();else for(var y=e.data_.keys(),v=i.keys(),m=y.next(),g=v.next();!m.done;){if(m.value!==g.value){e.keysAtom_.reportChanged();break}m=y.next(),g=v.next()}e.data_=i}),this},e.toString=function(){return"[object ObservableMap]"},e.toJSON=function(){return Array.from(this)},e.observe_=function(t,e){return"production"!==o&&!0===e&&r("`observe` doesn't support fireImmediately=true in combination with maps."),co(this,t)},e.intercept_=function(t){return ro(this,t)},j(t,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:To,get:function(){return"Map"}}]),t}();n.ObservableMap=Po;var Eo,Io,Mo=E("ObservableMap",Po);function Ro(t){if(I(t)||Mo(t))return t;if(Array.isArray(t))return new Map(t);if(O(t)){var e=new Map;for(var n in t)e.set(n,t[n]);return e}return r(21,t)}n.isObservableMap=Mo;var Do={};Eo=Symbol.iterator,Io=Symbol.toStringTag;var Ao=function(){function t(t,e,n){void 0===e&&(e=nt),void 0===n&&(n="production"!==o?"ObservableSet@"+m():"ObservableSet"),this.name_=void 0,this[Z]=Do,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=n,w(Set)||r(22),this.atom_=tt(this.name_),this.enhancer_=function(t,o){return e(t,o,n)},t&&this.replace(t)}var e=t.prototype;return e.dehanceValue_=function(t){return void 0!==this.dehancer?this.dehancer(t):t},e.clear=function(){var t=this;Qn(function(){we(function(){for(var e,n=W(t.data_.values());!(e=n()).done;){var o=e.value;t.delete(o)}})})},e.forEach=function(t,e){for(var n,o=W(this);!(n=o()).done;){var i=n.value;t.call(e,i,i,this)}},e.add=function(t){var e=this;if(_e(this.atom_),io(this)&&!so(this,{type:Co,object:this,newValue:t}))return this;if(!this.has(t)){Qn(function(){e.data_.add(e.enhancer_(t,void 0)),e.atom_.reportChanged()});var n="production"!==o&&Qe(),i=ao(this),r=i||n?{observableKind:"set",debugObjectName:this.name_,type:Co,object:this,newValue:t}:null;n&&"production"!==o&&tn(r),i&&uo(this,r),n&&"production"!==o&&nn()}return this},e.delete=function(t){var e=this;if(io(this)&&!so(this,{type:"delete",object:this,oldValue:t}))return!1;if(this.has(t)){var n="production"!==o&&Qe(),i=ao(this),r=i||n?{observableKind:"set",debugObjectName:this.name_,type:"delete",object:this,oldValue:t}:null;return n&&"production"!==o&&tn(r),Qn(function(){e.atom_.reportChanged(),e.data_.delete(t)}),i&&uo(this,r),n&&"production"!==o&&nn(),!0}return!1},e.has=function(t){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(t))},e.entries=function(){var t=0,e=Array.from(this.keys()),n=Array.from(this.values());return ri({next:function(){var o=t;return t+=1,o<n.length?{value:[e[o],n[o]],done:!1}:{done:!0}}})},e.keys=function(){return this.values()},e.values=function(){this.atom_.reportObserved();var t=this,e=0,n=Array.from(this.data_.values());return ri({next:function(){return e<n.length?{value:t.dehanceValue_(n[e++]),done:!1}:{done:!0}}})},e.replace=function(t){var e=this;return No(t)&&(t=new Set(t)),Qn(function(){Array.isArray(t)?(e.clear(),t.forEach(function(t){return e.add(t)})):M(t)?(e.clear(),t.forEach(function(t){return e.add(t)})):null!=t&&r("Cannot initialize set from "+t)}),this},e.observe_=function(t,e){return"production"!==o&&!0===e&&r("`observe` doesn't support fireImmediately=true in combination with sets."),co(this,t)},e.intercept_=function(t){return ro(this,t)},e.toJSON=function(){return Array.from(this)},e.toString=function(){return"[object ObservableSet]"},e[Eo]=function(){return this.values()},j(t,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:Io,get:function(){return"Set"}}]),t}();n.ObservableSet=Ao;var No=E("ObservableSet",Ao);n.isObservableSet=No;var Fo=Object.create(null),Lo=function(){function t(t,e,n,i){void 0===e&&(e=new Map),void 0===i&&(i=Ct),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=t,this.values_=e,this.name_=n,this.defaultAnnotation_=i,this.keysAtom_=new Q("production"!==o?this.name_+".keys":"ObservableObject.keys"),this.isPlainObject_=O(this.target_),"production"===o||ai(this.defaultAnnotation_)||r("defaultAnnotation must be valid annotation"),"production"!==o&&(this.appliedAnnotations_={})}var e=t.prototype;return e.getObservablePropValue_=function(t){return this.values_.get(t).get()},e.setObservablePropValue_=function(t,e){var n=this.values_.get(t);if(n instanceof le)return n.set(e),!0;if(io(this)){var i=so(this,{type:ho,object:this.proxy_||this.target_,name:t,newValue:e});if(!i)return null;e=i.newValue}if((e=n.prepareNewValue_(e))!==Re.UNCHANGED){var r=ao(this),s="production"!==o&&Qe(),a=r||s?{type:ho,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:n.value_,name:t,newValue:e}:null;"production"!==o&&s&&tn(a),n.setNewValue_(e),r&&uo(this,a),"production"!==o&&s&&nn()}return!0},e.get_=function(t){return Re.trackingDerivation&&!L(this.target_,t)&&this.has_(t),this.target_[t]},e.set_=function(t,e,n){return void 0===n&&(n=!1),L(this.target_,t)?this.values_.has(t)?this.setObservablePropValue_(t,e):n?Reflect.set(this.target_,t,e):(this.target_[t]=e,!0):this.extend_(t,{value:e,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,n)},e.has_=function(t){if(!Re.trackingDerivation)return t in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var e=this.pendingKeys_.get(t);return e||(e=new se(t in this.target_,ot,"production"!==o?this.name_+"."+N(t)+"?":"ObservableObject.key?",!1),this.pendingKeys_.set(t,e)),e.get()},e.make_=function(t,e){if(!0===e&&(e=this.defaultAnnotation_),!1!==e){if(Go(this,e,t),!(t in this.target_)){var n;if(null==(n=this.target_[q])?void 0:n[t])return;r(1,e.annotationType_,this.name_+"."+t.toString())}for(var o=this.target_;o&&o!==h;){var i=u(o,t);if(i){var s=e.make_(this,t,i,o);if(0===s)return;if(1===s)break}o=Object.getPrototypeOf(o)}Bo(this,e,t)}},e.extend_=function(t,e,n,o){if(void 0===o&&(o=!1),!0===n&&(n=this.defaultAnnotation_),!1===n)return this.defineProperty_(t,e,o);Go(this,n,t);var i=n.extend_(this,t,e,o);return i&&Bo(this,n,t),i},e.defineProperty_=function(t,e,n){void 0===n&&(n=!1);try{Ue();var o=this.delete_(t);if(!o)return o;if(io(this)){var i=so(this,{object:this.proxy_||this.target_,name:t,type:Co,newValue:e.value});if(!i)return null;var r=i.newValue;e.value!==r&&(e=V({},e,{value:r}))}if(n){if(!Reflect.defineProperty(this.target_,t,e))return!1}else l(this.target_,t,e);this.notifyPropertyAddition_(t,e.value)}finally{je()}return!0},e.defineObservableProperty_=function(t,e,n,i){void 0===i&&(i=!1);try{Ue();var r=this.delete_(t);if(!r)return r;if(io(this)){var s=so(this,{object:this.proxy_||this.target_,name:t,type:Co,newValue:e});if(!s)return null;e=s.newValue}var a=jo(t),c={configurable:!Re.safeDescriptors||this.isPlainObject_,enumerable:!0,get:a.get,set:a.set};if(i){if(!Reflect.defineProperty(this.target_,t,c))return!1}else l(this.target_,t,c);var u=new se(e,n,"production"!==o?this.name_+"."+t.toString():"ObservableObject.key",!1);this.values_.set(t,u),this.notifyPropertyAddition_(t,u.value_)}finally{je()}return!0},e.defineComputedProperty_=function(t,e,n){void 0===n&&(n=!1);try{Ue();var i=this.delete_(t);if(!i)return i;if(io(this)&&!so(this,{object:this.proxy_||this.target_,name:t,type:Co,newValue:void 0}))return null;e.name||(e.name="production"!==o?this.name_+"."+t.toString():"ObservableObject.key"),e.context=this.proxy_||this.target_;var r=jo(t),s={configurable:!Re.safeDescriptors||this.isPlainObject_,enumerable:!1,get:r.get,set:r.set};if(n){if(!Reflect.defineProperty(this.target_,t,s))return!1}else l(this.target_,t,s);this.values_.set(t,new le(e)),this.notifyPropertyAddition_(t,void 0)}finally{je()}return!0},e.delete_=function(t,e){if(void 0===e&&(e=!1),!L(this.target_,t))return!0;if(io(this)&&!so(this,{object:this.proxy_||this.target_,name:t,type:"remove"}))return null;try{var n,i;Ue();var r,s=ao(this),a="production"!==o&&Qe(),c=this.values_.get(t),l=void 0;if(c||!s&&!a||(l=null==(r=u(this.target_,t))?void 0:r.value),e){if(!Reflect.deleteProperty(this.target_,t))return!1}else delete this.target_[t];if("production"!==o&&delete this.appliedAnnotations_[t],c&&(this.values_.delete(t),c instanceof se&&(l=c.value_),Be(c)),this.keysAtom_.reportChanged(),null==(n=this.pendingKeys_)||null==(i=n.get(t))||i.set(t in this.target_),s||a){var h={type:"remove",observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:l,name:t};"production"!==o&&a&&tn(h),s&&uo(this,h),"production"!==o&&a&&nn()}}finally{je()}return!0},e.observe_=function(t,e){return"production"!==o&&!0===e&&r("`observe` doesn't support the fire immediately property for observable objects."),co(this,t)},e.intercept_=function(t){return ro(this,t)},e.notifyPropertyAddition_=function(t,e){var n,i,r=ao(this),s="production"!==o&&Qe();if(r||s){var a=r||s?{type:Co,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:t,newValue:e}:null;"production"!==o&&s&&tn(a),r&&uo(this,a),"production"!==o&&s&&nn()}null==(n=this.pendingKeys_)||null==(i=n.get(t))||i.set(!0),this.keysAtom_.reportChanged()},e.ownKeys_=function(){return this.keysAtom_.reportObserved(),A(this.target_)},e.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},t}();function ko(t,e){var n;if("production"!==o&&e&&Vo(t)&&r("Options can't be provided for already observable objects."),L(t,Z))return"production"===o||$o(t)instanceof Lo||r("Cannot convert '"+ti(t)+"' into observable object:\nThe target is already observable of different type.\nExtending builtins is not supported."),t;"production"===o||Object.isExtensible(t)||r("Cannot make the designated object observable; it is not extensible");var i=null!=(n=null==e?void 0:e.name)?n:"production"!==o?(O(t)?"ObservableObject":t.constructor.name)+"@"+m():"ObservableObject",s=new Lo(t,new Map,String(i),Ut(e));return C(t,Z,s),t}var Uo=E("ObservableObjectAdministration",Lo);function jo(t){return Fo[t]||(Fo[t]={get:function(){return this[Z].getObservablePropValue_(t)},set:function(e){return this[Z].setObservablePropValue_(t,e)}})}function Vo(t){return!!S(t)&&Uo(t[Z])}function Bo(t,e,n){var i;"production"!==o&&(t.appliedAnnotations_[n]=e),null==(i=t.target_[q])||delete i[n]}function Go(t,e,n){if("production"===o||ai(e)||r("Cannot annotate '"+t.name_+"."+n.toString()+"': Invalid annotation."),"production"!==o&&!st(e)&&L(t.appliedAnnotations_,n)){var i=t.name_+"."+n.toString(),s=t.appliedAnnotations_[n].annotationType_;r("Cannot apply '"+e.annotationType_+"' to '"+i+"':\nThe field is already annotated with '"+s+"'.\nRe-annotating fields is not allowed.\nUse 'override' annotation for methods overriden by subclass.")}}var Ho,zo,Wo=0,qo=function(){};Ho=qo,zo=Array.prototype,Object.setPrototypeOf?Object.setPrototypeOf(Ho.prototype,zo):void 0!==Ho.prototype.__proto__?Ho.prototype.__proto__=zo:Ho.prototype=zo;var Yo=function(t){function e(e,n,i,r){var s;void 0===i&&(i="production"!==o?"ObservableArray@"+m():"ObservableArray"),void 0===r&&(r=!1),s=t.call(this)||this;var a=new fo(i,n,r,!0);if(a.proxy_=G(s),P(G(s),Z,a),e&&e.length){var c=ne(!0);s.spliceWithArray(0,0,e),oe(c)}return s}B(e,t);var n=e.prototype;return n.concat=function(){this[Z].atom_.reportObserved();for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Array.prototype.concat.apply(this.slice(),e.map(function(t){return Oo(t)?t.slice():t}))},n[Symbol.iterator]=function(){var t=this,e=0;return ri({next:function(){return e<t.length?{value:t[e++],done:!1}:{done:!0,value:void 0}}})},j(e,[{key:"length",get:function(){return this[Z].getArrayLength_()},set:function(t){this[Z].setArrayLength_(t)}},{key:Symbol.toStringTag,get:function(){return"Array"}}]),e}(qo);function Xo(t){return{enumerable:!1,configurable:!0,get:function(){return this[Z].get_(t)},set:function(e){this[Z].set_(t,e)}}}function Ko(t){l(Yo.prototype,""+t,Xo(t))}function Jo(t){if(t>Wo){for(var e=Wo;e<t+100;e++)Ko(e);Wo=t}}function Zo(t,e,n){return new Yo(t,e,n)}function Qo(t,e){if("object"==typeof t&&null!==t){if(Oo(t))return void 0!==e&&r(23),t[Z].atom_;if(No(t))return t[Z];if(Mo(t)){if(void 0===e)return t.keysAtom_;var n=t.data_.get(e)||t.hasMap_.get(e);return n||r(25,e,ti(t)),n}if(Vo(t)){if(!e)return r(26);var o=t[Z].values_.get(e);return o||r(27,e,ti(t)),o}if($(t)||he(t)||Ze(t))return t}else if(w(t)&&Ze(t[Z]))return t[Z];r(28)}function $o(t,e){return t||r(29),void 0!==e?$o(Qo(t,e)):$(t)||he(t)||Ze(t)?t:Mo(t)||No(t)?t:t[Z]?t[Z]:void r(24,t)}function ti(t,e){var n;if(void 0!==e)n=Qo(t,e);else{if(_n(t))return t.name;n=Vo(t)||Mo(t)||No(t)?$o(t):Qo(t)}return n.name_}Object.entries(yo).forEach(function(t){var e=t[0],n=t[1];"concat"!==e&&C(Yo.prototype,e,n)}),Jo(1e3);var ei=h.toString;function ni(t,e,n){return void 0===n&&(n=-1),oi(t,e,n)}function oi(t,e,n,o,i){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return!1;if(t!=t)return e!=e;var r=typeof t;if(!w(r)&&"object"!==r&&"object"!=typeof e)return!1;var s=ei.call(t);if(s!==ei.call(e))return!1;switch(s){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return"undefined"!=typeof Symbol&&Symbol.valueOf.call(t)===Symbol.valueOf.call(e);case"[object Map]":case"[object Set]":n>=0&&n++}t=ii(t),e=ii(e);var a="[object Array]"===s;if(!a){if("object"!=typeof t||"object"!=typeof e)return!1;var c=t.constructor,u=e.constructor;if(c!==u&&!(w(c)&&c instanceof c&&w(u)&&u instanceof u)&&"constructor"in t&&"constructor"in e)return!1}if(0===n)return!1;n<0&&(n=-1),i=i||[];for(var l=(o=o||[]).length;l--;)if(o[l]===t)return i[l]===e;if(o.push(t),i.push(e),a){if((l=t.length)!==e.length)return!1;for(;l--;)if(!oi(t[l],e[l],n-1,o,i))return!1}else{var h,p=Object.keys(t);if(l=p.length,Object.keys(e).length!==l)return!1;for(;l--;)if(!L(e,h=p[l])||!oi(t[h],e[h],n-1,o,i))return!1}return o.pop(),i.pop(),!0}function ii(t){return Oo(t)?t.slice():I(t)||Mo(t)?Array.from(t.entries()):M(t)||No(t)?Array.from(t.entries()):t}function ri(t){return t[Symbol.iterator]=si,t}function si(){return this}function ai(t){return t instanceof Object&&"string"==typeof t.annotationType_&&w(t.make_)&&w(t.extend_)}["Symbol","Map","Set","Symbol"].forEach(function(t){void 0===a()[t]&&r("MobX requires global '"+t+"' to be available or polyfilled")}),"object"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:on,extras:{getDebugName:ti},$mobx:Z}),cc._RF.pop()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},["UIHome_Auto","UIWorkDesk_Auto","BaseAssembler","BatchAssembler","MeshAssembler","TextureAssembler","BroadcastCenter","BatchComponent","ButtonPlus","CacheUtils","CameraCapture","DrawBorad","GPWorkFlow","GridScrollList","List","ListItem","MaskPlus","MeshTexture","PropController","PropSelector","QuadTree","RecycleScroll","ScrollViewHelper","Shake","SpinePlus","TexturePlus","TouchPlus","GPDrag","GameConfig","Light","LightStruct","LightUtils","Obstacle","mobx","StateMachine","BigNumUtils","BroadCast","ClassHelper","CommonUtils","DebugWindowUtils","DrawingBoard","Dungeon","EnumUtils","GlobalHelper","LRUCache","MatchUtils","Measure","PolygonUtil","Pool","PriorityQueue","PriorityStack","PropBind","Queue","TaskMgr","GlobalData","RawMaterial","AutoFindPath","Joystick","Coffee","MenuItem","RawItem","Player","Game","BaseMgr","ConfigMgr","PlayerMgr","Main","Scene","UIConfig","AdapterMgr","CocosHelper","EventCenter","EventType","FixedMgr","FormMgr","ModalMgr","ResMgr","SceneMgr","SoundMgr","Struct","TipsMgr","ToastMgr","UIBase","UIForm","UIManager","UIModalScript","WindowMgr","SysConfig","SysDefine","UIHome","UILoading","UIWorkDesk"]);